"use strict";(self.webpackChunkng_ant_admin=self.webpackChunkng_ant_admin||[]).push([[4267],{94267:(q,E,o)=>{o.d(E,{a:()=>V});var g=o(44556),f=o(28746),n=o(94650),s=o(24006),b=o(67859),k=o(91565),X=o(85216),M=o(49651),S=o(50007),Z=o(69454),y=o(49523),u=o(39646),v=o(36895),d=o(73679),l=o(36704),C=o(35635);function w(a,r){if(1&a&&(n.ynx(0),n._uU(1),n.BQk()),2&a){const t=n.oxw().$implicit;n.xp6(1),n.Oqu(t.errors.message)}}function x(a,r){1&a&&(n.ynx(0),n._uU(1,"Ph\u1ea7n b\u1eaft bu\u1ed9c"),n.BQk())}function L(a,r){if(1&a&&(n.YNc(0,w,2,1,"ng-container",9),n.YNc(1,x,2,0,"ng-container",9)),2&a){const t=r.$implicit;n.Q6J("ngIf",t.hasError("message")),n.xp6(1),n.Q6J("ngIf",t.hasError("required"))}}let J=(()=>{class a{constructor(t,e,i,h){this.modalRef=t,this.fb=e,this.cdf=i,this.validatorsService=h}initForm(){this.addForm=this.fb.group({makhachhang:[null,[s.kI.required]],name:[null,[s.kI.required]],dienthoai:[null,[this.validatorsService.mobileValidator()]]})}ngOnInit(){this.initForm()}getAsyncFnData(t){return(0,u.of)(t)}getCurrentValue(){return(0,y.r7)(this.addForm)?(0,u.of)(this.addForm.value):(0,u.of)(!1)}}return a.\u0275fac=function(t){return new(t||a)(n.Y36(S.Lf),n.Y36(s.qu),n.Y36(n.sBO),n.Y36(b.S))},a.\u0275cmp=n.Xpm({type:a,selectors:[["app-subwindowsmartkhachhang"]],decls:18,vars:16,consts:[["nz-form","",3,"formGroup"],["nzRequired","","nzFor","makhachhang",3,"nzSm","nzXs"],[3,"nzSm","nzXs","nzErrorTip"],["nz-input","","formControlName","makhachhang","id","makhachhang","placeholder","M\xe3 kh\xe1ch h\xe0ng"],["nzRequired","","nzFor","name",3,"nzSm","nzXs"],["nz-input","","formControlName","name","id","name","placeholder","T\xean kh\xe1ch h\xe0ng"],["nzRequired","","nzFor","dienthoai",3,"nzSm","nzXs"],["nz-input","","formControlName","dienthoai","id","dienthoai","placeholder","S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"],["combineTpl",""],[4,"ngIf"]],template:function(t,e){if(1&t&&(n.TgZ(0,"form",0)(1,"nz-form-item")(2,"nz-form-label",1),n._uU(3,"M\xe3 kh\xe1ch h\xe0ng"),n.qZA(),n.TgZ(4,"nz-form-control",2),n._UZ(5,"input",3),n.qZA()(),n.TgZ(6,"nz-form-item")(7,"nz-form-label",4),n._uU(8,"T\xean kh\xe1ch h\xe0ng"),n.qZA(),n.TgZ(9,"nz-form-control",2),n._UZ(10,"input",5),n.qZA()(),n.TgZ(11,"nz-form-item")(12,"nz-form-label",6),n._uU(13,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"),n.qZA(),n.TgZ(14,"nz-form-control",2),n._UZ(15,"input",7),n.qZA()()(),n.YNc(16,L,2,2,"ng-template",null,8,n.W1O)),2&t){const i=n.MAs(17);n.Q6J("formGroup",e.addForm),n.xp6(2),n.Q6J("nzSm",4)("nzXs",24),n.xp6(2),n.Q6J("nzSm",18)("nzXs",24)("nzErrorTip",i),n.xp6(3),n.Q6J("nzSm",4)("nzXs",24),n.xp6(2),n.Q6J("nzSm",18)("nzXs",24)("nzErrorTip",i),n.xp6(3),n.Q6J("nzSm",4)("nzXs",24),n.xp6(2),n.Q6J("nzSm",18)("nzXs",24)("nzErrorTip",i)}},dependencies:[v.O5,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,d.t3,d.SK,l.Lr,l.Nx,l.iK,l.Fd,C.Zp]}),a})();var T=o(69174);let A=(()=>{class a{constructor(t){this.modalWrapService=t}getContentComponent(){return J}show(t={},e){return this.modalWrapService.show(this.getContentComponent(),t,e)}}return a.\u0275fac=function(t){return new(t||a)(n.LFG(T.U))},a.\u0275prov=n.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var F=o(5529),N=o(94178),Q=o(21102),D=o(66616),Y=o(47044),P=o(21811),U=o(51971);const G=["operationTpl"],I=["availableFlag"];function K(a,r){if(1&a){const t=n.EpF();n.TgZ(0,"a",18),n.NdJ("click",function(){const i=n.CHM(t),h=i.id,m=i.name,c=i.dienthoai,p=i.diachi,z=n.oxw();return n.KtG(z.getItem(h,m,c,p))}),n._uU(1),n.qZA()}if(2&a){const t=r.name;n.xp6(1),n.Oqu(t)}}function R(a,r){if(1&a){const t=n.EpF();n.TgZ(0,"button",10),n.NdJ("click",function(){n.CHM(t);const i=n.oxw();return n.KtG(i.addNew())}),n._UZ(1,"i",19),n._uU(2,"Th\xeam m\u1edbi"),n.qZA()}}const B=function(){return{"padding-bottom":0}},_=function(){return{md:24}},O=function(){return["toright"]};let H=(()=>{class a{constructor(t,e,i,h,m,c,p,z,W){this.fb=t,this.validatorsService=e,this.webService=i,this.vf=h,this.message=m,this.cdr=c,this.modalRef=p,this.dataService=z,this.subSmartKhachhangService=W,this.dataList=[],this.dataResponse={},this.messageErrors=[],this.searchParam={}}submitForm(){}reset(){this.searchParam={},this.searchParam.phongban_id=g.idKhachhang,this.getDataList()}generateRandomEmail(){const t="abcdefghijklmnopqrstuvwxyz0123456789";let e="";for(let i=0;i<10;i++)e+=t[Math.floor(Math.random()*t.length)];return e+="@gmail.com",e}addNew(){this.subSmartKhachhangService.show({nzTitle:"Th\xeam m\u1edbi"}).subscribe(t=>{if(!t||0===t.status)return;let e=t.modalValue.makhachhang;this.smartUser={phongban_id:g.idKhachhang,makhachhang:t.modalValue.makhachhang,name:t.modalValue.name,dienthoai:t.modalValue.dienthoai,email:this.generateRandomEmail(),password:"a123456"},this.dataService.addSmartAccount(this.smartUser).pipe((0,f.x)(()=>{this.tableLoading(!1)})).subscribe(i=>{this.searchParam.makhachhang=e,this.getDataList(),this.message.success("Th\xeam m\u1edbi th\xe0nh c\xf4ng !")})})}ngOnInit(){this.searchParam.phongban_id=g.idKhachhang,this.initTable()}tableChangeDectction(){this.dataList=[...this.dataList],this.cdr.detectChanges()}tableLoading(t){this.tableConfig.loading=t,this.tableChangeDectction()}getDataList(t){this.tableConfig.loading=!0,this.dataService.getAccount({pageSize:this.tableConfig.pageSize,pageNum:t?.pageIndex||this.tableConfig.pageIndex,filters:this.searchParam}).pipe((0,f.x)(()=>{this.tableLoading(!1)})).subscribe(i=>{const{list:h,total:m,pageNum:c}=i;this.dataList=[...h],this.tableConfig.total=m,this.tableConfig.pageIndex=c,this.tableLoading(!1)})}changePageSize(t){this.tableConfig.pageSize=t}resetForm(){this.searchParam={},this.getDataList()}reloadTable(){this.message.info("L\xe0m m\u1edbi th\xe0nh c\xf4ng"),this.getDataList()}getItem(t,e,i,h){this.dataResponse={id:t,name:e,sodienthoai:i,diachi:h},this.modalRef.destroy({status:1,modalValue:this.dataResponse})}initTable(){this.tableConfig={showCheckbox:!1,headers:[{title:"M\xe3 Kh\xe1ch h\xe0ng",field:"makhachhang",width:220},{title:"T\xean kh\xe1ch h\xe0ng",field:"name",width:220,tdTemplate:this.operationTpl},{title:"Tr\u1ea1ng th\xe1i",width:150,field:"available"},{title:"Gi\u1edbi T\xednh",width:120,field:"sex",pipe:"sex"},{title:"\u0110i\u1ec7n Tho\u1ea1i",width:150,field:"dienthoai"},{title:"Email",width:200,field:"email"},{title:"\u0110\u0103ng nh\u1eadp l\u1ea7n cu\u1ed1i",width:200,field:"lastLoginTime",pipe:"date:yyyy-MM-dd HH:mm"},{title:"Ng\xe0y kh\u1edfi t\u1ea1o",width:150,field:"createdAt",pipe:"date:yyyy-MM-dd HH:mm"},{title:"Zalo",width:150,field:"zalo"}],total:0,loading:!0,pageSize:10,pageIndex:1}}}return a.\u0275fac=function(t){return new(t||a)(n.Y36(s.qu),n.Y36(b.S),n.Y36(k.Q),n.Y36(X.m),n.Y36(M.dD),n.Y36(n.sBO),n.Y36(S.Lf),n.Y36(Z.B),n.Y36(A))},a.\u0275cmp=n.Xpm({type:a,selectors:[["app-spin00251subkhachhang"]],viewQuery:function(t,e){if(1&t&&(n.Gf(G,7),n.Gf(I,7)),2&t){let i;n.iGM(i=n.CRH())&&(e.operationTpl=i.first),n.iGM(i=n.CRH())&&(e.availableFlag=i.first)}},decls:29,vars:51,consts:[[1,"normal-table-wrap"],["nzHoverable","",1,"m-b-10",3,"nzBodyStyle"],["nz-form",""],["nz-row","",3,"nzGutter"],["nz-col","",3,"nzXXl","nzXl","nzLg","nzMd","nzSm","nzXs"],[3,"nzXXl","nzXl","nzLg","nzMd","nzSm","nzXs","nzFor"],[3,"nzXXl","nzXl","nzLg","nzMd","nzSm","nzXs"],["nz-input","","name","makhachhang","placeholder","M\xe3 kh\xe1ch h\xe0ng",3,"ngModel","ngModelChange"],["nz-input","","name","dienthoai","placeholder","S\u1ed1 \u0111i\u1ec7n tho\u1ea1i",3,"ngModel","ngModelChange"],["nz-row","",3,"nzGutter","ngClass"],["nz-button","","nzType","primary",3,"click"],["nz-icon","","nzType","search"],["nzGhost","","nz-button","","nzType","primary",1,"m-l-20",3,"click"],["nz-icon","","nzType","close-circle"],[3,"tableTitle","btnTpl","isNormalTable","reload"],[3,"tableConfig","tableData","changePageSize","changePageNum"],["operationTpl",""],["tableTbl",""],["nz-button","","nzType","link",3,"click"],["nz-icon","","nzType","plus"]],template:function(t,e){if(1&t&&(n.TgZ(0,"div",0)(1,"nz-card",1)(2,"form",2)(3,"div",3)(4,"div",4)(5,"nz-form-item")(6,"nz-form-label",5),n._uU(7,"M\xe3 kh\xe1ch h\xe0ng"),n.qZA(),n.TgZ(8,"nz-form-control",6)(9,"input",7),n.NdJ("ngModelChange",function(h){return e.searchParam.makhachhang=h}),n.qZA()()()(),n.TgZ(10,"div",4)(11,"nz-form-item")(12,"nz-form-label",5),n._uU(13,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"),n.qZA(),n.TgZ(14,"nz-form-control",6)(15,"input",8),n.NdJ("ngModelChange",function(h){return e.searchParam.dienthoai=h}),n.qZA()()()()(),n.TgZ(16,"div",9)(17,"button",10),n.NdJ("click",function(){return e.getDataList()}),n._UZ(18,"i",11),n._uU(19,"T\xecm ki\u1ebfm"),n.qZA(),n.TgZ(20,"button",12),n.NdJ("click",function(){return e.reset()}),n._UZ(21,"i",13),n._uU(22,"L\xe0m m\u1edbi"),n.qZA()()()()(),n.TgZ(23,"app-card-table-wrap",14),n.NdJ("reload",function(){return e.reloadTable()}),n.TgZ(24,"app-ant-table",15),n.NdJ("changePageSize",function(h){return e.changePageSize(h)})("changePageNum",function(h){return e.getDataList(h)}),n.qZA(),n.YNc(25,K,2,1,"ng-template",null,16,n.W1O),n.qZA(),n.YNc(27,R,3,0,"ng-template",null,17,n.W1O)),2&t){const i=n.MAs(28);n.xp6(1),n.Q6J("nzBodyStyle",n.DdM(47,B)),n.xp6(2),n.Q6J("nzGutter",n.DdM(48,_)),n.xp6(1),n.Q6J("nzXXl",12)("nzXl",12)("nzLg",12)("nzMd",24)("nzSm",24)("nzXs",24),n.xp6(2),n.Q6J("nzXXl",9)("nzXl",9)("nzLg",9)("nzMd",9)("nzSm",24)("nzXs",24),n.xp6(2),n.Q6J("nzXXl",15)("nzXl",15)("nzLg",15)("nzMd",15)("nzSm",24)("nzXs",24),n.xp6(1),n.Q6J("ngModel",e.searchParam.makhachhang),n.xp6(1),n.Q6J("nzXXl",12)("nzXl",12)("nzLg",12)("nzMd",24)("nzSm",24)("nzXs",24),n.xp6(2),n.Q6J("nzXXl",9)("nzXl",9)("nzLg",9)("nzMd",12)("nzSm",24)("nzXs",24),n.xp6(2),n.Q6J("nzXXl",15)("nzXl",15)("nzLg",15)("nzMd",12)("nzSm",24)("nzXs",24),n.xp6(1),n.Q6J("ngModel",e.searchParam.dienthoai),n.xp6(1),n.Q6J("nzGutter",n.DdM(49,_))("ngClass",n.DdM(50,O)),n.xp6(7),n.Q6J("tableTitle","K\u1ebft qu\u1ea3 t\xecm ki\u1ebfm")("btnTpl",i)("isNormalTable",!1),n.xp6(1),n.Q6J("tableConfig",e.tableConfig)("tableData",e.dataList)}},dependencies:[v.mk,s._Y,s.Fj,s.JJ,s.JL,s.On,s.F,F.q,N.p,Q.Ls,d.t3,d.SK,l.Lr,l.Nx,l.iK,l.Fd,D.ix,Y.w,P.dQ,C.Zp,U.bd],styles:[".toright[_ngcontent-%COMP%]{display:flex;justify-content:end;margin-bottom:10px}"]}),a})(),V=(()=>{class a{constructor(t){this.modalWrapService=t}getContentComponent(){return H}show(t={},e){return this.modalWrapService.show(this.getContentComponent(),t,e)}}return a.\u0275fac=function(t){return new(t||a)(n.LFG(T.U))},a.\u0275prov=n.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()}}]);