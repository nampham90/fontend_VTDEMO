"use strict";(self.webpackChunkng_ant_admin=self.webpackChunkng_ant_admin||[]).push([[801],{10801:(Z,v,o)=>{o.r(v),o.d(v,{WebsocketModule:()=>Y});var e=o(5316),C=o(9116),S=o(89019),b=o(77579),z=o(70930),k=o(69751),A=o(50727),x=o(4707);const E={url:"",deserializer:r=>JSON.parse(r.data),serializer:r=>JSON.stringify(r)};class y extends b.u{constructor(n,a){if(super(),this._socket=null,n instanceof k.y)this.destination=a,this.source=n;else{const c=this._config=Object.assign({},E);if(this._output=new b.x,"string"==typeof n)c.url=n;else for(const p in n)n.hasOwnProperty(p)&&(c[p]=n[p]);if(!c.WebSocketCtor&&WebSocket)c.WebSocketCtor=WebSocket;else if(!c.WebSocketCtor)throw new Error("no WebSocket constructor can be found");this.destination=new x.t}}lift(n){const a=new y(this._config,this.destination);return a.operator=n,a.source=this,a}_resetState(){this._socket=null,this.source||(this.destination=new x.t),this._output=new b.x}multiplex(n,a,c){const p=this;return new k.y(d=>{try{p.next(n())}catch(f){d.error(f)}const u=p.subscribe({next:f=>{try{c(f)&&d.next(f)}catch(g){d.error(g)}},error:f=>d.error(f),complete:()=>d.complete()});return()=>{try{p.next(a())}catch(f){d.error(f)}u.unsubscribe()}})}_connectSocket(){const{WebSocketCtor:n,protocol:a,url:c,binaryType:p}=this._config,d=this._output;let u=null;try{u=a?new n(c,a):new n(c),this._socket=u,p&&(this._socket.binaryType=p)}catch(g){return void d.error(g)}const f=new A.w0(()=>{this._socket=null,u&&1===u.readyState&&u.close()});u.onopen=g=>{const{_socket:_}=this;if(!_)return u.close(),void this._resetState();const{openObserver:F}=this._config;F&&F.next(g);const B=this.destination;this.destination=z.Lv.create(m=>{if(1===u.readyState)try{const{serializer:T}=this._config;u.send(T(m))}catch(T){this.destination.error(T)}},m=>{const{closingObserver:T}=this._config;T&&T.next(void 0),m&&m.code?u.close(m.code,m.reason):d.error(new TypeError("WebSocketSubject.error must be called with an object with an error code, and an optional reason: { code: number, reason: string }")),this._resetState()},()=>{const{closingObserver:m}=this._config;m&&m.next(void 0),u.close(),this._resetState()}),B&&B instanceof x.t&&f.add(B.subscribe(this.destination))},u.onerror=g=>{this._resetState(),d.error(g)},u.onclose=g=>{u===this._socket&&this._resetState();const{closeObserver:_}=this._config;_&&_.next(g),g.wasClean?d.complete():d.error(g)},u.onmessage=g=>{try{const{deserializer:_}=this._config;d.next(_(g))}catch(_){d.error(_)}}}_subscribe(n){const{source:a}=this;return a?a.subscribe(n):(this._socket||this._connectSocket(),this._output.subscribe(n),n.add(()=>{const{_socket:c}=this;0===this._output.observers.length&&(c&&(1===c.readyState||0===c.readyState)&&c.close(),this._resetState())}),n)}unsubscribe(){const{_socket:n}=this;n&&(1===n.readyState||0===n.readyState)&&n.close(),this._resetState(),super.unsubscribe()}}var t=o(94650),W=o(36895),O=o(24006),s=o(32802),l=o(73679),i=o(66616),h=o(47044),P=o(21811),D=o(35635),H=o(51971),J=o(76174),U=o(48823);function w(r,n){if(1&r&&(t.ynx(0),t.TgZ(1,"div",10)(2,"span",11),t._uU(3),t.qZA()(),t.TgZ(4,"div",12),t._uU(5,"\u5df2\u8bfb"),t.qZA(),t.BQk()),2&r){const a=n.$implicit;t.xp6(3),t.Oqu(a)}}const N=function(){return[16,16]},Q=function(){return{minRows:3,maxRows:5}},R=[{path:"",component:(()=>{class r{constructor(a){this.cdr=a,this.concate=!0,this.pageHeaderInfo={title:"websocket",breadcrumb:["\u9996\u9875","\u529f\u80fd","websocket"]},this.subject=function M(r){return new y(r)}(`ws://${S.ip}:8003/webSocket`),this.result=[],this.msg=""}send(){this.subject.next(this.msg),this.msg=""}end(){this.subject.complete(),this.concate=!1}ngOnInit(){}ngAfterViewInit(){this.subject.subscribe(a=>{this.result.push(a.message),this.result=[...this.result],this.cdr.markForCheck()})}ngOnDestroy(){this.subject.complete()}}return r.\u0275fac=function(a){return new(a||r)(t.Y36(t.sBO))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-websocket"]],decls:14,vars:8,consts:[[3,"pageHeaderInfo"],[1,"normal-table-wrap"],["nz-row","",3,"nzGutter"],["nz-col","","nzFlex","300px"],["nz-input","","placeholder","\u53d1\u9001\u7684\u5185\u5bb9\u670d\u52a1\u7aef\u4f1a\u8fd4\u56de",1,"m-b-8",3,"ngModel","nzAutosize","ngModelChange"],["nz-button","","nzType","primary",3,"click"],["nz-button","","nzType","default",1,"m-l-8",3,"click"],["nz-col","","nzFlex","auto"],["nzTitle","\u6d88\u606f\u5185\u5bb9"],[4,"ngFor","ngForOf"],["nz-result-content","",1,"m-t-0","p-8","text-break","m-b-8"],["nz-typography",""],["nz-typography","","nzType","secondary",1,"sp-12","text-right","m-t-5"]],template:function(a,c){1&a&&(t._UZ(0,"app-page-header",0),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"textarea",4),t.NdJ("ngModelChange",function(d){return c.msg=d}),t.qZA(),t.TgZ(5,"button",5),t.NdJ("click",function(){return c.send()}),t._uU(6,"\u53d1\u9001"),t.qZA(),t.TgZ(7,"button",6),t.NdJ("click",function(){return c.end()}),t._uU(8,"\u65ad\u5f00\u8fde\u63a5"),t.qZA(),t.TgZ(9,"span"),t._uU(10),t.qZA()(),t.TgZ(11,"div",7)(12,"nz-card",8),t.YNc(13,w,6,1,"ng-container",9),t.qZA()()()()),2&a&&(t.Q6J("pageHeaderInfo",c.pageHeaderInfo),t.xp6(2),t.Q6J("nzGutter",t.DdM(6,N)),t.xp6(2),t.Q6J("ngModel",c.msg)("nzAutosize",t.DdM(7,Q)),t.xp6(6),t.hij("\u94fe\u63a5\u72b6\u6001\uff1a",c.concate,""),t.xp6(3),t.Q6J("ngForOf",c.result))},dependencies:[W.sg,O.Fj,O.JJ,O.On,s.q,l.t3,l.SK,i.ix,h.w,P.dQ,D.Zp,D.rh,H.bd,J.HO,U.ZU],changeDetection:0}),r})(),data:{title:"ki\u1ec3m tra websocket",key:"websocket"}}];let j=(()=>{class r{}return r.\u0275fac=function(a){return new(a||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[C.Bz.forChild(R),C.Bz]}),r})(),Y=(()=>{class r{}return r.\u0275fac=function(a){return new(a||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[e.m,j]}),r})()},32802:(Z,v,o)=>{o.d(v,{q:()=>O});var e=o(94650),C=o(29576),S=o(9116),b=o(36895),z=o(45655),k=o(94963),A=o(66287);function x(s,l){if(1&s&&(e.TgZ(0,"nz-breadcrumb-item")(1,"a"),e._uU(2),e.qZA()()),2&s){const i=l.$implicit;e.xp6(2),e.Oqu(i)}}function E(s,l){1&s&&e.GkF(0)}function I(s,l){if(1&s&&(e.TgZ(0,"nz-page-header-extra"),e.YNc(1,E,1,0,"ng-container",4),e.qZA()),2&s){const i=e.oxw();e.xp6(1),e.Q6J("ngTemplateOutlet",i.extraTpl)}}function y(s,l){if(1&s&&(e.ynx(0),e._uU(1),e.BQk()),2&s){const i=e.oxw(2);e.xp6(1),e.Oqu(i.pageHeaderInfo.desc)}}function M(s,l){if(1&s&&(e.TgZ(0,"nz-page-header-content"),e.YNc(1,y,2,1,"ng-container",5),e.qZA()),2&s){const i=e.oxw();e.xp6(1),e.Q6J("nzStringTemplateOutlet",i.pageHeaderInfo.desc)}}function t(s,l){if(1&s&&(e.ynx(0),e._uU(1),e.BQk()),2&s){const i=e.oxw(2);e.xp6(1),e.Oqu(i.pageHeaderInfo.footer)}}function W(s,l){if(1&s&&(e.TgZ(0,"nz-page-header-footer"),e.YNc(1,t,2,1,"ng-container",5),e.qZA()),2&s){const i=e.oxw();e.xp6(1),e.Q6J("nzStringTemplateOutlet",i.pageHeaderInfo.footer)}}let O=(()=>{class s{constructor(i,h){this.themesService=i,this.router=h,this.pageHeaderInfo={},this.backUrl="",this.themesOptions$=this.themesService.getThemesMode()}back(){this.router.navigateByUrl(this.backUrl)}ngOnInit(){}}return s.\u0275fac=function(i){return new(i||s)(e.Y36(C.f),e.Y36(S.F0))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-page-header"]],inputs:{backTpl:"backTpl",pageHeaderInfo:"pageHeaderInfo",backUrl:"backUrl",extraTpl:"extraTpl"},decls:6,vars:7,consts:[[1,"site-page-header",3,"nzTitle","nzBackIcon","nzGhost","nzBack"],["nz-page-header-breadcrumb",""],[4,"ngFor","ngForOf"],[4,"ngIf"],[4,"ngTemplateOutlet"],[4,"nzStringTemplateOutlet"]],template:function(i,h){1&i&&(e.TgZ(0,"nz-page-header",0),e.NdJ("nzBack",function(){return h.back()}),e.TgZ(1,"nz-breadcrumb",1),e.YNc(2,x,3,1,"nz-breadcrumb-item",2),e.qZA(),e.YNc(3,I,2,1,"nz-page-header-extra",3),e.YNc(4,M,2,1,"nz-page-header-content",3),e.YNc(5,W,2,1,"nz-page-header-footer",3),e.qZA()),2&i&&(e.Q6J("nzTitle",h.pageHeaderInfo.title)("nzBackIcon",h.backTpl?h.backTpl:null)("nzGhost",!1),e.xp6(2),e.Q6J("ngForOf",h.pageHeaderInfo.breadcrumb),e.xp6(1),e.Q6J("ngIf",h.extraTpl),e.xp6(1),e.Q6J("ngIf",h.pageHeaderInfo.desc),e.xp6(1),e.Q6J("ngIf",h.pageHeaderInfo.footer))},dependencies:[b.sg,b.O5,b.tP,z.$O,z.u5,z.Jp,z.$,z.A2,k.Dg,k.MO,A.f],styles:[".site-page-header[_ngcontent-%COMP%]{width:100%}.ant-advanced-search-form[_ngcontent-%COMP%]{padding:24px 24px 0;background:#fff;margin:10px auto}[nz-form-label][_ngcontent-%COMP%]{overflow:visible}.save[_ngcontent-%COMP%]{margin-right:10px}"],changeDetection:0}),s})()}}]);