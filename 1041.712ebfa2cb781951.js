"use strict";(self.webpackChunkng_ant_admin=self.webpackChunkng_ant_admin||[]).push([[1041],{11041:(Sn,m,i)=>{i.r(m),i.d(m,{Spch00255Module:()=>zn});var g=i(9116),S=i(22155),x=i(13951),X=i(44556),b=i(22195),v=i(17489),y=i.n(v),M=i(28746),n=i(94650),A=i(91565),z=i(36895),Z=i(99651),D=i(98559),J=i(49651),N=i(50007),F=i(79213),E=i(70629),p=i(24006),Q=i(32802),L=i(5529),O=i(35656),P=i(94178),k=i(21102),_=i(73679),c=i(36704),Y=i(66616),U=i(47044),B=i(21811),f=i(35635),H=i(51971),C=i(48521),I=i(834),G=i(39597);const K=["operationTpl"],W=["nguonxeTpl"],w=["status02Tpl"],R=["endSoplnDate"];function j(a,l){if(1&a){const e=n.EpF();n.TgZ(0,"button",30),n.NdJ("click",function(){n.CHM(e);const o=n.oxw();return n.KtG(o.searchNguonXeClick())}),n._UZ(1,"span",13),n.qZA()}2&a&&n.Q6J("nzType","primary")}function V(a,l){if(1&a&&(n.TgZ(0,"span"),n._uU(1),n.qZA()),2&a){const e=l.nguonxe;n.xp6(1),n.AsE("",e.datacd,"-",e.datanm,"")}}function $(a,l){if(1&a){const e=n.EpF();n.ynx(0),n.TgZ(1,"button",35),n.NdJ("click",function(){n.CHM(e);const o=n.oxw(2).id,s=n.oxw();return n.KtG(s.exportPDF(o))}),n._uU(2,"Xu\u1ea5t PDF"),n.qZA(),n.BQk()}2&a&&(n.xp6(1),n.Q6J("disabled",!0))}function q(a,l){if(1&a){const e=n.EpF();n.TgZ(0,"button",36),n.NdJ("click",function(){n.CHM(e);const o=n.oxw(2).id,s=n.oxw();return n.KtG(s.exportPDF(o))}),n._uU(1,"Xu\u1ea5t PDF"),n.qZA()}}function nn(a,l){if(1&a&&(n.TgZ(0,"span",32),n.YNc(1,$,3,1,"ng-container",33),n.YNc(2,q,2,0,"ng-template",null,34,n.W1O),n.qZA()),2&a){const e=n.MAs(3),t=n.oxw().status02;n.xp6(1),n.Q6J("ngIf",1==t)("ngIfElse",e)}}function tn(a,l){if(1&a){const e=n.EpF();n.ynx(0),n.TgZ(1,"button",35),n.NdJ("click",function(){n.CHM(e);const o=n.oxw(2).id,s=n.oxw();return n.KtG(s.thanhtoan(o))}),n._uU(2,"Th\xe1nh To\xe1n"),n.qZA(),n.BQk()}2&a&&(n.xp6(1),n.Q6J("disabled",!0))}function en(a,l){if(1&a){const e=n.EpF();n.TgZ(0,"button",36),n.NdJ("click",function(){n.CHM(e);const o=n.oxw(2).id,s=n.oxw();return n.KtG(s.thanhtoan(o))}),n._uU(1,"Th\xe1nh To\xe1n"),n.qZA()}}function an(a,l){if(1&a&&(n.TgZ(0,"span",32),n.YNc(1,tn,3,1,"ng-container",33),n.YNc(2,en,2,0,"ng-template",null,34,n.W1O),n.qZA()),2&a){const e=n.MAs(3),t=n.oxw().status02;n.xp6(1),n.Q6J("ngIf",1==t)("ngIfElse",e)}}function on(a,l){if(1&a&&(n.YNc(0,nn,4,2,"span",31),n.YNc(1,an,4,2,"span",31)),2&a){const e=n.oxw();n.Q6J("appAuth",e.ActionCode.Xuatpdfchuyenngoai),n.xp6(1),n.Q6J("appAuth",e.ActionCode.Thanhtoanchuyenngoai)}}function sn(a,l){1&a&&(n.ynx(0),n.TgZ(1,"span"),n._uU(2,"Ch\u01b0a thanh to\xe1n"),n.qZA(),n.BQk())}function ln(a,l){1&a&&(n.TgZ(0,"span"),n._uU(1,"\u0110\xe3 thanh to\xe1n"),n.qZA())}function pn(a,l){if(1&a&&(n.YNc(0,sn,3,0,"ng-container",33),n.YNc(1,ln,2,0,"ng-template",null,39,n.W1O)),2&a){const e=n.MAs(2),t=n.oxw().status02;n.Q6J("ngIf",0==t)("ngIfElse",e)}}function rn(a,l){if(1&a&&(n._UZ(0,"nz-alert",37),n.YNc(1,pn,3,2,"ng-template",null,38,n.W1O)),2&a){const e=n.MAs(2);n.Q6J("nzMessage",e)}}function cn(a,l){}const hn=function(){return{"padding-bottom":0}},T=function(){return{xs:8,sm:16,md:24}},gn=[{path:"",component:(()=>{class a extends x.H{constructor(e,t,o,s,h,d,_n,fn,Cn,Tn){super(e,t,o,s,h),this.webService=e,this.router=t,this.cdf=o,this.datePipe=s,this.tabService=h,this.dataService=d,this.message=_n,this.modalSrv=fn,this.pdfService=Cn,this.modalNguonXeService=Tn,this.DisplayScreenID=S.t.spch00255,this.searchParam={},this.dateFormat=X.dateFormat,this.dataList=[],this.checkedCashArray=[],this.ActionCode=b.h,this.availableOptions=[],this.pageHeaderInfo={title:"Thanh to\xe1n chuy\u1ebfn ngo\xe0i",breadcrumb:["Home","Chuy\u1ebfn","Thanh to\xe1n chuy\u1ebfn ngo\xe0i"],desc:""},this.nguonxenm="",this.stocknx="",this.ngaybatdau=null,this.ngayketthuc=null,this.disabledStartSoplnDate=r=>{if(!r||!this.ngayketthuc)return!1;const u=new Date(this.ngayketthuc);return r.getTime()>u.getTime()},this.disabledEndSoplnDate=r=>{if(!r||!this.ngaybatdau)return!1;const u=new Date(this.ngaybatdau);return r.getTime()<=u.getTime()}}fnInit(){}destroy(){}handleStartOpenSoplnChange(e){e||this.endSoplnDate.open()}handleEndOpenSoplnChange(e){}ngOnInit(){this.searchParam.status02="0",this.initTable()}getDataList(e){this.tableLoading(!0),this.searchParam.ngaybatdau=this.formatDate(this.ngaybatdau),this.searchParam.ngayketthuc=this.formatDate(this.ngayketthuc),this.searchParam.status02=y().toNumber(this.searchParam.status02),this.dataService.postAll({pageSize:this.tableConfig.pageSize,pageNum:e?.pageIndex||this.tableConfig.pageIndex,filters:this.searchParam}).pipe((0,M.x)(()=>{this.tableLoading(!1)})).subscribe(o=>{const{list:s,total:h,pageNum:d}=o;this.dataList=[...s],0==this.dataList.length&&this.message.info("Kh\xf4ng C\xf3 d\u1eef li\u1ec7u"),this.tableConfig.total=h,this.tableConfig.pageIndex=d,this.tableLoading(!1),this.checkedCashArray=[...this.checkedCashArray],this.searchParam.status02=this.searchParam.status02+""})}reloadTable(){this.message.info("\u0110\xe3 \u0111\u01b0\u1ee3c l\xe0m m\u1edbi"),this.getDataList()}tableChangeDectction(){this.dataList=[...this.dataList],this.cdf.detectChanges()}tableLoading(e){this.tableConfig.loading=e,this.tableChangeDectction()}selectedChecked(e){this.checkedCashArray=[...e]}changePageSize(e){this.tableConfig.pageSize=e}resetForm(){this.searchParam={},this.searchParam.status02=0,this.nguonxenm="",this.getDataList()}searchNguonXeClick(){this.modalNguonXeService.show({nzTitle:"Danh S\xe1ch Ngu\u1ed3n Xe"},{showcomfirm:!1}).subscribe(e=>{if(!e||0===e.status)return;const t={...e.modalValue};this.searchParam.nguonxe=t.id,this.stocknx=t.id,this.nguonxenm=t.datacd,this.getDataList()})}fnFocusOutNguonxe(){this.searchParam.nguonxe!=this.stocknx&&(this.nguonxenm="")}exportPDF(e){this.dataService.postDetail({id:e}).pipe().subscribe(t=>{t?this.pdfService.exportPDF(t.header,t.lstheader,t.lstdata,t.title,this.getDate(),"BVC k\xfd x\xe1c nh\u1eadn","BTT k\xfd x\xe1c nh\u1eadn"):this.modalSrv.error({nzTitle:"L\u1ed7i h\u1ec7 th\u1ed1ng ! vui long li\xean h\u1ec7 b\u1ed9 ph\u1eadn k\u1ef7 thu\u1eadt"})})}thanhtoan(e){this.modalSrv.confirm({nzTitle:"B\u1ea1n ch\u1eafc ch\u1eafn mu\u1ed1n th\xe1nh to\xe1n \u0111\u01a1n n\xe0y kh\xf4ng ?",nzContent:"Nh\u1ea5n OK \u0111\u1ec3 ti\u1ebfp t\u1ee5c !",nzOnOk:()=>{this.dataService.postUpdateStatus({id:e}).pipe().subscribe(t=>{1==t?(this.getDataList(),this.message.success("Thanh to\xe1n th\xe0nh c\xf4ng")):this.message.error("L\u1ed7i h\u1ec7 th\u1ed1ng. Vui l\xf2ng li\xean h\u1ec7 k\u1ef7 thu\u1eadt")})}})}initTable(){this.tableConfig={showCheckbox:!1,headers:[{title:"Ng\xe0y Xu\u1ea5t",field:"ngayxuat",width:200,pipe:"date: dd/MM/YYYY HH:mm"},{title:"Ngu\u1ed3n xe",width:300,field:"nguonxe",tdTemplate:this.nguonxeTpl},{title:"Tr\u1ea1ng thai",width:200,field:"status02",tdTemplate:this.status02Tpl},{title:"S\u1ed1 l\u1ea7n xu\u1ea5t PDF",width:200,field:"status01"},{title:"Ghi ch\xfa",width:150,field:"ghichu"},{title:"H\xe0nh \u0111\u1ed9ng",tdTemplate:this.operationTpl,width:300,fixed:!0,fixedDir:"right"}],total:0,loading:!0,pageSize:10,pageIndex:1}}}return a.\u0275fac=function(e){return new(e||a)(n.Y36(A.Q),n.Y36(g.F0),n.Y36(n.sBO),n.Y36(z.uU),n.Y36(Z.p),n.Y36(D.I),n.Y36(J.dD),n.Y36(N.Sf),n.Y36(F.j),n.Y36(E.q))},a.\u0275cmp=n.Xpm({type:a,selectors:[["app-spch00255"]],viewQuery:function(e,t){if(1&e&&(n.Gf(K,7),n.Gf(W,7),n.Gf(w,7),n.Gf(R,5)),2&e){let o;n.iGM(o=n.CRH())&&(t.operationTpl=o.first),n.iGM(o=n.CRH())&&(t.nguonxeTpl=o.first),n.iGM(o=n.CRH())&&(t.status02Tpl=o.first),n.iGM(o=n.CRH())&&(t.endSoplnDate=o.first)}},features:[n.qOj],decls:59,vars:104,consts:[[3,"pageHeaderInfo"],[1,"normal-table-wrap"],["nzHoverable","",1,"m-b-10",3,"nzBodyStyle"],["nz-form",""],["nz-row","",3,"nzGutter"],["nz-col","",3,"nzXXl","nzXl","nzLg","nzMd","nzSm","nzXs"],[3,"nzXXl","nzXl","nzLg","nzMd","nzSm","nzXs","nzFor"],[3,"nzXXl","nzXl","nzLg","nzMd","nzSm","nzXs"],["name","ngaybatdau",3,"nzDisabledDate","nzFormat","ngModel","nzPlaceHolder","ngModelChange","nzOnOpenChange"],["name","ngayketthuc",3,"nzDisabledDate","nzFormat","ngModel","nzPlaceHolder","ngModelChange","nzOnOpenChange"],["endSoplnDate",""],["nz-col","",1,"text-right","p-0","m-b-10",3,"nzXXl","nzXl","nzLg","nzMd","nzSm","nzXs"],["nz-button","",3,"nzType","click"],["nz-icon","","nzType","search"],["nz-button","",1,"m-l-15",3,"click"],["nz-icon","","nzType","close-circle","nzTheme","outline"],["nz-col","",1,"inputIcon",3,"nzXXl","nzXl","nzLg","nzMd","nzSm","nzXs"],["nzSearch","",3,"nzAddOnAfter"],["name","idtai","type","text","nz-input","","placeholder","",3,"ngModel","ngModelChange","blur"],["suffixIconButtonTaixe",""],["nzFor","",1,"fix-inputIcon",3,"nzNoColon"],["id","status02","name","status02",3,"ngModel","ngModelChange"],["nz-radio","","nzValue","0"],["nz-radio","","nzValue","1"],[3,"tableTitle","btnTpl","reload"],[3,"checkedCashArrayFromComment","tableConfig","tableData","selectedChange","changePageSize","changePageNum"],["nguonxeTpl",""],["operationTpl",""],["status02Tpl",""],["tableBtns",""],["nz-button","",1,"bg-icon",3,"nzType","click"],["class","operate-text",4,"appAuth"],[1,"operate-text"],[4,"ngIf","ngIfElse"],["Cth",""],["nz-button","","nzType","primary","nzGhost","",3,"disabled","click"],["nz-button","","nzType","primary","nzGhost","",3,"click"],["nzType","warning",3,"nzMessage"],["Status02",""],["Dathanhtoan",""]],template:function(e,t){if(1&e&&(n._UZ(0,"app-page-header",0),n.TgZ(1,"div",1)(2,"nz-card",2)(3,"form",3)(4,"div",4)(5,"div",5)(6,"nz-form-item")(7,"nz-form-label",6),n._uU(8,"Ng\xe0y b\u1eaft \u0111\u1ea7u"),n.qZA(),n.TgZ(9,"nz-form-control",7)(10,"nz-date-picker",8),n.NdJ("ngModelChange",function(s){return t.ngaybatdau=s})("nzOnOpenChange",function(s){return t.handleStartOpenSoplnChange(s)}),n.qZA()()()(),n.TgZ(11,"div",5)(12,"nz-form-item")(13,"nz-form-label",6),n._uU(14,"Ng\xe0y k\u1ebft th\xfac"),n.qZA(),n.TgZ(15,"nz-form-control",7)(16,"nz-date-picker",9,10),n.NdJ("ngModelChange",function(s){return t.ngayketthuc=s})("nzOnOpenChange",function(s){return t.handleEndOpenSoplnChange(s)}),n.qZA()()()(),n.TgZ(18,"div",11)(19,"button",12),n.NdJ("click",function(){return t.getDataList()}),n._UZ(20,"i",13),n._uU(21," T\xecm ki\u1ebfm "),n.qZA(),n.TgZ(22,"button",14),n.NdJ("click",function(){return t.resetForm()}),n._UZ(23,"i",15),n._uU(24," L\xe0m m\u1edbi "),n.qZA()()(),n.TgZ(25,"div",4)(26,"div",16)(27,"nz-form-item")(28,"nz-form-label",7),n._uU(29,"Ngu\u1ed3n xe"),n.qZA(),n.TgZ(30,"nz-form-control",7)(31,"nz-input-group",17)(32,"input",18),n.NdJ("ngModelChange",function(s){return t.searchParam.nguonxe=s})("blur",function(){return t.fnFocusOutNguonxe()}),n.qZA()(),n.YNc(33,j,2,1,"ng-template",null,19,n.W1O),n.TgZ(35,"nz-form-label",20)(36,"span")(37,"u"),n._uU(38),n.qZA()()()()()(),n.TgZ(39,"div",5)(40,"nz-form-item")(41,"nz-form-label",7),n._uU(42,"Tr\u1ea1ng th\xe1i"),n.qZA(),n.TgZ(43,"nz-form-control",7)(44,"nz-radio-group",21),n.NdJ("ngModelChange",function(s){return t.searchParam.status02=s}),n.TgZ(45,"label",22),n._uU(46," Ch\u01b0a thanh to\xe1n "),n.qZA(),n.TgZ(47,"label",23),n._uU(48," \u0110\xe3 thanh to\xe1n"),n.qZA()()()()()()()(),n.TgZ(49,"app-card-table-wrap",24),n.NdJ("reload",function(){return t.reloadTable()}),n.TgZ(50,"app-ant-table",25),n.NdJ("selectedChange",function(s){return t.selectedChecked(s)})("changePageSize",function(s){return t.changePageSize(s)})("changePageNum",function(s){return t.getDataList(s)}),n.qZA(),n.YNc(51,V,2,2,"ng-template",null,26,n.W1O),n.YNc(53,on,2,2,"ng-template",null,27,n.W1O),n.YNc(55,rn,3,1,"ng-template",null,28,n.W1O),n.qZA(),n.YNc(57,cn,0,0,"ng-template",null,29,n.W1O),n.qZA()),2&e){const o=n.MAs(34),s=n.MAs(58);n.Q6J("pageHeaderInfo",t.pageHeaderInfo),n.xp6(2),n.Q6J("nzBodyStyle",n.DdM(101,hn)),n.xp6(2),n.Q6J("nzGutter",n.DdM(102,T)),n.xp6(1),n.Q6J("nzXXl",8)("nzXl",8)("nzLg",8)("nzMd",12)("nzSm",24)("nzXs",24),n.xp6(2),n.Q6J("nzXXl",9)("nzXl",9)("nzLg",9)("nzMd",12)("nzSm",24)("nzXs",24),n.xp6(2),n.Q6J("nzXXl",12)("nzXl",12)("nzLg",12)("nzMd",12)("nzSm",24)("nzXs",24),n.xp6(1),n.Q6J("nzDisabledDate",t.disabledStartSoplnDate)("nzFormat",t.dateFormat)("ngModel",t.ngaybatdau)("nzPlaceHolder",t.dateFormat),n.xp6(1),n.Q6J("nzXXl",8)("nzXl",8)("nzLg",8)("nzMd",12)("nzSm",24)("nzXs",24),n.xp6(2),n.Q6J("nzXXl",9)("nzXl",9)("nzLg",9)("nzMd",12)("nzSm",24)("nzXs",24),n.xp6(2),n.Q6J("nzXXl",12)("nzXl",12)("nzLg",12)("nzMd",12)("nzSm",24)("nzXs",24),n.xp6(1),n.Q6J("nzDisabledDate",t.disabledEndSoplnDate)("nzFormat",t.dateFormat)("ngModel",t.ngayketthuc)("nzPlaceHolder",t.dateFormat),n.xp6(2),n.Q6J("nzXXl",8)("nzXl",8)("nzLg",8)("nzMd",12)("nzSm",24)("nzXs",24),n.xp6(1),n.Q6J("nzType","primary"),n.xp6(6),n.Q6J("nzGutter",n.DdM(103,T)),n.xp6(1),n.Q6J("nzXXl",8)("nzXl",8)("nzLg",8)("nzMd",12)("nzSm",24)("nzXs",24),n.xp6(2),n.Q6J("nzXXl",9)("nzXl",9)("nzLg",9)("nzMd",12)("nzSm",24)("nzXs",24),n.xp6(2),n.Q6J("nzXXl",10)("nzXl",10)("nzLg",10)("nzMd",10)("nzSm",20)("nzXs",24),n.xp6(1),n.Q6J("nzAddOnAfter",o),n.xp6(1),n.Q6J("ngModel",t.searchParam.nguonxe),n.xp6(3),n.Q6J("nzNoColon",!0),n.xp6(3),n.Oqu(t.nguonxenm),n.xp6(1),n.Q6J("nzXXl",8)("nzXl",8)("nzLg",8)("nzMd",12)("nzSm",24)("nzXs",24),n.xp6(2),n.Q6J("nzXXl",9)("nzXl",9)("nzLg",9)("nzMd",12)("nzSm",24)("nzXs",24),n.xp6(2),n.Q6J("nzXXl",15)("nzXl",15)("nzLg",15)("nzMd",15)("nzSm",24)("nzXs",24),n.xp6(1),n.Q6J("ngModel",t.searchParam.status02),n.xp6(5),n.Q6J("tableTitle","K\u1ebft qu\u1ea3 t\xecm ki\u1ebfm")("btnTpl",s),n.xp6(1),n.Q6J("checkedCashArrayFromComment",t.checkedCashArray)("tableConfig",t.tableConfig)("tableData",t.dataList)}},dependencies:[z.O5,p._Y,p.Fj,p.JJ,p.JL,p.On,p.F,Q.q,L.q,O.x,P.p,k.Ls,_.t3,_.SK,c.Lr,c.Nx,c.iK,c.Fd,Y.ix,U.w,B.dQ,f.Zp,f.gB,H.bd,C.Of,C.Dg,I.uw,G.r]}),a})(),data:{title:"Thanh to\xe1n xe ngo\xe0i",key:"spch00255"}}];let dn=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=n.oAB({type:a}),a.\u0275inj=n.cJS({imports:[g.Bz.forChild(gn),g.Bz]}),a})();var un=i(5316),mn=i(79962);let zn=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=n.oAB({type:a}),a.\u0275inj=n.cJS({imports:[un.m,dn,mn.a]}),a})()}}]);