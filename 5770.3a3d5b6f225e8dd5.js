"use strict";(self.webpackChunkng_ant_admin=self.webpackChunkng_ant_admin||[]).push([[5770],{85216:(E,_,i)=>{i.d(_,{m:()=>T});var l=i(94650);let T=(()=>{class f{constructor(){this.formRules={nonEmpty:"^[a-zA-Z0-9]+([_ -]?[a-zA-Z0-9])*$",usernameMin:6,passwordMin:6,passwordPattern:"^[a-zA-Z0-9]{6,20}$"},this.formErrors={name:"",email:"",password:"",confirmPassword:"",accept:!1},this.errorMessages={name:{required:"Name kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng",minLength:`Name t\u1ed1i thi\u1ec3u ${this.formRules.usernameMin} k\xfd t\u1ef1`,pattern:"Must contain letters and/or numbers, no trailing spaces",namedb:"T\xean T\xe0i Kho\u1ea3n \u0111\xe3 t\u1ed3n t\u1ea1i."},text:{required:"Kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng."},email:{required:"Kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng.",email:"\u0110\u1ecba ch\u1ec9 Email kh\xf4ng \u0111\xfang.",emaildb:"Email \u0111\xe3 t\u1ed3n t\u1ea1i."},password:{required:"Password kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng",pattern:"Password l\xe0 k\xfd t\u1ef1 \u0111\u1eb7c bi\u1ec7t, s\u1ed1, ch\u1eef hoa v\xe0 ch\u1eef th\u01b0\u1eddng",minLength:`Password t\u1ed1i thi\u1ec3u ${this.formRules.passwordMin} k\xfd t\u1ef1`},confirmPassword:{required:"Password confirmation is required",passwordMismatch:"Passwords must match"},accept:{requiredTrue:"You have to accept our Terms and Conditions"}}}}return f.\u0275fac=function(C){return new(C||f)},f.\u0275prov=l.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()},50308:(E,_,i)=>{i.d(_,{v:()=>k});var l=i(44556),T=i(94650),f=i(54246);let k=(()=>{class C{constructor(u){this.http=u}requestInit(u){return this.http.post(l.CommonAnt100RequestInt,u,{needSuccessInfo:!1})}listtaichinh(u){return this.http.post(l.CommonAnt100Listtaichinh,u,{needSuccessInfo:!1})}thongketaichinhnam(u){return this.http.post(l.CommonAnt100Thongketaichinhnam,u,{needSuccessInfo:!1})}tongchuyenhangtrongnam(u){return this.http.post(l.CommonAnt100Tongchuyenhangtrongnam,u,{needSuccessInfo:!1})}tongnoAll(u){return this.http.post(l.CommonAnt100Tongnoall,u,{needSuccessInfo:!1})}tongnoUser(u){return this.http.post(l.CommonAnt100Tongnouser,u,{needSuccessInfo:!1})}listtopdoanhthu(u){return this.http.post(l.CommonAnt100Listtopdoanhthu,u,{needSuccessInfo:!1})}listtopchiphi(u){return this.http.post(l.CommonAnt100Listtopchiphi,u,{needSuccessInfo:!1})}listtoptongcuoctungxe(u){return this.http.post(l.CommonAnt100Listtoptongcuoctungxe,u,{needSuccessInfo:!1})}Tinhtongnoxengoai(){return this.http.post(l.CommonAnt100Tongnoxengoai,{needSuccessInfo:!1})}getODN(){return this.http.post(l.CommonAnt100GetODN,{needSuccessInfo:!1})}getODT(){return this.http.post(l.CommonAnt100GetODT,{needSuccessInfo:!1})}getSoHDTTCNKH(){return this.http.post(l.CommonAnt100GetSoHDTTCNKH,{needSuccessInfo:!1})}getHDTTXN(){return this.http.post(l.CommonAnt100GetHDTTXN,{needSuccessInfo:!1})}getListSoID(u){return this.http.post(l.CommonAnt100GetListSoID,u,{needSuccessInfo:!1})}getListDichvuxecau(){return this.http.post(l.CommonAnt100GetListDichvuXeCau,{needSuccessInfo:!1})}getListDichvubocxep(){return this.http.post(l.CommonAnt100GetListDichvuBocXep,{needSuccessInfo:!1})}}return C.\u0275fac=function(u){return new(u||C)(T.LFG(f.q))},C.\u0275prov=T.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})()},67859:(E,_,i)=>{i.d(_,{S:()=>D});var l=i(94650),Z=i(91565);let I=(()=>{class s{constructor(p){this.webService=p}mobileRule(p){return p?function A(s){return/^(0|\+?84|17951)?(13[0-9]|15[0-9]|17[0678]|18[0-9]|14[57])[0-9]{8}$/.test(s)}(p)?null:{message:"Vui l\xf2ng nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i ch\xednh x\xe1c"}:null}telPhoneRule(p){return p?function u(s){return/^(0\d{2,3}-?)?\d{7,8}$/.test(s)}(p)?null:{message:"Vui l\xf2ng nh\u1eadp zalo ch\xednh x\xe1c"}:null}emailRule(p){return p?function z(s){return/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/.test(s)}(p)?null:{message:"Vui l\xf2ng nh\u1eadp emali ch\xednh x\xe1c"}:null}passwordRule(p){return p?function n(s){return/^[^\s]{6,20}$/.test(s)&&!/^\d+$/.test(s)}(p)?null:{message:"M\u1eadt kh\u1ea9u bao g\u1ed3m 6 \u0111\u1ebfn 20 ch\u1eef c\xe1i vi\u1ebft hoa v\xe0 vi\u1ebft th\u01b0\u1eddng, s\u1ed1 ho\u1eb7c c\xe1c k\xfd t\u1ef1 kh\xe1c"}:null}}return s.\u0275fac=function(p){return new(p||s)(l.LFG(Z.Q))},s.\u0275prov=l.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),D=(()=>{class s{constructor(p){this.vrService=p}emailValidator(){return this.commonUtil(this.vrService.emailRule)}mobileValidator(){return this.commonUtil(this.vrService.telPhoneRule)}passwordValidator(){return this.commonUtil(this.vrService.passwordRule)}zaloValidator(){return this.commonUtil(this.vrService.telPhoneRule)}commonUtil(p){return J=>p(J.value)}}return s.\u0275fac=function(p){return new(p||s)(l.LFG(I))},s.\u0275prov=l.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})()},56662:(E,_,i)=>{i.r(_),i.d(_,{Spkh00201Module:()=>Yn});var l=i(36895),T=i(9116),f=i(15861),k=i(22155),C=i(22195),A=i(13951),u=i(28746),z=i(44556),n=i(94650),w=i(91565),Z=i(35568),I=i(49651),D=i(50007),s=i(60976),v=i(54246);let p=(()=>{class e{constructor(t){this.http=t}getlists(t){return this.http.post(z.Spkh00201Ant100GetAll,t,{needSuccessInfo:!1})}xuatpdf(t){return this.http.post(z.Spkh00201Ant100XuatPdf,t,{needSuccessInfo:!1})}thanhtoanhoadon(t){return this.http.post(z.Spkh00201Ant100Thanhtoan,{sohdttcnkh:t},{needSuccessInfo:!1})}huythanhtoan(t){return this.http.post(z.Spkh00201Ant100Huythanhtoan,{sohdttcnkh:t},{needSuccessInfo:!1})}phathanhlai(t){return this.http.post(z.Spkh00201Ant100Phathanhlai,{sohdttcnkh:t},{needSuccessInfo:!1})}huyphathanh(t){return this.http.post(z.Spkh00201Ant100Huyphathanh,{sohdttcnkh:t},{needSuccessInfo:!1})}}return e.\u0275fac=function(t){return new(t||e)(n.LFG(v.q))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var J=i(57087),G=i(99651),B=i(79213),R=i(50308),d=i(24006),Q=i(49523),b=i(39646),V=i(67859),O=i(85726),y=i(73679),S=i(36704),x=i(35635);const K=function(){return{minRows:2,maxRows:6}};let W=(()=>{class e{constructor(t,o,a,r){this.modalRef=t,this.fb=o,this.cdf=a,this.validatorsService=r,this.tiencuocMode=0}getAsyncFnData(t){return(0,b.of)(t)}getCurrentValue(){return(0,Q.r7)(this.addEditForm)?(this.addEditForm.value.tiencuoc=this.tiencuocMode,(0,b.of)(this.addEditForm.value)):(0,b.of)(!1)}ngOnInit(){this.initForm(),Object.keys(this.params).length>0&&(this.tiencuocMode=this.params.tiencuoc)}initForm(){this.addEditForm=this.fb.group({lydo:[null,[d.kI.required]]})}changeTiencuoc(t){this.tiencuocMode=t}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(D.Lf),n.Y36(d.qu),n.Y36(n.sBO),n.Y36(V.S))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-spch00201subupdate-tiencuocxenha"]],decls:11,vars:12,consts:[["nz-form","",3,"formGroup"],["nzRequired","","nzFor","tiencuoc",3,"nzSm","nzXs"],["nzErrorTip","Vui l\xf2ng nh\u1eadp ...",3,"nzSm","nzXs"],[3,"Amount","changeAmount"],["nzRequired","","nzFor","lydo",3,"nzSm","nzXs"],["nzErrorTip","Vui l\xf2ng nh\u1eadp l\xfd do...",3,"nzSm","nzXs"],["nz-input","","name","lydo","id","lydo","formControlName","lydo","placeholder","N\xeau l\xfd do thay \u0111\u1ed5i ti\u1ec1n c\u01b0\u1edbc.",3,"nzAutosize"]],template:function(t,o){1&t&&(n.TgZ(0,"form",0)(1,"nz-form-item")(2,"nz-form-label",1),n._uU(3,"Ti\u1ec1n c\u01b0\u1edbc"),n.qZA(),n.TgZ(4,"nz-form-control",2)(5,"app-input-currency",3),n.NdJ("changeAmount",function(r){return o.changeTiencuoc(r)}),n.qZA()()(),n.TgZ(6,"nz-form-item")(7,"nz-form-label",4),n._uU(8,"L\xfd do"),n.qZA(),n.TgZ(9,"nz-form-control",5),n._UZ(10,"textarea",6),n.qZA()()()),2&t&&(n.Q6J("formGroup",o.addEditForm),n.xp6(2),n.Q6J("nzSm",6)("nzXs",24),n.xp6(2),n.Q6J("nzSm",18)("nzXs",24),n.xp6(1),n.Q6J("Amount",o.tiencuocMode),n.xp6(2),n.Q6J("nzSm",6)("nzXs",24),n.xp6(2),n.Q6J("nzSm",18)("nzXs",24),n.xp6(1),n.Q6J("nzAutosize",n.DdM(11,K)))},dependencies:[d._Y,d.Fj,d.JJ,d.JL,d.sg,d.u,O.e,y.t3,y.SK,S.Lr,S.Nx,S.iK,S.Fd,x.Zp,x.rh]}),e})();var H=i(69174);let $=(()=>{class e{constructor(t){this.modalWrapService=t}getContentComponent(){return W}show(t={},o){return this.modalWrapService.show(this.getContentComponent(),t,o)}}return e.\u0275fac=function(t){return new(t||e)(n.LFG(H.U))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),q=(()=>{class e{constructor(t){this.http=t}updateTiencuocSoID(t){return this.http.post(z.Spch00201Ant100UpdateTiencuocSoID,t,{needSuccessInfo:!1})}}return e.\u0275fac=function(t){return new(t||e)(n.LFG(v.q))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var j=i(94267),P=i(48521);function nn(e,h){if(1&e&&(n.ynx(0),n._uU(1),n.BQk()),2&e){const t=n.oxw().$implicit;n.xp6(1),n.Oqu(t.errors.message)}}function tn(e,h){1&e&&(n.ynx(0),n._uU(1,"Ph\u1ea7n b\u1eaft bu\u1ed9c"),n.BQk())}function en(e,h){if(1&e&&(n.YNc(0,nn,2,1,"ng-container",8),n.YNc(1,tn,2,0,"ng-container",8)),2&e){const t=h.$implicit;n.Q6J("ngIf",t.hasError("message")),n.xp6(1),n.Q6J("ngIf",t.hasError("required"))}}let on=(()=>{class e{constructor(t,o){this.modalRef=t,this.fb=o}getAsyncFnData(t){return(0,b.of)(t)}getCurrentValue(){return(0,Q.r7)(this.checkoutForm)?(0,b.of)(this.checkoutForm.value):(0,b.of)(!1)}ngOnInit(){this.initForm()}changeType(t){}initForm(){this.checkoutForm=this.fb.group({sohdttcnkh:[null,[d.kI.required]],type:["A",[d.kI.required]]})}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(D.Lf),n.Y36(d.qu))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-spkh00201subthanhtoan"]],decls:21,vars:15,consts:[["nz-form","",3,"formGroup"],["nzRequired","","nzFor","sohdttcnkh",3,"nzSm","nzXs"],[3,"nzSm","nzXs","nzErrorTip"],["nz-input","","formControlName","sohdttcnkh","id","sohdttcnkh","placeholder","S\u1ed1 h\xf3a \u0111\u01a1n"],["nzRequired","","nzFor","type",3,"nzSm","nzXs"],["formControlName","type",3,"ngModelChange"],["nz-radio","",3,"nzValue"],["combineTpl",""],[4,"ngIf"]],template:function(t,o){if(1&t&&(n.TgZ(0,"form",0)(1,"nz-form-item")(2,"nz-form-label",1),n._uU(3,"S\u1ed1 h\xf3a \u0111\u01a1n"),n.qZA(),n.TgZ(4,"nz-form-control",2),n._UZ(5,"input",3),n.qZA()(),n.TgZ(6,"nz-form-item")(7,"nz-form-label",4),n._uU(8,"Lo\u1ea1i h\xecnh"),n.qZA(),n.TgZ(9,"nz-form-control",2)(10,"nz-radio-group",5),n.NdJ("ngModelChange",function(r){return o.changeType(r)}),n.TgZ(11,"label",6),n._uU(12,"Thanh to\xe1n"),n.qZA(),n.TgZ(13,"label",6),n._uU(14,"H\u1ee7y thanh to\xe1n"),n.qZA(),n.TgZ(15,"label",6),n._uU(16,"Ph\xe1t h\xe0nh l\u1ea1i"),n.qZA(),n.TgZ(17,"label",6),n._uU(18,"H\u1ee7y ph\xe1t h\xe0nh"),n.qZA()()()()(),n.YNc(19,en,2,2,"ng-template",null,7,n.W1O)),2&t){const a=n.MAs(20);n.Q6J("formGroup",o.checkoutForm),n.xp6(2),n.Q6J("nzSm",6)("nzXs",24),n.xp6(2),n.Q6J("nzSm",14)("nzXs",24)("nzErrorTip",a),n.xp6(3),n.Q6J("nzSm",6)("nzXs",24),n.xp6(2),n.Q6J("nzSm",14)("nzXs",24)("nzErrorTip",a),n.xp6(2),n.Q6J("nzValue","A"),n.xp6(2),n.Q6J("nzValue","B"),n.xp6(2),n.Q6J("nzValue","C"),n.xp6(2),n.Q6J("nzValue","D")}},dependencies:[l.O5,d._Y,d.Fj,d.JJ,d.JL,d.sg,d.u,y.t3,y.SK,S.Lr,S.Nx,S.iK,S.Fd,x.Zp,P.Of,P.Dg]}),e})(),an=(()=>{class e{constructor(t){this.modalWrapService=t}getContentComponent(){return on}show(t={},o){return this.modalWrapService.show(this.getContentComponent(),t,o)}}return e.\u0275fac=function(t){return new(t||e)(n.LFG(H.U))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var hn=i(32802),rn=i(5529),sn=i(35656),cn=i(94178),ln=i(21102),un=i(66616),pn=i(47044),dn=i(21811),mn=i(51971),gn=i(834),fn=i(39597);const zn=["operationTpl"],Sn=["tenhangTpl"],Tn=["tiencuocTpl"],Cn=["soluongTpl"],_n=["donvitinhTpl"],vn=["trangthaiTpl"],kn=["nguonxeTpl"],bn=["khachhangTpl"],yn=["endSoplnDate"];function An(e,h){if(1&e){const t=n.EpF();n.TgZ(0,"button",32),n.NdJ("click",function(){n.CHM(t);const a=n.oxw();return n.KtG(a.showVideo())}),n._UZ(1,"span",33),n._uU(2,"H\u01b0\u1edbng d\u1eabn "),n.qZA()}2&e&&n.Q6J("nzSize","large")}function Dn(e,h){1&e&&(n._UZ(0,"span",34),n._uU(1," Quay l\u1ea1i"))}function xn(e,h){if(1&e){const t=n.EpF();n.TgZ(0,"button",35),n.NdJ("click",function(){n.CHM(t);const a=n.oxw();return n.KtG(a.searchKhachhangClick())}),n._UZ(1,"span",18),n.qZA()}2&e&&n.Q6J("nzType","primary")}function Mn(e,h){if(1&e){const t=n.EpF();n.TgZ(0,"span",37)(1,"button",38),n.NdJ("click",function(){n.CHM(t);const a=n.oxw(),r=a.soID,m=a.tiencuoc,c=n.oxw();return n.KtG(c.capnhat(r,m))}),n._uU(2,"C\u1eadp nh\u1eadt"),n.qZA()()}}function Xn(e,h){if(1&e&&n.YNc(0,Mn,3,0,"span",36),2&e){const t=n.oxw();n.Q6J("appAuth",t.ActionCode.CtcnCapnhat)}}function Fn(e,h){1&e&&n._UZ(0,"nz-alert",39),2&e&&n.s9C("nzMessage",h.iduser.name)}function En(e,h){if(1&e&&(n.TgZ(0,"span"),n._uU(1),n.ALo(2,"currency"),n.qZA()),2&e){const t=h.tiencuoc;n.xp6(1),n.Oqu(n.xi3(2,1,1e3*t,"VND"))}}function Zn(e,h){if(1&e){const t=n.EpF();n.TgZ(0,"button",41),n.NdJ("click",function(){n.CHM(t);const a=n.oxw(2);return n.KtG(a.thanhtoan())}),n._UZ(1,"i",42),n._uU(2,"Thanh to\xe1n "),n.qZA()}if(2&e){const t=n.oxw(2);n.Q6J("disabled",t.btnthanhtoanmotphan)}}function In(e,h){if(1&e&&n.YNc(0,Zn,3,1,"button",40),2&e){const t=n.oxw();n.Q6J("appAuth",t.ActionCode.CtcnThantoanmotphan)}}function Jn(e,h){if(1&e){const t=n.EpF();n.TgZ(0,"span",37)(1,"button",44),n.NdJ("click",function(){n.CHM(t);const a=n.oxw(3);return n.KtG(a.xuatpdf())}),n._UZ(2,"i",45),n._uU(3,"Ph\xe1t h\xe0nh h\xf3a \u0111\u01a1n "),n.qZA()()}}function Ln(e,h){if(1&e&&(n.ynx(0),n.YNc(1,Jn,4,0,"span",36),n.BQk()),2&e){const t=n.oxw(2);n.xp6(1),n.Q6J("appAuth",t.ActionCode.CtcnXuatPDF)}}function Nn(e,h){if(1&e&&n.YNc(0,Ln,2,1,"ng-container",43),2&e){const t=n.oxw();n.Q6J("ngIf",t.showConfirm)}}const wn=function(){return{"padding-bottom":0}},U=function(){return{xs:8,sm:16,md:24}},Qn=[{path:"",component:(()=>{class e extends A.H{constructor(t,o,a,r,m,c,g,M,X,Gn,Y,Bn,Rn,Vn,Kn,Wn,$n){super(t,o,a,r,Y,m),this.webService=t,this.router=o,this.cdf=a,this.datePipe=r,this.modalVideoyoutube=m,this.message=c,this.modalSrv=g,this.khdtoService=M,this.dataService=X,this.khachhangService=Gn,this.tabService=Y,this.pdfService=Bn,this.commonService=Rn,this.modalspch00201xenhaService=Vn,this.spch00201Service=Kn,this.spin00251subkhachhangService=Wn,this.spkh00201subthanhtoanService=$n,this.searchParam={},this.dateFormat=z.dateFormat,this.dataList=[],this.checkedCashArray=[],this.ActionCode=C.h,this.DisplayScreenID=k.t.spkh00201,this.availableOptions=[],this.pageHeaderInfo={title:"Thanh to\xe1n c\xf4ng n\u1ee3",breadcrumb:["Home","Kh\xe1ch H\xe0ng","Thanh to\xe1n c\xf4ng n\u1ee3"]},this.btnUpdate=!1,this.btnshowmodalkh=!1,this.btntattoan=!1,this.btnthanhtoanmotphan=!1,this.btnsearch=!1,this.idkhachhang="",this.tenkhachhang="",this.stocktenkhachhang="",this.sdtkhachhang="",this.diachikhachhang="",this.sotienno=0,this.soodc="",this.status="0",this.phanloai="N\u1ee3",this.disabledStartSoplnDate=F=>{if(!F||!this.ngayketthuc)return!1;const N=new Date(this.ngayketthuc);return F.getTime()>N.getTime()},this.disabledEndSoplnDate=F=>{if(!F||!this.ngaybatdau)return!1;const N=new Date(this.ngaybatdau);return F.getTime()<=N.getTime()},this.showConfirm=!0}fnInit(){this.cdf.markForCheck()}destroy(){}changeSotienno(t){this.sotienno=t}handleStartOpenSoplnChange(t){t||this.endSoplnDate.open()}handleEndOpenSoplnChange(t){}ngOnInit(){this.initTable()}getDataList(t){this.checkedCashArray=[],this.tableLoading(!0),this.searchParam.ngaybatdau=this.formatDate(this.ngaybatdau),this.searchParam.ngayketthuc=this.formatDate(this.ngayketthuc),this.dataService.getlists({pageSize:this.tableConfig.pageSize,pageNum:t?.pageIndex||this.tableConfig.pageIndex,filters:this.searchParam}).pipe((0,u.x)(()=>{this.tableLoading(!1)})).subscribe(a=>{const{list:r,total:m,pageNum:c}=a;this.dataList=[...r],this.tableConfig.total=m,this.tableConfig.pageIndex=c,this.tableLoading(!1),this.checkedCashArray=[...this.checkedCashArray],this.showbtnxuatPdf()})}showbtnxuatPdf(){this.showConfirm=this.sotienno>0&&this.checkedCashArray.length>0}thanhtoan(){this.spkh00201subthanhtoanService.show({nzTitle:"Thanh to\xe1n \u0111\u01a1n h\xe0ng"}).subscribe(t=>{if(!t||0===t.status)return;const o={...t.modalValue};switch(o.type){case"A":this.thanhtoanhoadon(o.sohdttcnkh);break;case"B":this.huythanhtoan(o.sohdttcnkh);break;case"C":this.phathanhlai(o.sohdttcnkh);break;case"D":this.huyphathanh(o.sohdttcnkh)}})}thanhtoanhoadon(t){this.dataService.thanhtoanhoadon(t).subscribe(o=>1===o?this.modalSrv.success({nzTitle:"Thanh to\xe1n th\xe0nh c\xf4ng !"}):this.modalSrv.error({nzTitle:"S\u1ed1 h\xf3a \u0111\u01a1n kh\xf4ng h\u1ee3p l\u1ec7 !",nzContent:"V\xf9i l\xf2ng li\xean l\u1ec7 b\u1ed9 ph\u1eadn k\u1ef7 thu\u1ea5t \u0111\u1ec3 h\u1ed5 tr\u1ee3"}))}huythanhtoan(t){this.dataService.huythanhtoan(t).subscribe(o=>1===o?this.modalSrv.success({nzTitle:"H\u1ee7y thanh to\xe1n th\xe0nh c\xf4ng !"}):this.modalSrv.error({nzTitle:"S\u1ed1 h\xf3a \u0111\u01a1n kh\xf4ng h\u1ee3p l\u1ec7 !",nzContent:"V\xf9i l\xf2ng li\xean l\u1ec7 b\u1ed9 ph\u1eadn k\u1ef7 thu\u1ea5t \u0111\u1ec3 h\u1ed5 tr\u1ee3"}))}phathanhlai(t){this.dataService.phathanhlai(t).subscribe(o=>o?(this.fnphathanhdonhang(o),this.modalSrv.success({nzTitle:"Ph\xe1t h\xe0nh l\u1ea1i th\xe0nh c\xf4ng !"})):this.modalSrv.error({nzTitle:"S\u1ed1 h\xf3a \u0111\u01a1n kh\xf4ng h\u1ee3p l\u1ec7 !",nzContent:"V\xf9i l\xf2ng li\xean l\u1ec7 b\u1ed9 ph\u1eadn k\u1ef7 thu\u1ea5t \u0111\u1ec3 h\u1ed5 tr\u1ee3"}))}huyphathanh(t){this.dataService.huyphathanh(t).subscribe(o=>1===o?this.modalSrv.success({nzTitle:"H\u1ee7y ph\xe1t h\xe0nh th\xe0nh c\xf4ng !"}):this.modalSrv.error({nzTitle:"S\u1ed1 h\xf3a \u0111\u01a1n kh\xf4ng h\u1ee3p l\u1ec7 !",nzContent:"V\xf9i l\xf2ng li\xean l\u1ec7 b\u1ed9 ph\u1eadn k\u1ef7 thu\u1ea5t \u0111\u1ec3 h\u1ed5 tr\u1ee3"}))}capnhat(t,o){this.modalspch00201xenhaService.show({nzTitle:"C\u1eadp nh\u1eadt ti\u1ec1n c\u01b0\u1edbc"},{tiencuoc:o}).subscribe(a=>{if(!a||0===a.status)return;const r={...a.modalValue};r.tiencuoc!=o?this.spch00201Service.updateTiencuocSoID({soID:t,tiencuocupdate:r.tiencuoc,lydo:r.lydo}).subscribe(c=>{1==c&&(this.message.success("Th\u1ef1c hi\u1ec7n th\xe0nh c\xf4ng !"),this.getDataList())}):this.modalSrv.info({nzTitle:"B\u1ea1n ch\u01b0a thay \u0111\u1ed5i ti\u1ec1n c\u01b0\u1edbc !"})})}getDetailKhachhang(){this.khachhangService.getDetail(this.khdtoService.id).pipe().subscribe(t=>{this.sotienno=t.sotienno,this.khdtoService.sotienno=t.sotienno})}resetForm(){this.searchParam={},this.tenkhachhang=""}fnFocusOutKhachhang(){this.searchParam.iduser!=this.stocktenkhachhang&&(this.tenkhachhang="")}searchKhachhangClick(){this.spin00251subkhachhangService.show({nzTitle:"Danh s\xe1ch kh\xe1ch h\xe0ng"},{showcomfirm:!1}).subscribe(t=>{if(!t||0===t.status)return;const o={...t.modalValue};this.searchParam.iduser=o.id,this.idkhachhang=o.id,this.stocktenkhachhang=o.id,this.tenkhachhang=o.name,this.sdtkhachhang=o.sodienthoai,this.diachikhachhang=o.diachi,this.commonService.tongnoUser({iduser:o.id}).subscribe(a=>{this.sotienno=a,this.cdf.detectChanges(),this.getDataList()})})}reloadTable(){this.message.info("\u0110\xe3 \u0111\u01b0\u1ee3c l\xe0m m\u1edbi"),this.getDataList()}tableChangeDectction(){this.dataList=[...this.dataList],this.cdf.detectChanges()}tableLoading(t){this.tableConfig.loading=t,this.tableChangeDectction()}selectedChecked(t){this.checkedCashArray=[...t],this.showbtnxuatPdf()}changePageSize(t){this.tableConfig.pageSize=t}initTable(){this.tableConfig={showCheckbox:!0,headers:[{title:"S\u1ed1 ID",width:200,field:"soID"},{title:"T\xean h\xe0ng",width:450,field:"tenhang"},{title:"Ti\u1ec1n c\u01b0\u1edbc",width:120,field:"tiencuoc",tdTemplate:this.tiencuocTpl},{title:"Trang Th\xe1i",width:180,field:"trangthai"},{title:"S\u1ed1 l\u01b0\u1ee3ng",width:120,field:"soluong"},{title:"S\u1ed1 l\u01b0\u1ee3ng th\u01b0c t\u1ebf",width:150,field:"soluongthucte"},{title:"Kh\u1ed1i l\u01b0\u1ee3ng",width:80,field:"khoiluong"},{title:"Tr\u1ecdng l\u01b0\u1ee3ng",width:80,field:"trongluong"},{title:"\u0110\u01a1n v\u1ecb t\xednh",width:120,field:"donvitinh"},{title:"Ng\xe0y nh\u1eadp th\u1ef1c t\u1ebf",field:"ngaynhapthucte",width:150,pipe:"date:yyyy-MM-dd HH:mm"},{title:"Ghi ch\xfa",width:150,field:"ghichu"},{title:"H\xe0nh \u0111\u1ed9ng",tdTemplate:this.operationTpl,width:250,fixed:!0,fixedDir:"right"}],total:0,loading:!0,pageSize:10,pageIndex:1}}fnphathanhdonhang(t){var o=this;return(0,f.Z)(function*(){let a=[];for(let g of t.lstData){let M=[o.formatDate(g.ngaynhapthucte),g.tenhang,o.displayVND(g.tiencuoc),g.soluong,g.khoiluong,g.trongluong,g.nguoiphathanh];a.push(M)}let r="C\xf4ng n\u1ee3 "+t.header.tenkhachhang;o.pdfService.clearHeader();let c=z.headerLayout;c[0].field="K\xednh g\u1eedi:",c[0].value=t.header.tenkhachhang,c[1].field="S\u1ed1 \u0111i\u1ec7n tho\u1ea1i:",c[1].value=t.header.sdtkhachhang,c[2].field="\u0110\u1ecba ch\u1ec9:",c[2].value=t.header.diachi,c[3].field="T\u1ed5ng ti\u1ec1n thanh to\xe1n:",c[3].value=o.displayVND(t.header.tongcuoc),c[4].field="S\u1ed1 HDTTCNKH:",c[4].value=o.displayOD(t.header.sohdttcnkh),yield o.pdfService.exportPDF([["Ng\xe0y nh\u1eadp h\xe0ng","T\xean H\xe0ng","Ti\u1ec1n c\u01b0\u1edbc","S\u1ed1 l\u01b0\u1ee3ng","Tr\u1ecdng l\u01b0\u1ee3ng","Kh\u1ed1i l\u01b0\u1ee3ng","Ng\u01b0\u1eddi ph\xe1t h\xe0nh"]],c,a,r,o.getDate(),"B\xean thanh to\xe1n","B\xean V\u1eadn Chuy\u1ec3n",t.header.sohdttcnkh)})()}generateData(){let t=[];for(let o of this.dataList)if(1==o._checked){let a=[this.formatDate(o.ngaynhapthucte),o.tenhang,this.displayVND(o.tiencuoc),o.soluong,o.khoiluong,o.trongluong,o.nguoiphathanh.name];t.push(a)}return t}xuatpdf(){var t=this;this.generateData().length>0?this.commonService.getSoHDTTCNKH().pipe().subscribe(function(){var o=(0,f.Z)(function*(a){let r="C\xf4ng n\u1ee3 "+t.tenkhachhang;t.pdfService.clearHeader();let c=z.headerLayout;c[0].field="K\xednh g\u1eedi:",c[0].value=t.tenkhachhang,c[1].field="S\u1ed1 \u0111i\u1ec7n tho\u1ea1i:",c[1].value=t.sdtkhachhang,c[2].field="\u0110\u1ecba ch\u1ec9:",c[2].value=t.diachikhachhang,c[3].field="T\u1ed5ng ti\u1ec1n thanh to\xe1n:",c[3].value=t.displayVND(t.fnTongCuoc()),c[4].field="S\u1ed1 HDTTCNKH:",c[4].value=t.displayOD(a),yield t.pdfService.exportPDF([["Ng\xe0y nh\u1eadp h\xe0ng","T\xean H\xe0ng","Ti\u1ec1n c\u01b0\u1edbc","S\u1ed1 l\u01b0\u1ee3ng","Tr\u1ecdng l\u01b0\u1ee3ng","Kh\u1ed1i l\u01b0\u1ee3ng","Ng\u01b0\u1eddi ph\xe1t h\xe0nh"]],c,t.generateData(),r,t.getDate(),"B\xean thanh to\xe1n","B\xean V\u1eadn Chuy\u1ec3n",a);let g=[];for(let X of t.checkedCashArray)g.push(X.soID);let M={lstsoID:g,SoHDTTCNKH:a,idkhachhang:t.idkhachhang,tongcuoc:t.fnTongCuoc()};t.dataService.xuatpdf(M).pipe((0,u.x)(()=>{t.tableLoading(!1)})).subscribe(X=>{console.log(X),t.getDataList()})});return function(a){return o.apply(this,arguments)}}()):this.modalSrv.info({nzTitle:"V\xf9i ch\u1ecdn \xedt nh\u1ea5t m\u1ed9t \u0111\u01a1n h\xe0ng \u0111\u1ec3 xu\u1ea5t c\u1ed9ng n\u1ee3"})}fnTongCuoc(){let t=0;for(let o of this.checkedCashArray)t+=o.tiencuoc;return t}fnGetIddonhang(t){return t.substring(0,24)}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(w.Q),n.Y36(T.F0),n.Y36(n.sBO),n.Y36(l.uU),n.Y36(Z.L),n.Y36(I.dD),n.Y36(D.Sf),n.Y36(s.k),n.Y36(p),n.Y36(J.T),n.Y36(G.p),n.Y36(B.j),n.Y36(R.v),n.Y36($),n.Y36(q),n.Y36(j.a),n.Y36(an))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-spkh00201"]],viewQuery:function(t,o){if(1&t&&(n.Gf(zn,7),n.Gf(Sn,7),n.Gf(Tn,7),n.Gf(Cn,7),n.Gf(_n,7),n.Gf(vn,7),n.Gf(kn,7),n.Gf(bn,7),n.Gf(yn,5)),2&t){let a;n.iGM(a=n.CRH())&&(o.operationTpl=a.first),n.iGM(a=n.CRH())&&(o.tenhangTpl=a.first),n.iGM(a=n.CRH())&&(o.tiencuocTpl=a.first),n.iGM(a=n.CRH())&&(o.soluongTpl=a.first),n.iGM(a=n.CRH())&&(o.donvitinhTpl=a.first),n.iGM(a=n.CRH())&&(o.trangthaiTpl=a.first),n.iGM(a=n.CRH())&&(o.nguonxeTpl=a.first),n.iGM(a=n.CRH())&&(o.khachhangTpl=a.first),n.iGM(a=n.CRH())&&(o.endSoplnDate=a.first)}},features:[n.qOj],decls:61,vars:109,consts:[[3,"backTpl","extraTpl","backUrl","pageHeaderInfo"],["huongdanTpl",""],["backTpl",""],[1,"normal-table-wrap"],["nzHoverable","",1,"m-b-10",3,"nzBodyStyle"],["nz-form",""],["nz-row","",3,"nzGutter"],["nz-col","",1,"inputIcon",3,"nzXXl","nzXl","nzLg","nzMd","nzSm","nzXs"],[3,"nzXXl","nzXl","nzLg","nzMd","nzSm","nzXs"],["nzSearch","",3,"nzAddOnAfter"],["name","iduser","type","text","nz-input","","placeholder","","readonly","",3,"ngModel","ngModelChange","blur"],["suffixIconButtonKhachhang",""],["nzFor","",1,"fix-inputIcon",3,"nzNoColon"],["nz-col","",3,"nzXXl","nzXl","nzLg","nzMd","nzSm","nzXs"],[3,"nzXXl","nzXl","nzLg","nzMd","nzSm","nzXs","nzFor"],[3,"Amount","Disable","changeAmount"],["nz-col","",1,"text-right","p-0","m-b-10",3,"nzXXl","nzXl","nzLg","nzMd","nzSm","nzXs"],["nz-button","",3,"nzType","click"],["nz-icon","","nzType","search"],["nz-button","",1,"m-l-15",3,"click"],["nz-icon","","nzType","close-circle","nzTheme","outline"],["nzRequired","",3,"nzXXl","nzXl","nzLg","nzMd","nzSm","nzXs","nzFor"],["name","ngaybatdau",3,"nzDisabledDate","nzFormat","ngModel","nzPlaceHolder","ngModelChange","nzOnOpenChange"],["name","ngayketthuc",3,"nzDisabledDate","nzFormat","ngModel","nzPlaceHolder","ngModelChange","nzOnOpenChange"],["endSoplnDate",""],[3,"tableTitle","btnTpl","btnConfirm","reload"],[3,"checkedCashArrayFromComment","tableConfig","tableData","selectedChange","changePageSize","changePageNum"],["operationTpl",""],["khachhangTpl",""],["tiencuocTpl",""],["tableBtns",""],["tableConfirm",""],["nz-button","","nzType","primary","nzShape","round",3,"nzSize","click"],["nz-icon","","nzType","star","nzTheme","outline"],["nz-icon","","nzType","arrow-left","nzTheme","outline"],["nz-button","",1,"bg-icon",3,"nzType","click"],["class","operate-text",4,"appAuth"],[1,"operate-text"],["nz-button","","nzType","primary","nzGhost","",3,"click"],["nzType","success",3,"nzMessage"],["nz-button","","nzType","default",3,"disabled","click",4,"appAuth"],["nz-button","","nzType","default",3,"disabled","click"],["nz-icon","","nzType","money-collect","nzTheme","twotone"],[4,"ngIf"],["nz-button","","nzType","primary",1,"m-r-8",3,"click"],["nz-icon","","nzType","caret-right"]],template:function(t,o){if(1&t&&(n._UZ(0,"app-page-header",0),n.YNc(1,An,3,1,"ng-template",null,1,n.W1O),n.YNc(3,Dn,2,0,"ng-template",null,2,n.W1O),n.TgZ(5,"div",3)(6,"nz-card",4)(7,"form",5)(8,"div",6)(9,"div",7)(10,"nz-form-item")(11,"nz-form-label",8),n._uU(12,"M\xe3 kh\xe1ch h\xe0ng"),n.qZA(),n.TgZ(13,"nz-form-control",8)(14,"nz-input-group",9)(15,"input",10),n.NdJ("ngModelChange",function(r){return o.searchParam.iduser=r})("blur",function(){return o.fnFocusOutKhachhang()}),n.qZA()(),n.YNc(16,xn,2,1,"ng-template",null,11,n.W1O),n.TgZ(18,"nz-form-label",12)(19,"span")(20,"u"),n._uU(21),n.qZA()()()()()(),n.TgZ(22,"div",13)(23,"nz-form-item")(24,"nz-form-label",14),n._uU(25,"S\u1ed1 ti\u1ec1n n\u1ee3"),n.qZA(),n.TgZ(26,"nz-form-control",8)(27,"app-input-currency",15),n.NdJ("changeAmount",function(r){return o.changeSotienno(r)}),n.qZA()()()(),n.TgZ(28,"div",16)(29,"button",17),n.NdJ("click",function(){return o.getDataList()}),n._UZ(30,"i",18),n._uU(31," T\xecm ki\u1ebfm "),n.qZA(),n.TgZ(32,"button",19),n.NdJ("click",function(){return o.resetForm()}),n._UZ(33,"i",20),n._uU(34," L\xe0m m\u1edbi "),n.qZA()()(),n.TgZ(35,"div",6)(36,"div",13)(37,"nz-form-item")(38,"nz-form-label",21),n._uU(39,"Ng\xe0y b\u1eaft \u0111\u1ea7u"),n.qZA(),n.TgZ(40,"nz-form-control",8)(41,"nz-date-picker",22),n.NdJ("ngModelChange",function(r){return o.ngaybatdau=r})("nzOnOpenChange",function(r){return o.handleStartOpenSoplnChange(r)}),n.qZA()()()(),n.TgZ(42,"div",13)(43,"nz-form-item")(44,"nz-form-label",14),n._uU(45,"Ng\xe0y k\u1ebft th\xfac"),n.qZA(),n.TgZ(46,"nz-form-control",8)(47,"nz-date-picker",23,24),n.NdJ("ngModelChange",function(r){return o.ngayketthuc=r})("nzOnOpenChange",function(r){return o.handleEndOpenSoplnChange(r)}),n.qZA()()()()()()(),n.TgZ(49,"app-card-table-wrap",25),n.NdJ("reload",function(){return o.reloadTable()}),n.TgZ(50,"app-ant-table",26),n.NdJ("selectedChange",function(r){return o.selectedChecked(r)})("changePageSize",function(r){return o.changePageSize(r)})("changePageNum",function(r){return o.getDataList(r)}),n.qZA(),n.YNc(51,Xn,1,1,"ng-template",null,27,n.W1O),n.YNc(53,Fn,1,1,"ng-template",null,28,n.W1O),n.YNc(55,En,3,4,"ng-template",null,29,n.W1O),n.qZA(),n.YNc(57,In,1,1,"ng-template",null,30,n.W1O),n.YNc(59,Nn,1,1,"ng-template",null,31,n.W1O),n.qZA()),2&t){const a=n.MAs(2),r=n.MAs(4),m=n.MAs(17),c=n.MAs(58),g=n.MAs(60);n.Q6J("backTpl",r)("extraTpl",a)("backUrl","/default/khachhang/spkh00101")("pageHeaderInfo",o.pageHeaderInfo),n.xp6(6),n.Q6J("nzBodyStyle",n.DdM(106,wn)),n.xp6(2),n.Q6J("nzGutter",n.DdM(107,U)),n.xp6(1),n.Q6J("nzXXl",8)("nzXl",8)("nzLg",8)("nzMd",12)("nzSm",24)("nzXs",24),n.xp6(2),n.Q6J("nzXXl",9)("nzXl",9)("nzLg",9)("nzMd",12)("nzSm",24)("nzXs",24),n.xp6(2),n.Q6J("nzXXl",10)("nzXl",10)("nzLg",10)("nzMd",10)("nzSm",20)("nzXs",24),n.xp6(1),n.Q6J("nzAddOnAfter",m),n.xp6(1),n.Q6J("ngModel",o.searchParam.iduser),n.xp6(3),n.Q6J("nzNoColon",!0),n.xp6(3),n.Oqu(o.tenkhachhang),n.xp6(1),n.Q6J("nzXXl",8)("nzXl",8)("nzLg",8)("nzMd",12)("nzSm",24)("nzXs",24),n.xp6(2),n.Q6J("nzXXl",9)("nzXl",9)("nzLg",9)("nzMd",12)("nzSm",24)("nzXs",24),n.xp6(2),n.Q6J("nzXXl",10)("nzXl",10)("nzLg",10)("nzMd",10)("nzSm",20)("nzXs",24),n.xp6(1),n.Q6J("Amount",o.sotienno)("Disable",!0),n.xp6(1),n.Q6J("nzXXl",8)("nzXl",8)("nzLg",8)("nzMd",12)("nzSm",24)("nzXs",24),n.xp6(1),n.Q6J("nzType","primary"),n.xp6(6),n.Q6J("nzGutter",n.DdM(108,U)),n.xp6(1),n.Q6J("nzXXl",8)("nzXl",8)("nzLg",8)("nzMd",12)("nzSm",24)("nzXs",24),n.xp6(2),n.Q6J("nzXXl",9)("nzXl",9)("nzLg",9)("nzMd",12)("nzSm",24)("nzXs",24),n.xp6(2),n.Q6J("nzXXl",12)("nzXl",12)("nzLg",12)("nzMd",12)("nzSm",24)("nzXs",24),n.xp6(1),n.Q6J("nzDisabledDate",o.disabledStartSoplnDate)("nzFormat",o.dateFormat)("ngModel",o.ngaybatdau)("nzPlaceHolder",o.dateFormat),n.xp6(1),n.Q6J("nzXXl",8)("nzXl",8)("nzLg",8)("nzMd",12)("nzSm",24)("nzXs",24),n.xp6(2),n.Q6J("nzXXl",9)("nzXl",9)("nzLg",9)("nzMd",12)("nzSm",24)("nzXs",24),n.xp6(2),n.Q6J("nzXXl",12)("nzXl",12)("nzLg",12)("nzMd",12)("nzSm",24)("nzXs",24),n.xp6(1),n.Q6J("nzDisabledDate",o.disabledEndSoplnDate)("nzFormat",o.dateFormat)("ngModel",o.ngayketthuc)("nzPlaceHolder",o.dateFormat),n.xp6(2),n.Q6J("tableTitle","K\u1ebft qu\u1ea3 t\xecm ki\u1ebfm")("btnTpl",c)("btnConfirm",g),n.xp6(1),n.Q6J("checkedCashArrayFromComment",o.checkedCashArray)("tableConfig",o.tableConfig)("tableData",o.dataList)}},dependencies:[l.O5,d._Y,d.Fj,d.JJ,d.JL,d.On,d.F,hn.q,rn.q,O.e,sn.x,cn.p,ln.Ls,y.t3,y.SK,S.Lr,S.Nx,S.iK,S.Fd,un.ix,pn.w,dn.dQ,x.Zp,x.gB,mn.bd,gn.uw,fn.r,l.H9],changeDetection:0}),e})(),data:{title:"Thanh to\xe1n c\xf4ng n\u1ee3",key:"spkh00201"}}];let On=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[T.Bz.forChild(Qn),T.Bz]}),e})();var L=i(5316),Hn=i(30804);let Pn=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[L.m]}),e})(),Un=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[L.m]}),e})(),Yn=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[l.ez,On,L.m,Hn.A,Pn,Un]}),e})()}}]);