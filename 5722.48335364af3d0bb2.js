"use strict";(self.webpackChunkng_ant_admin=self.webpackChunkng_ant_admin||[]).push([[5722],{5722:(dt,z,i)=>{i.r(z),i.d(z,{DeptModule:()=>pt});var f=i(6083),t=i(4650);let v=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[f.m]}),n})();var c=i(6806),_=i(8746),A=i(2195),D=i(8877),T=i(8442),p=i(4006),u=i(9646),x=i(9523),C=i(7),g=i(6895),m=i(3679),s=i(6704),b=i(5635),M=i(8521);function Z(n,r){if(1&n&&(t.ynx(0),t._uU(1),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.errors.message)}}function J(n,r){1&n&&(t.ynx(0),t._uU(1,"Ph\u1ea7n b\u1eaft bu\u1ed9c"),t.BQk())}function F(n,r){if(1&n&&(t.YNc(0,Z,2,1,"ng-container",10),t.YNc(1,J,2,0,"ng-container",10)),2&n){const e=r.$implicit;t.Q6J("ngIf",e.hasError("message")),t.xp6(1),t.Q6J("ngIf",e.hasError("required"))}}let S=(()=>{class n{constructor(e,a){this.modalRef=e,this.fb=a,this.params={}}initForm(){this.addEditForm=this.fb.group({tenphongban:[null,[p.kI.required]],state:[!0],orderNum:[0]})}getAsyncFnData(e){return(0,u.of)(e)}getCurrentValue(){return(0,x.r7)(this.addEditForm)?(0,u.of)(this.addEditForm.value):(0,u.of)(!1)}ngOnInit(){this.initForm(),Object.keys(this.params).length>0&&this.addEditForm.patchValue(this.params)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(C.Lf),t.Y36(p.qu))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-dept-manage-modal"]],decls:22,vars:18,consts:[["nz-form","",3,"formGroup"],["nzRequired","","nzFor","tenphongban",3,"nzSm","nzXs"],[3,"nzSm","nzXs","nzErrorTip"],["nz-input","","formControlName","tenphongban","name","tenphongban","placeholder","Vui l\xf2ng nh\u1eadp t\xean ph\xf2ng ban","id","departmentName"],["nzRequired","","nzFor","state",3,"nzSm","nzXs"],["formControlName","state"],["nz-radio","",3,"nzValue"],["nzRequired","","nzFor","orderNum",3,"nzSm","nzXs"],["nz-input","","formControlName","orderNum","name","orderNum","placeholder","Lo\u1ea1i","id","orderNum"],["combineTpl",""],[4,"ngIf"]],template:function(e,a){if(1&e&&(t.TgZ(0,"form",0)(1,"nz-form-item")(2,"nz-form-label",1),t._uU(3,"T\xean b\u1ed9 ph\u1eadn"),t.qZA(),t.TgZ(4,"nz-form-control",2),t._UZ(5,"input",3),t.qZA()(),t.TgZ(6,"nz-form-item")(7,"nz-form-label",4),t._uU(8,"T\xecnh tr\u1ea1ng b\u1ed9 ph\u1eadn"),t.qZA(),t.TgZ(9,"nz-form-control",2)(10,"nz-radio-group",5)(11,"label",6),t._uU(12,"V\xf4 hi\u1ec7u h\xf3a"),t.qZA(),t.TgZ(13,"label",6),t._uU(14,"Cho ph\xe9p"),t.qZA()()()(),t.TgZ(15,"nz-form-item")(16,"nz-form-label",7),t._uU(17,"Lo\u1ea1i"),t.qZA(),t.TgZ(18,"nz-form-control",2),t._UZ(19,"input",8),t.qZA()()(),t.YNc(20,F,2,2,"ng-template",null,9,t.W1O)),2&e){const o=t.MAs(21);t.Q6J("formGroup",a.addEditForm),t.xp6(2),t.Q6J("nzSm",6)("nzXs",24),t.xp6(2),t.Q6J("nzSm",14)("nzXs",24)("nzErrorTip",o),t.xp6(3),t.Q6J("nzSm",6)("nzXs",24),t.xp6(2),t.Q6J("nzSm",14)("nzXs",24)("nzErrorTip",o),t.xp6(2),t.Q6J("nzValue",!1),t.xp6(2),t.Q6J("nzValue",!0),t.xp6(3),t.Q6J("nzSm",6)("nzXs",24),t.xp6(2),t.Q6J("nzSm",14)("nzXs",24)("nzErrorTip",o)}},dependencies:[g.O5,p._Y,p.Fj,p.JJ,p.JL,p.sg,p.u,m.t3,m.SK,s.Lr,s.Nx,s.iK,s.Fd,b.Zp,M.Of,M.Dg],changeDetection:0}),n})();var L=i(9174);let N=(()=>{class n{constructor(e){this.modalWrapService=e}getContentComponent(){return S}show(e={},a){return this.modalWrapService.show(this.getContentComponent(),e,a)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(L.U))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var y=i(374),Q=i(8313),X=i(1610),U=i(2802),Y=i(5656),O=i(4178),I=i(6672),P=i(1102),B=i(6616),G=i(7044),H=i(1811),E=i(8231),V=i(4607);const R=["operationTpl"],K=["state"];function W(n,r){if(1&n&&t._UZ(0,"nz-option",22),2&n){const e=r.$implicit;t.Q6J("nzValue",e.value)("nzLabel",e.label)}}function j(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"span",24)(1,"button",25),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(),l=o.id,d=o.fatherId,h=t.oxw();return t.KtG(h.edit(l,d))}),t._uU(2,"C\u1eadp nh\u1eadt"),t.qZA()()}}function w(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"span",24)(1,"button",25),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().id,l=t.oxw();return t.KtG(l.del(o))}),t._uU(2,"X\xf3a"),t.qZA()()}}function k(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"span",24)(1,"button",25),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().id,l=t.oxw();return t.KtG(l.add(o))}),t._uU(2,"Th\xeam C\u1ea5p D\u01b0\u1edbi"),t.qZA()()}}function $(n,r){if(1&n&&(t.YNc(0,j,3,0,"span",23),t.YNc(1,w,3,0,"span",23),t.YNc(2,k,3,0,"span",23)),2&n){const e=t.oxw();t.Q6J("appAuth",e.ActionCode.DeptEdit),t.xp6(1),t.Q6J("appAuth",e.ActionCode.DeptDel),t.xp6(1),t.Q6J("appAuth",e.ActionCode.DeptAddLowLevel)}}function q(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",26),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.add(0))}),t._UZ(1,"i",27),t._uU(2," Th\u1ebfm m\u1edbi "),t.qZA()}}function tt(n,r){1&n&&t.GkF(0)}function nt(n,r){if(1&n&&t.YNc(0,tt,1,0,"ng-container",28),2&n){const e=r.state;t.oxw();const a=t.MAs(34),o=t.MAs(36);t.Q6J("ngTemplateOutlet",e?a:o)}}function et(n,r){1&n&&(t.TgZ(0,"nz-tag",29),t._uU(1,"Cho ph\xe9p"),t.qZA()),2&n&&t.Q6J("nzColor","green")}function at(n,r){1&n&&(t.TgZ(0,"nz-tag",29),t._uU(1,"V\xf4 hi\u1ec7u h\xf3a"),t.qZA()),2&n&&t.Q6J("nzColor","magenta")}const ot=function(){return{"padding-bottom":0}},it=function(){return{xs:8,sm:16,md:24}},rt=[{path:"",component:(()=>{class n{constructor(e,a,o,l,d,h,st){this.fb=e,this.deptModalService=a,this.dataService=o,this.modalSrv=l,this.message=d,this.router=h,this.cdr=st,this.ActionCode=A.h,this.searchParam={},this.pageHeaderInfo={title:"Qu\u1ea3n l\xfd b\u1ed9 ph\u1eadn",breadcrumb:["Home","Qu\u1ea3n ly h\u1ec7 th\u1ed1ng","Qu\u1ea3n l\xfd b\u1ed9 ph\u1eadn"]},this.dataList=[],this.stateOptions=[]}reloadTable(){this.message.info("\u0110\xe3 \u0111\u01b0\u1ee3c l\xe0m m\u1edbi"),this.getDataList()}tableChangeDectction(){this.dataList=[...this.dataList],this.cdr.detectChanges()}tableLoading(e){this.tableConfig.loading=e,this.tableChangeDectction()}getDataList(e){this.tableConfig.loading=!0,this.dataService.getDepts({pageSize:0,pageNum:0,filters:this.searchParam}).pipe((0,_.x)(()=>{this.tableLoading(!1)})).subscribe(o=>{const l=(0,T.RA)(o.list);this.dataList=(0,T.Ll)(l),this.tableLoading(!1)})}check(e,a,o){this.message.success(e)}resetForm(){this.searchParam={},this.getDataList()}add(e){this.deptModalService.show({nzTitle:"Th\xeam m\u1edbi"}).subscribe(a=>{if(!a||0===a.status)return;const o={...a.modalValue};o.fatherId=e,this.tableLoading(!0),this.addEditData(o,"addDepts")},a=>this.tableLoading(!1))}addEditData(e,a){this.dataService[a](e).pipe((0,_.x)(()=>{this.tableLoading(!1)})).subscribe(()=>{this.getDataList()})}del(e){const a=[e];this.modalSrv.confirm({nzTitle:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a kh\xf4ng\uff1f",nzContent:"Kh\xf4ng th\u1ec3 kh\xf4i ph\xfac khi x\xf3a",nzOnOk:()=>{this.tableLoading(!0),this.dataService.delDepts(a).subscribe(()=>{1===this.dataList.length&&this.tableConfig.pageIndex--,this.getDataList()},o=>this.tableLoading(!1))}})}edit(e,a){this.dataService.getDeptsDetail(e).subscribe(o=>{this.deptModalService.show({nzTitle:"Edit"},o).subscribe(({modalValue:l,status:d})=>{0!==d&&(l.id=e,l.fatherId=a,this.tableLoading(!0),this.addEditData(l,"editDepts"))},l=>this.tableLoading(!1))})}changePageSize(e){this.tableConfig.pageSize=e}initTable(){this.tableConfig={headers:[{title:"T\xean b\u1ed9 ph\u1eadn",width:180,field:"tenphongban"},{title:"Tr\u1ea1ng th\xe1i",field:"state",tdTemplate:this.state,width:100},{title:"Lo\u1ea1i",field:"orderNum",width:100},{title:"Ng\xe0y t\u1ea1o",field:"createdAt",pipe:"date:yyyy-MM-dd HH:mm",width:180},{title:"V\u1eadn h\xe0nh",tdTemplate:this.operationTpl,width:250,fixed:!0,fixedDir:"right"}],total:0,showCheckbox:!1,loading:!1,pageSize:10,pageIndex:1}}ngOnInit(){this.initTable(),this.stateOptions=[...D.b.transformMapToArray(D.V.available,2)]}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.qu),t.Y36(N),t.Y36(y.z),t.Y36(C.Sf),t.Y36(Q.dD),t.Y36(c.F0),t.Y36(t.sBO))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-dept"]],viewQuery:function(e,a){if(1&e&&(t.Gf(R,7),t.Gf(K,7)),2&e){let o;t.iGM(o=t.CRH())&&(a.operationTpl=o.first),t.iGM(o=t.CRH())&&(a.state=o.first)}},decls:37,vars:31,consts:[[3,"pageHeaderInfo"],[1,"normal-table-wrap"],["nzHoverable","",1,"m-b-10",3,"nzBodyStyle"],["nz-form",""],["nz-row","",3,"nzGutter"],["nz-col","",3,"nzXXl","nzXl","nzLg","nzMd","nzSm","nzXs"],[3,"nzFor"],["nz-input","","placeholder","Vui l\xf2ng nh\u1eadp t\xean b\u1ed9 ph\u1eadn","name","departmentName",3,"ngModel","ngModelChange"],["name","state","nzPlaceHolder","S\u1ed5 xu\u1ed1ng l\u1ef1a ch\u1ecdn","nzAllowClear","",3,"ngModel","ngModelChange"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nz-col","",1,"text-right","p-0","m-b-10",3,"nzXXl","nzXl","nzLg","nzMd","nzSm","nzXs"],["nz-button","",3,"nzType","click"],["nz-icon","","nzType","search"],["nz-button","",1,"m-l-15",3,"click"],["nz-icon","","nzType","close-circle","nzTheme","outline"],[3,"tableTitle","btnTpl","reload"],[3,"tableConfig","tableData","changePageSize","changePageNum"],["operationTpl",""],["tableBtns",""],["state",""],["yesTpl",""],["notTpl",""],[3,"nzValue","nzLabel"],["class","operate-text",4,"appAuth"],[1,"operate-text"],["nz-button","","nzType","primary","nzGhost","",3,"click"],["nz-button","","nzType","primary",1,"m-r-8",3,"click"],["nz-icon","","nzType","plus"],[4,"ngTemplateOutlet"],[3,"nzColor"]],template:function(e,a){if(1&e&&(t._UZ(0,"app-page-header",0),t.TgZ(1,"div",1)(2,"nz-card",2)(3,"form",3)(4,"div",4)(5,"div",5)(6,"nz-form-item")(7,"nz-form-label",6),t._uU(8,"T\xean b\u1ed9 ph\u1eadn"),t.qZA(),t.TgZ(9,"nz-form-control")(10,"input",7),t.NdJ("ngModelChange",function(l){return a.searchParam.departmentName=l}),t.qZA()()()(),t.TgZ(11,"div",5)(12,"nz-form-item")(13,"nz-form-label",6),t._uU(14,"Ti\u1ec3u bang"),t.qZA(),t.TgZ(15,"nz-form-control")(16,"nz-select",8),t.NdJ("ngModelChange",function(l){return a.searchParam.state=l}),t.YNc(17,W,1,2,"nz-option",9),t.qZA()()()(),t.TgZ(18,"div",10)(19,"button",11),t.NdJ("click",function(){return a.getDataList()}),t._UZ(20,"i",12),t._uU(21," T\xecm ki\u1ebfm "),t.qZA(),t.TgZ(22,"button",13),t.NdJ("click",function(){return a.resetForm()}),t._UZ(23,"i",14),t._uU(24," c\xe0i l\u1ea1i "),t.qZA()()()()(),t.TgZ(25,"app-card-table-wrap",15),t.NdJ("reload",function(){return a.reloadTable()}),t.TgZ(26,"app-tree-table",16),t.NdJ("changePageSize",function(l){return a.changePageSize(l)})("changePageNum",function(l){return a.getDataList(l)}),t.qZA(),t.YNc(27,$,3,3,"ng-template",null,17,t.W1O),t.qZA()(),t.YNc(29,q,3,0,"ng-template",null,18,t.W1O),t.YNc(31,nt,1,1,"ng-template",null,19,t.W1O),t.YNc(33,et,2,1,"ng-template",null,20,t.W1O),t.YNc(35,at,2,1,"ng-template",null,21,t.W1O)),2&e){const o=t.MAs(30);t.Q6J("pageHeaderInfo",a.pageHeaderInfo),t.xp6(2),t.Q6J("nzBodyStyle",t.DdM(29,ot)),t.xp6(2),t.Q6J("nzGutter",t.DdM(30,it)),t.xp6(1),t.Q6J("nzXXl",8)("nzXl",8)("nzLg",8)("nzMd",12)("nzSm",24)("nzXs",24),t.xp6(5),t.Q6J("ngModel",a.searchParam.departmentName),t.xp6(1),t.Q6J("nzXXl",8)("nzXl",8)("nzLg",8)("nzMd",12)("nzSm",24)("nzXs",24),t.xp6(5),t.Q6J("ngModel",a.searchParam.state),t.xp6(1),t.Q6J("ngForOf",a.stateOptions),t.xp6(1),t.Q6J("nzXXl",8)("nzXl",8)("nzLg",8)("nzMd",12)("nzSm",24)("nzXs",24),t.xp6(1),t.Q6J("nzType","primary"),t.xp6(6),t.Q6J("tableTitle","Danh s\xe1ch b\u1ed9 ph\u1eadn")("btnTpl",o),t.xp6(1),t.Q6J("tableConfig",a.tableConfig)("tableData",a.dataList)}},dependencies:[g.sg,g.tP,p._Y,p.Fj,p.JJ,p.JL,p.On,p.F,X.I,U.q,Y.x,O.p,I.j,P.Ls,m.t3,m.SK,s.Lr,s.Nx,s.iK,s.Fd,B.ix,G.w,H.dQ,b.Zp,E.Ip,E.Vq,V.bd],changeDetection:0}),n})(),data:{title:"Qu\u1ea3n l\xfd b\u1ed9 ph\u1eadn",key:"dept"}}];let lt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[c.Bz.forChild(rt),c.Bz]}),n})(),pt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[f.m,v,lt]}),n})()}}]);