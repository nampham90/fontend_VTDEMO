"use strict";(self.webpackChunkng_ant_admin=self.webpackChunkng_ant_admin||[]).push([[6258],{2155:(A,C,o)=>{o.d(C,{t:()=>p});var p=(()=>{return(m=p||(p={})).Demo="/default/dashboard/demo",m.Analysis="/default/dashboard/analysis",m.Monitor="/default/dashboard/monitor",m.Workbench="/default/dashboard/workbench",m.spxe00101="xe/spxe00101",m.spch00101="chuyen/spch00101",m.spch00201="chuyen/spch00201",m.spkh00101="khachhang/spkh00101",m.spkh00201="khachhang/spkh00201",p;var m})()},1565:(A,C,o)=>{o.d(C,{Q:()=>T});var p=o(5861),m=o(529),b=o(4556),_=o(4650),k=o(4246);let T=(()=>{class g{constructor(s,t){this.http=s,this.httpt=t,this.urlApi="https://fakestoreapi.com/",this.provincesApi=b.tinhthanhApi,this.httpOptions={headers:new m.WM({"Content-Type":"application/json"})}}GetCallProvinces(s,t){var c=this;return(0,p.Z)(function*(){let u=c.httpt.get(c.provincesApi);return u.subscribe({next:d=>(s?.(d),!0),error:d=>(t?.(),!1),complete:()=>{}}),u})()}GetCallCommonWs(s,t,c){var u=this;return(0,p.Z)(function*(){let d=u.httpt.get(u.urlApi+s,{observe:"response"});return d.subscribe({next:l=>(t?.(l),!0),error:l=>(c?.(),!1),complete:()=>{}}),d})()}PostCallCommonWs(s,t,c,u){var d=this;return(0,p.Z)(function*(){let l=d.http.post(s,t,{needSuccessInfo:!1});return l.subscribe({next:f=>(c?.(f),!0),error:f=>(u?.(),!1),complete:()=>{}}),l})()}GetCallWs(s,t,c){var u=this;return(0,p.Z)(function*(){let d=u.http.get(s,{observe:"response"});return d.subscribe({next:l=>(t?.(l),!0),error:l=>(c?.(),!1),complete:()=>{}}),d})()}PostCallWs(s,t,c,u){var d=this;return(0,p.Z)(function*(){let l=d.http.post(s,t,{needSuccessInfo:!1});return l.subscribe({next:f=>(c?.(f),!0),error:f=>(u?.(),!1),complete:()=>{}}),l})()}PutCallWs(s,t,c,u){var d=this;return(0,p.Z)(function*(){let l=d.http.put(s,t,{needSuccessInfo:!0});return l.subscribe({next:f=>(c?.(f),!0),error:f=>(u?.(),!1),complete:()=>{}}),l})()}DeleteCallWs(s,t,c,u){var d=this;return(0,p.Z)(function*(){let l=d.http.delete(s,t,{needSuccessInfo:!0});return l.subscribe({next:f=>(c?.(f),!0),error:f=>(u?.(),!1),complete:()=>{}}),l})()}}return g.\u0275fac=function(s){return new(s||g)(_.LFG(k.q),_.LFG(m.eN))},g.\u0275prov=_.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()},6258:(A,C,o)=>{o.r(C),o.d(C,{Spkh00101Module:()=>mt});var p=o(6895),m=o(9116),b=o(2155),_=o(2195),k=o(3951),T=o(8746),g=o(4556),y=o(8877),s=o(8176),t=o(4650),c=o(1565),u=o(8313),d=o(7087),l=o(4006),f=o(9523),x=o(9646),Z=o(7),L=o(7859),E=o(3679),S=o(6704),P=o(5635);function F(n,h){if(1&n&&(t.ynx(0),t._uU(1),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.errors.message)}}function O(n,h){1&n&&(t.ynx(0),t._uU(1,"Ph\u1ea7n b\u1eaft bu\u1ed9c"),t.BQk())}function J(n,h){if(1&n&&(t.YNc(0,F,2,1,"ng-container",10),t.YNc(1,O,2,0,"ng-container",10)),2&n){const e=h.$implicit;t.Q6J("ngIf",e.hasError("message")),t.xp6(1),t.Q6J("ngIf",e.hasError("required"))}}let N=(()=>{class n{constructor(e,i,a,r){this.modalRef=e,this.fb=i,this.cdf=a,this.validatorsService=r}ngOnInit(){this.initForm(),Object.keys(this.params).length>0&&this.addEditForm.patchValue(this.params)}getAsyncFnData(e){return(0,x.of)(e)}getCurrentValue(){return(0,f.r7)(this.addEditForm)?(0,x.of)(this.addEditForm.value):(0,x.of)(!1)}get f(){return this.addEditForm.controls}initForm(){this.addEditForm=this.fb.group({name:[null,[l.kI.required]],dienthoai:[null,[this.validatorsService.mobileValidator()]],diachi:[null],groupid:[null]})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Z.Lf),t.Y36(l.qu),t.Y36(t.sBO),t.Y36(L.S))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-subwindowkhachhang"]],features:[t._Bn([s.z])],decls:23,vars:21,consts:[["nz-form","",3,"formGroup"],["nzRequired","","nzFor","name",3,"nzSm","nzXs"],[3,"nzSm","nzXs","nzErrorTip"],["nz-input","","formControlName","name","id","name","placeholder","T\xean t\xe0i kho\u1ea3n"],["nzRequired","","nzFor","mobile",3,"nzSm","nzXs"],["nz-input","","formControlName","dienthoai","maxlength","11","id","mobile","placeholder","S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"],["nz-input","","formControlName","diachi","maxlength","255","id","diachi","placeholder","\u0110\u1ecba ch\u1ec9"],["nzRequired","","nzFor","groupid",3,"nzSm","nzXs"],["nz-input","","formControlName","groupid","maxlength","20","id","groupid","placeholder","Group id"],["combineTpl",""],[4,"ngIf"]],template:function(e,i){if(1&e&&(t.TgZ(0,"form",0)(1,"nz-form-item")(2,"nz-form-label",1),t._uU(3,"T\xean t\xe0i kho\u1ea3n"),t.qZA(),t.TgZ(4,"nz-form-control",2),t._UZ(5,"input",3),t.qZA()(),t.TgZ(6,"nz-form-item")(7,"nz-form-label",4),t._uU(8,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"),t.qZA(),t.TgZ(9,"nz-form-control",2),t._UZ(10,"input",5),t.qZA()(),t.TgZ(11,"nz-form-item")(12,"nz-form-label",4),t._uU(13,"\u0110\u1ecba ch\u1ec9"),t.qZA(),t.TgZ(14,"nz-form-control",2),t._UZ(15,"input",6),t.qZA()(),t.TgZ(16,"nz-form-item")(17,"nz-form-label",7),t._uU(18,"Group Id"),t.qZA(),t.TgZ(19,"nz-form-control",2),t._UZ(20,"input",8),t.qZA()()(),t.YNc(21,J,2,2,"ng-template",null,9,t.W1O)),2&e){const a=t.MAs(22);t.Q6J("formGroup",i.addEditForm),t.xp6(2),t.Q6J("nzSm",4)("nzXs",24),t.xp6(2),t.Q6J("nzSm",18)("nzXs",24)("nzErrorTip",a),t.xp6(3),t.Q6J("nzSm",4)("nzXs",24),t.xp6(2),t.Q6J("nzSm",18)("nzXs",24)("nzErrorTip",a),t.xp6(3),t.Q6J("nzSm",4)("nzXs",24),t.xp6(2),t.Q6J("nzSm",18)("nzXs",24)("nzErrorTip",a),t.xp6(3),t.Q6J("nzSm",4)("nzXs",24),t.xp6(2),t.Q6J("nzSm",18)("nzXs",24)("nzErrorTip",a)}},dependencies:[p.O5,l._Y,l.Fj,l.JJ,l.JL,l.nD,l.sg,l.u,E.t3,E.SK,S.Lr,S.Nx,S.iK,S.Fd,P.Zp],changeDetection:0}),n})();var I=o(9174);let U=(()=>{class n{constructor(e){this.modalWrapService=e}getContentComponent(){return N}show(e={},i){return this.modalWrapService.show(this.getContentComponent(),e,i)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(I.U))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var B=o(976),K=o(8602);let X=(()=>{class n{constructor(e){this.router=e}static isEmpty(e){return"null"==(e+="")||""==e||"undefined"==e||null==e||null==e||0==e.length}refresh(e){const i=e,a=(0,f.Ve)(i),r=this.router.parseUrl(i).queryParams;this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>{K.E.deleteRouteSnapshot(this.getPathKey(i)),this.router.navigate([a],{queryParams:r})})}getPathKey(e){const i=(0,f.KK)(e),a=this.router.parseUrl(e).queryParams;let r="";return Object.keys(a).length>0&&(r=JSON.stringify(this.router.parseUrl(e).queryParams)),i+r}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(m.F0))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Q=o(9610),Y=o(2802),w=o(5529),W=o(5656),G=o(4178),R=o(1102),H=o(6616),j=o(7044),V=o(1811),$=o(4607);const q=["operationTpl"],tt=["linkidTpl"],et=["sotienno"];function nt(n,h){if(1&n){const e=t.EpF();t.TgZ(0,"span",19)(1,"button",20),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().id,r=t.oxw();return t.KtG(r.edit(a))}),t._uU(2,"C\u1eadp nh\u1eadt"),t.qZA()()}}function ot(n,h){if(1&n){const e=t.EpF();t.TgZ(0,"button",20),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2),r=a.id,z=a.sotienno,v=t.oxw();return t.KtG(v.tattoan(r,z))}),t._uU(1,"T\u1ea5t to\xe1n"),t.qZA()}}function at(n,h){if(1&n&&(t.TgZ(0,"span",19),t.YNc(1,ot,2,0,"button",21),t.qZA()),2&n){const e=t.oxw().sotienno;t.xp6(1),t.Q6J("ngIf",e>0)}}function it(n,h){if(1&n&&(t.YNc(0,nt,3,0,"span",18),t.YNc(1,at,2,1,"span",18)),2&n){const e=t.oxw();t.Q6J("appAuth",e.ActionCode.KhachhangEdit),t.xp6(1),t.Q6J("appAuth",e.ActionCode.KhachhangTattoan)}}function rt(n,h){if(1&n){const e=t.EpF();t.TgZ(0,"a",22),t.NdJ("click",function(){const a=t.CHM(e),r=a.id,z=a.sotienno,v=a.name,M=t.oxw();return t.KtG(M.getItem(r,z,v))}),t.TgZ(1,"span"),t._uU(2),t.qZA()()}if(2&n){const e=h.id;t.xp6(2),t.Oqu(e)}}function st(n,h){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&n){const e=h.sotienno;t.xp6(1),t.Oqu(t.Dn7(2,1,1e3*e,"VND",""))}}const lt=function(){return{"padding-bottom":0}},ht=function(){return{xs:8,sm:16,md:24}},ct=[{path:"",component:(()=>{class n extends k.H{constructor(e,i,a,r,z,v,M,dt,gt,ft,_t){super(e,i,a,r),this.webService=e,this.router=i,this.cdf=a,this.datePipe=r,this.message=z,this.dataService=v,this.modalService=M,this.modalSrv=dt,this.dtoKhService=gt,this.ultilityService=ft,this.nhatkykhService=_t,this.searchParam={},this.dateFormat=g.dateFormat,this.dataList=[],this.checkedCashArray=[],this.ActionCode=_.h,this.phongban_id=g.idKhachhang,this.DisplayScreenID=b.t.spkh00101,this.availableOptions=[],this.pageHeaderInfo={title:"C\xf4ng N\u1ee3 Kh\xe1ch h\xe0ng",breadcrumb:["Home","Kh\xe1ch H\xe0ng","Qu\u1ea3n l\xfd c\xf4ng n\u1ee3"]}}fnInit(){this.cdf.markForCheck()}destroy(){}getDataList(e){this.tableLoading(!0),this.searchParam.phongban_id=this.phongban_id,this.dataService.getlists({pageSize:this.tableConfig.pageSize,pageNum:e?.pageIndex||this.tableConfig.pageIndex,filters:this.searchParam}).pipe((0,T.x)(()=>{this.tableLoading(!1)})).subscribe(a=>{console.log(a);const{list:r,total:z,pageNum:v}=a;this.dataList=[...r],this.tableConfig.total=z,this.tableConfig.pageIndex=v,this.tableLoading(!1),this.checkedCashArray=[...this.checkedCashArray]})}searchName(e){this.tableLoading(!0),this.dataService.searchParams({pageSize:this.tableConfig.pageSize,pageNum:1,filters:e.target.value}).pipe((0,T.x)(()=>{this.tableLoading(!1)})).subscribe(a=>{console.log(a);const{list:r,total:z,pageNum:v}=a;this.dataList=[...r],this.tableConfig.total=z,this.tableConfig.pageIndex=v,this.tableLoading(!1),this.checkedCashArray=[...this.checkedCashArray]})}edit(e){this.dataService.getDetail(e).subscribe(i=>{this.modalService.show({nzTitle:"C\u1eadp nh\u1eadt"},i).subscribe(({modalValue:a,status:r})=>{0!==r&&(a.id=e,this.tableLoading(!0),this.editData(a))})})}editData(e){this.dataService.update(e).pipe((0,T.x)(()=>{this.tableLoading(!1)})).subscribe(()=>{this.getDataList()})}resetForm(){this.searchParam={}}ngOnInit(){this.initTable(),this.availableOptions=[...y.b.transformMapToArray(y.V.available,2)]}reloadTable(){this.message.info("\u0110\xe3 \u0111\u01b0\u1ee3c l\xe0m m\u1edbi"),this.getDataList()}tableChangeDectction(){this.dataList=[...this.dataList],this.cdf.detectChanges()}tableLoading(e){this.tableConfig.loading=e,this.tableChangeDectction()}selectedChecked(e){this.checkedCashArray=[...e]}changePageSize(e){this.tableConfig.pageSize=e}tattoan(e,i){this.modalSrv.confirm({nzTitle:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n t\u1ea5t to\xe1n kh\xf4ng?",nzContent:"Nh\u1ea5n OK \u0111\u1ec3 ho\xe0n th\xe0nh vi\u1ec7c t\u1ea5t to\xe1n",nzOnOk:()=>{this.tableLoading(!0),this.nhatkykhService.tatToan({iduser:e,sotientra:i}).subscribe(()=>{1===this.dataList.length&&this.tableConfig.pageIndex--,this.getDataList(),this.resetForm()},r=>this.tableLoading(!1))}})}getItem(e,i,a){this.dataService.getDetail(e).pipe().subscribe(r=>{this.dtoKhService.kbnflg=!0,this.dtoKhService.id=e,this.dtoKhService.sotienno=r.sotienno,this.dtoKhService.name=a,this.ultilityService.refresh(g.rootbase+b.t.spkh00201)})}initTable(){this.tableConfig={showCheckbox:!1,headers:[{title:"M\xe3 kh\xe1ch h\xe0ng",field:"id",width:180,tdTemplate:this.linkidTpl},{title:"T\xean kh\xe1ch h\xe0ng",width:180,field:"name"},{title:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i",width:120,field:"dienthoai"},{title:"\u0110\u1ecba ch\u1ec9",width:150,field:"diachi"},{title:"GroupId",width:150,field:"groupid"},{title:"S\u1ed1 ti\u1ec1n n\u1ee3",width:100,field:"sotienno",tdTemplate:this.sotienno},{title:"H\xe0nh \u0111\u1ed9ng",tdTemplate:this.operationTpl,width:250,fixed:!0,fixedDir:"right"}],total:0,loading:!0,pageSize:10,pageIndex:1}}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(c.Q),t.Y36(m.F0),t.Y36(t.sBO),t.Y36(p.uU),t.Y36(u.dD),t.Y36(d.T),t.Y36(U),t.Y36(Z.Sf),t.Y36(B.k),t.Y36(X),t.Y36(Q.t))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-spkh00101"]],viewQuery:function(e,i){if(1&e&&(t.Gf(q,7),t.Gf(tt,7),t.Gf(et,7)),2&e){let a;t.iGM(a=t.CRH())&&(i.operationTpl=a.first),t.iGM(a=t.CRH())&&(i.linkidTpl=a.first),t.iGM(a=t.CRH())&&(i.sotienno=a.first)}},features:[t._Bn([s.z]),t.qOj],decls:27,vars:29,consts:[[3,"pageHeaderInfo"],[1,"normal-table-wrap"],["nzHoverable","",1,"m-b-10",3,"nzBodyStyle"],["nz-form",""],["nz-row","",3,"nzGutter"],["nz-col","",3,"nzXXl","nzXl","nzLg","nzMd","nzSm","nzXs"],[3,"nzFor"],["nz-input","","name","text","placeholder","search name",3,"ngModel","ngModelChange","keyup.enter"],["nz-col","",1,"text-right","p-0","m-b-10",3,"nzXXl","nzXl","nzLg","nzMd","nzSm","nzXs"],["nz-button","",3,"nzType","click"],["nz-icon","","nzType","search"],["nz-button","",1,"m-l-15",3,"click"],["nz-icon","","nzType","close-circle","nzTheme","outline"],[3,"tableTitle","reload"],[3,"checkedCashArrayFromComment","tableConfig","tableData","selectedChange","changePageSize","changePageNum"],["operationTpl",""],["linkidTpl",""],["sotienno",""],["class","operate-text",4,"appAuth"],[1,"operate-text"],["nz-button","","nzType","primary","nzGhost","",3,"click"],["nz-button","","nzType","primary","nzGhost","",3,"click",4,"ngIf"],["nz-button","","nzType","link",3,"click"]],template:function(e,i){1&e&&(t._UZ(0,"app-page-header",0),t.TgZ(1,"div",1)(2,"nz-card",2)(3,"form",3)(4,"div",4)(5,"div",5)(6,"nz-form-item")(7,"nz-form-label",6),t._uU(8,"T\xean kh\xe1ch h\xe0ng"),t.qZA(),t.TgZ(9,"nz-form-control")(10,"input",7),t.NdJ("ngModelChange",function(r){return i.searchParam.name=r})("keyup.enter",function(r){return i.searchName(r)}),t.qZA()()()(),t._UZ(11,"div",5),t.TgZ(12,"div",8)(13,"button",9),t.NdJ("click",function(){return i.getDataList()}),t._UZ(14,"i",10),t._uU(15,"T\xecm ki\u1ebfm"),t.qZA(),t.TgZ(16,"button",11),t.NdJ("click",function(){return i.resetForm()}),t._UZ(17,"i",12),t._uU(18,"L\xe0m m\u1edbi"),t.qZA()()()()(),t.TgZ(19,"app-card-table-wrap",13),t.NdJ("reload",function(){return i.reloadTable()}),t.TgZ(20,"app-ant-table",14),t.NdJ("selectedChange",function(r){return i.selectedChecked(r)})("changePageSize",function(r){return i.changePageSize(r)})("changePageNum",function(r){return i.getDataList(r)}),t.qZA(),t.YNc(21,it,2,2,"ng-template",null,15,t.W1O),t.YNc(23,rt,3,1,"ng-template",null,16,t.W1O),t.YNc(25,st,3,5,"ng-template",null,17,t.W1O),t.qZA()()),2&e&&(t.Q6J("pageHeaderInfo",i.pageHeaderInfo),t.xp6(2),t.Q6J("nzBodyStyle",t.DdM(27,lt)),t.xp6(2),t.Q6J("nzGutter",t.DdM(28,ht)),t.xp6(1),t.Q6J("nzXXl",8)("nzXl",8)("nzLg",8)("nzMd",12)("nzSm",24)("nzXs",24),t.xp6(5),t.Q6J("ngModel",i.searchParam.name),t.xp6(1),t.Q6J("nzXXl",8)("nzXl",8)("nzLg",8)("nzMd",12)("nzSm",24)("nzXs",24),t.xp6(1),t.Q6J("nzXXl",8)("nzXl",8)("nzLg",8)("nzMd",12)("nzSm",24)("nzXs",24),t.xp6(1),t.Q6J("nzType","primary"),t.xp6(6),t.Q6J("tableTitle","K\u1ebft qu\u1ea3 t\xecm ki\u1ebfm"),t.xp6(1),t.Q6J("checkedCashArrayFromComment",i.checkedCashArray)("tableConfig",i.tableConfig)("tableData",i.dataList))},dependencies:[p.O5,l._Y,l.Fj,l.JJ,l.JL,l.On,l.F,Y.q,w.q,W.x,G.p,R.Ls,E.t3,E.SK,S.Lr,S.Nx,S.iK,S.Fd,H.ix,j.w,V.dQ,P.Zp,$.bd,p.H9],changeDetection:0}),n})(),data:{title:"C\xf4ng n\u1ee3 kh\xe1ch h\xe0ng",key:"spkh00101"}}];let ut=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[m.Bz.forChild(ct),m.Bz]}),n})();var D=o(6083);let pt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[D.m]}),n})(),mt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[p.ez,ut,pt,D.m]}),n})()},3951:(A,C,o)=>{o.d(C,{H:()=>T});var p=o(1565),m=o(4556),b=o(6895),_=o(4650),k=o(9116);let T=(()=>{class g{constructor(s,t,c,u){this.webService=s,this.router=t,this.cdf=c,this.datePipe=u,this.formItemNm={},this.list=[],this.title="nam pham"}ngOnDestroy(){this.destroy()}ngOnInit(){this.setFormItemNm()}setFormItemNm(){this.webService.PostCallWs(m.Ant100PostUrlParams,{url:this.router.url},t=>{this.list=t,this.list.forEach(c=>{this.formItemNm[c.stt]=c.title1}),this.fnInit()})}getDate(){return this.datePipe.transform(new Date,"yyyy/MM/dd")+""}formatDate(s){return null==s||""==s?"":this.datePipe.transform(s,"yyyy/MM/dd")+""}}return g.\u0275fac=function(s){return new(s||g)(_.Y36(p.Q),_.Y36(k.F0),_.Y36(_.sBO),_.Y36(b.uU))},g.\u0275cmp=_.Xpm({type:g,selectors:[["app-base"]],features:[_._Bn([b.uU])],decls:0,vars:0,template:function(s,t){},encapsulation:2}),g})()}}]);