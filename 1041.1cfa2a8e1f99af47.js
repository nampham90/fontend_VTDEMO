"use strict";(self.webpackChunkng_ant_admin=self.webpackChunkng_ant_admin||[]).push([[1041],{11041:(vn,z,l)=>{l.r(z),l.d(z,{Spch00255Module:()=>Sn});var d=l(9116),C=l(15861),x=l(22155),X=l(13951),b=l(44556),M=l(22195),v=l(17489),y=l.n(v),A=l(28746),n=l(94650),Z=l(91565),_=l(36895),J=l(99651),D=l(35568),N=l(98559),E=l(49651),Q=l(50007),L=l(79213),F=l(70629),p=l(24006),O=l(32802),P=l(5529),Y=l(35656),k=l(94178),H=l(21102),f=l(73679),h=l(36704),U=l(66616),B=l(47044),I=l(21811),T=l(35635),G=l(51971),S=l(48521),w=l(834),K=l(39597);const W=["operationTpl"],R=["nguonxeTpl"],j=["status02Tpl"],V=["endSoplnDate"];function $(a,s){if(1&a){const e=n.EpF();n.TgZ(0,"button",33),n.NdJ("click",function(){n.CHM(e);const o=n.oxw();return n.KtG(o.showVideo())}),n._UZ(1,"span",34),n._uU(2,"H\u01b0\u1edbng d\u1eabn "),n.qZA()}2&a&&n.Q6J("nzSize","large")}function q(a,s){if(1&a){const e=n.EpF();n.TgZ(0,"button",35),n.NdJ("click",function(){n.CHM(e);const o=n.oxw();return n.KtG(o.searchNguonXeClick())}),n._UZ(1,"span",14),n.qZA()}2&a&&n.Q6J("nzType","primary")}function nn(a,s){if(1&a&&(n.TgZ(0,"span"),n._uU(1),n.qZA()),2&a){const e=s.nguonxe;n.xp6(1),n.AsE("",e.datacd,"-",e.datanm,"")}}function tn(a,s){if(1&a){const e=n.EpF();n.ynx(0),n.TgZ(1,"button",40),n.NdJ("click",function(){n.CHM(e);const o=n.oxw(2).id,i=n.oxw();return n.KtG(i.exportPDF(o))}),n._uU(2,"Xu\u1ea5t PDF"),n.qZA(),n.BQk()}2&a&&(n.xp6(1),n.Q6J("disabled",!0))}function en(a,s){if(1&a){const e=n.EpF();n.TgZ(0,"button",41),n.NdJ("click",function(){n.CHM(e);const o=n.oxw(2).id,i=n.oxw();return n.KtG(i.exportPDF(o))}),n._uU(1,"Xu\u1ea5t PDF"),n.qZA()}}function an(a,s){if(1&a&&(n.TgZ(0,"span",37),n.YNc(1,tn,3,1,"ng-container",38),n.YNc(2,en,2,0,"ng-template",null,39,n.W1O),n.qZA()),2&a){const e=n.MAs(3),t=n.oxw().status02;n.xp6(1),n.Q6J("ngIf",1==t)("ngIfElse",e)}}function on(a,s){if(1&a){const e=n.EpF();n.ynx(0),n.TgZ(1,"button",40),n.NdJ("click",function(){n.CHM(e);const o=n.oxw(2).id,i=n.oxw();return n.KtG(i.thanhtoan(o))}),n._uU(2,"Th\xe1nh To\xe1n"),n.qZA(),n.BQk()}2&a&&(n.xp6(1),n.Q6J("disabled",!0))}function ln(a,s){if(1&a){const e=n.EpF();n.TgZ(0,"button",41),n.NdJ("click",function(){n.CHM(e);const o=n.oxw(2).id,i=n.oxw();return n.KtG(i.thanhtoan(o))}),n._uU(1,"Th\xe1nh To\xe1n"),n.qZA()}}function sn(a,s){if(1&a&&(n.TgZ(0,"span",37),n.YNc(1,on,3,1,"ng-container",38),n.YNc(2,ln,2,0,"ng-template",null,39,n.W1O),n.qZA()),2&a){const e=n.MAs(3),t=n.oxw().status02;n.xp6(1),n.Q6J("ngIf",1==t)("ngIfElse",e)}}function rn(a,s){if(1&a&&(n.YNc(0,an,4,2,"span",36),n.YNc(1,sn,4,2,"span",36)),2&a){const e=n.oxw();n.Q6J("appAuth",e.ActionCode.Xuatpdfchuyenngoai),n.xp6(1),n.Q6J("appAuth",e.ActionCode.Thanhtoanchuyenngoai)}}function pn(a,s){1&a&&(n.ynx(0),n.TgZ(1,"span"),n._uU(2,"Ch\u01b0a thanh to\xe1n"),n.qZA(),n.BQk())}function cn(a,s){1&a&&(n.TgZ(0,"span"),n._uU(1,"\u0110\xe3 thanh to\xe1n"),n.qZA())}function hn(a,s){if(1&a&&(n.YNc(0,pn,3,0,"ng-container",38),n.YNc(1,cn,2,0,"ng-template",null,44,n.W1O)),2&a){const e=n.MAs(2),t=n.oxw().status02;n.Q6J("ngIf",0==t)("ngIfElse",e)}}function gn(a,s){if(1&a&&(n._UZ(0,"nz-alert",42),n.YNc(1,hn,3,2,"ng-template",null,43,n.W1O)),2&a){const e=n.MAs(2);n.Q6J("nzMessage",e)}}function dn(a,s){}const un=function(){return{"padding-bottom":0}},u=function(){return{xs:8,sm:16,md:24}},mn=[{path:"",component:(()=>{class a extends X.H{constructor(e,t,o,i,r,g,Cn,xn,Xn,bn,Mn){super(e,t,o,i,r,g),this.webService=e,this.router=t,this.cdf=o,this.datePipe=i,this.tabService=r,this.modalVideoyoutube=g,this.dataService=Cn,this.message=xn,this.modalSrv=Xn,this.pdfService=bn,this.modalNguonXeService=Mn,this.DisplayScreenID=x.t.spch00255,this.searchParam={},this.dateFormat=b.dateFormat,this.dataList=[],this.checkedCashArray=[],this.ActionCode=M.h,this.availableOptions=[],this.pageHeaderInfo={title:"Thanh to\xe1n chuy\u1ebfn ngo\xe0i",breadcrumb:["Home","Chuy\u1ebfn","Thanh to\xe1n chuy\u1ebfn ngo\xe0i"],desc:""},this.nguonxenm="",this.stocknx="",this.ngaybatdau=null,this.ngayketthuc=null,this.disabledStartSoplnDate=c=>{if(!c||!this.ngayketthuc)return!1;const m=new Date(this.ngayketthuc);return c.getTime()>m.getTime()},this.disabledEndSoplnDate=c=>{if(!c||!this.ngaybatdau)return!1;const m=new Date(this.ngaybatdau);return c.getTime()<=m.getTime()}}fnInit(){}destroy(){}handleStartOpenSoplnChange(e){e||this.endSoplnDate.open()}handleEndOpenSoplnChange(e){}ngOnInit(){this.searchParam.status02="0",this.initTable()}getDataList(e){this.tableLoading(!0),this.searchParam.ngaybatdau=this.formatDate(this.ngaybatdau),this.searchParam.ngayketthuc=this.formatDate(this.ngayketthuc),this.searchParam.status02=y().toNumber(this.searchParam.status02),this.dataService.postAll({pageSize:this.tableConfig.pageSize,pageNum:e?.pageIndex||this.tableConfig.pageIndex,filters:this.searchParam}).pipe((0,A.x)(()=>{this.tableLoading(!1)})).subscribe(o=>{const{list:i,total:r,pageNum:g}=o;this.dataList=[...i],this.tableConfig.total=r,this.tableConfig.pageIndex=g,this.tableLoading(!1),this.checkedCashArray=[...this.checkedCashArray],this.searchParam.status02=this.searchParam.status02+""})}reloadTable(){this.message.info("\u0110\xe3 \u0111\u01b0\u1ee3c l\xe0m m\u1edbi"),this.getDataList()}tableChangeDectction(){this.dataList=[...this.dataList],this.cdf.detectChanges()}tableLoading(e){this.tableConfig.loading=e,this.tableChangeDectction()}selectedChecked(e){this.checkedCashArray=[...e]}changePageSize(e){this.tableConfig.pageSize=e}resetForm(){this.searchParam={},this.searchParam.status02=0,this.nguonxenm="",this.getDataList()}searchNguonXeClick(){this.modalNguonXeService.show({nzTitle:"Danh S\xe1ch Ngu\u1ed3n Xe"},{showcomfirm:!1}).subscribe(e=>{if(!e||0===e.status)return;const t={...e.modalValue};this.searchParam.nguonxe=t.id,this.stocknx=t.id,this.nguonxenm=t.datacd,this.getDataList()})}fnFocusOutNguonxe(){this.searchParam.nguonxe!=this.stocknx&&(this.nguonxenm="")}exportPDF(e){var t=this;this.dataService.postDetail({id:e}).pipe().subscribe(function(){var o=(0,C.Z)(function*(i){if(i){let r=i.sohdttxn;t.pdfService.clearHeader(),yield t.pdfService.exportPDF(i.header,i.lstheader,i.lstdata,i.title,t.getDate(),"BVC k\xfd x\xe1c nh\u1eadn","BTT k\xfd x\xe1c nh\u1eadn",r)}else t.modalSrv.error({nzTitle:"L\u1ed7i h\u1ec7 th\u1ed1ng ! vui long li\xean h\u1ec7 b\u1ed9 ph\u1eadn k\u1ef7 thu\u1eadt"})});return function(i){return o.apply(this,arguments)}}())}thanhtoan(e){this.modalSrv.confirm({nzTitle:"B\u1ea1n ch\u1eafc ch\u1eafn mu\u1ed1n th\xe1nh to\xe1n \u0111\u01a1n n\xe0y kh\xf4ng ?",nzContent:"Nh\u1ea5n OK \u0111\u1ec3 ti\u1ebfp t\u1ee5c !",nzOnOk:()=>{this.dataService.postUpdateStatus({id:e}).pipe().subscribe(t=>{1==t?(this.getDataList(),this.message.success("Thanh to\xe1n th\xe0nh c\xf4ng")):this.message.error("L\u1ed7i h\u1ec7 th\u1ed1ng. Vui l\xf2ng li\xean h\u1ec7 k\u1ef7 thu\u1eadt")})}})}initTable(){this.tableConfig={showCheckbox:!1,headers:[{title:"Ng\xe0y Xu\u1ea5t",field:"ngayxuat",width:200,pipe:"date: dd/MM/YYYY HH:mm"},{title:"S\u1ed1 HDTTXN",width:300,field:"sohdttxn"},{title:"Ngu\u1ed3n xe",width:300,field:"nguonxe",tdTemplate:this.nguonxeTpl},{title:"Tr\u1ea1ng thai",width:200,field:"status02",tdTemplate:this.status02Tpl},{title:"S\u1ed1 l\u1ea7n xu\u1ea5t PDF",width:200,field:"status01"},{title:"Ghi ch\xfa",width:150,field:"ghichu"},{title:"H\xe0nh \u0111\u1ed9ng",tdTemplate:this.operationTpl,width:200,fixed:!0,fixedDir:"right"}],total:0,loading:!0,pageSize:10,pageIndex:1}}}return a.\u0275fac=function(e){return new(e||a)(n.Y36(Z.Q),n.Y36(d.F0),n.Y36(n.sBO),n.Y36(_.uU),n.Y36(J.p),n.Y36(D.L),n.Y36(N.I),n.Y36(E.dD),n.Y36(Q.Sf),n.Y36(L.j),n.Y36(F.q))},a.\u0275cmp=n.Xpm({type:a,selectors:[["app-spch00255"]],viewQuery:function(e,t){if(1&e&&(n.Gf(W,7),n.Gf(R,7),n.Gf(j,7),n.Gf(V,5)),2&e){let o;n.iGM(o=n.CRH())&&(t.operationTpl=o.first),n.iGM(o=n.CRH())&&(t.nguonxeTpl=o.first),n.iGM(o=n.CRH())&&(t.status02Tpl=o.first),n.iGM(o=n.CRH())&&(t.endSoplnDate=o.first)}},features:[n.qOj],decls:68,vars:127,consts:[[3,"pageHeaderInfo","extraTpl"],["huongdanTpl",""],[1,"normal-table-wrap"],["nzHoverable","",1,"m-b-10",3,"nzBodyStyle"],["nz-form",""],["nz-row","",3,"nzGutter"],["nz-col","",3,"nzXXl","nzXl","nzLg","nzMd","nzSm","nzXs"],[3,"nzXXl","nzXl","nzLg","nzMd","nzSm","nzXs","nzFor"],[3,"nzXXl","nzXl","nzLg","nzMd","nzSm","nzXs"],["name","ngaybatdau",3,"nzDisabledDate","nzFormat","ngModel","nzPlaceHolder","ngModelChange","nzOnOpenChange"],["name","ngayketthuc",3,"nzDisabledDate","nzFormat","ngModel","nzPlaceHolder","ngModelChange","nzOnOpenChange"],["endSoplnDate",""],["nz-col","",1,"text-right","p-0","m-b-10",3,"nzXXl","nzXl","nzLg","nzMd","nzSm","nzXs"],["nz-button","",3,"nzType","click"],["nz-icon","","nzType","search"],["nz-button","",1,"m-l-15",3,"click"],["nz-icon","","nzType","close-circle","nzTheme","outline"],["nz-col","",1,"inputIcon",3,"nzXXl","nzXl","nzLg","nzMd","nzSm","nzXs"],["nzSearch","",3,"nzAddOnAfter"],["name","idtai","type","text","nz-input","","placeholder","",3,"ngModel","ngModelChange","blur"],["suffixIconButtonTaixe",""],["nzFor","",1,"fix-inputIcon",3,"nzNoColon"],["id","status02","name","status02",3,"ngModel","ngModelChange"],["nz-radio","","nzValue","0"],["nz-radio","","nzValue","1"],[3,"nzXXl","nzXl","nzLg","nzMd","nzSm","nzXs","nzErrorTip"],["nz-input","","name","sohdttxn","id","sohdttxn","placeholder","",3,"ngModel","ngModelChange"],[3,"tableTitle","btnTpl","reload"],[3,"checkedCashArrayFromComment","tableConfig","tableData","selectedChange","changePageSize","changePageNum"],["nguonxeTpl",""],["operationTpl",""],["status02Tpl",""],["tableBtns",""],["nz-button","","nzType","primary","nzShape","round",3,"nzSize","click"],["nz-icon","","nzType","star","nzTheme","outline"],["nz-button","",1,"bg-icon",3,"nzType","click"],["class","operate-text",4,"appAuth"],[1,"operate-text"],[4,"ngIf","ngIfElse"],["Cth",""],["nz-button","","nzType","primary","nzGhost","",3,"disabled","click"],["nz-button","","nzType","primary","nzGhost","",3,"click"],["nzType","warning",3,"nzMessage"],["Status02",""],["Dathanhtoan",""]],template:function(e,t){if(1&e&&(n._UZ(0,"app-page-header",0),n.YNc(1,$,3,1,"ng-template",null,1,n.W1O),n.TgZ(3,"div",2)(4,"nz-card",3)(5,"form",4)(6,"div",5)(7,"div",6)(8,"nz-form-item")(9,"nz-form-label",7),n._uU(10,"Ng\xe0y b\u1eaft \u0111\u1ea7u"),n.qZA(),n.TgZ(11,"nz-form-control",8)(12,"nz-date-picker",9),n.NdJ("ngModelChange",function(i){return t.ngaybatdau=i})("nzOnOpenChange",function(i){return t.handleStartOpenSoplnChange(i)}),n.qZA()()()(),n.TgZ(13,"div",6)(14,"nz-form-item")(15,"nz-form-label",7),n._uU(16,"Ng\xe0y k\u1ebft th\xfac"),n.qZA(),n.TgZ(17,"nz-form-control",8)(18,"nz-date-picker",10,11),n.NdJ("ngModelChange",function(i){return t.ngayketthuc=i})("nzOnOpenChange",function(i){return t.handleEndOpenSoplnChange(i)}),n.qZA()()()(),n.TgZ(20,"div",12)(21,"button",13),n.NdJ("click",function(){return t.getDataList()}),n._UZ(22,"i",14),n._uU(23," T\xecm ki\u1ebfm "),n.qZA(),n.TgZ(24,"button",15),n.NdJ("click",function(){return t.resetForm()}),n._UZ(25,"i",16),n._uU(26," L\xe0m m\u1edbi "),n.qZA()()(),n.TgZ(27,"div",5)(28,"div",17)(29,"nz-form-item")(30,"nz-form-label",8),n._uU(31,"Ngu\u1ed3n xe"),n.qZA(),n.TgZ(32,"nz-form-control",8)(33,"nz-input-group",18)(34,"input",19),n.NdJ("ngModelChange",function(i){return t.searchParam.nguonxe=i})("blur",function(){return t.fnFocusOutNguonxe()}),n.qZA()(),n.YNc(35,q,2,1,"ng-template",null,20,n.W1O),n.TgZ(37,"nz-form-label",21)(38,"span")(39,"u"),n._uU(40),n.qZA()()()()()(),n.TgZ(41,"div",6)(42,"nz-form-item")(43,"nz-form-label",8),n._uU(44,"Tr\u1ea1ng th\xe1i"),n.qZA(),n.TgZ(45,"nz-form-control",8)(46,"nz-radio-group",22),n.NdJ("ngModelChange",function(i){return t.searchParam.status02=i}),n.TgZ(47,"label",23),n._uU(48," Ch\u01b0a thanh to\xe1n "),n.qZA(),n.TgZ(49,"label",24),n._uU(50," \u0110\xe3 thanh to\xe1n"),n.qZA()()()()()(),n.TgZ(51,"div",5)(52,"div",6)(53,"nz-form-item")(54,"nz-form-label",7),n._uU(55,"S\u1ed1 HDTTXN"),n.qZA(),n.TgZ(56,"nz-form-control",25)(57,"input",26),n.NdJ("ngModelChange",function(i){return t.searchParam.sohdttxn=i}),n.qZA()()()()()()(),n.TgZ(58,"app-card-table-wrap",27),n.NdJ("reload",function(){return t.reloadTable()}),n.TgZ(59,"app-ant-table",28),n.NdJ("selectedChange",function(i){return t.selectedChecked(i)})("changePageSize",function(i){return t.changePageSize(i)})("changePageNum",function(i){return t.getDataList(i)}),n.qZA(),n.YNc(60,nn,2,2,"ng-template",null,29,n.W1O),n.YNc(62,rn,2,2,"ng-template",null,30,n.W1O),n.YNc(64,gn,3,1,"ng-template",null,31,n.W1O),n.qZA(),n.YNc(66,dn,0,0,"ng-template",null,32,n.W1O),n.qZA()),2&e){const o=n.MAs(2),i=n.MAs(36),r=n.MAs(67);n.Q6J("pageHeaderInfo",t.pageHeaderInfo)("extraTpl",o),n.xp6(4),n.Q6J("nzBodyStyle",n.DdM(123,un)),n.xp6(2),n.Q6J("nzGutter",n.DdM(124,u)),n.xp6(1),n.Q6J("nzXXl",8)("nzXl",8)("nzLg",8)("nzMd",12)("nzSm",24)("nzXs",24),n.xp6(2),n.Q6J("nzXXl",9)("nzXl",9)("nzLg",9)("nzMd",12)("nzSm",24)("nzXs",24),n.xp6(2),n.Q6J("nzXXl",12)("nzXl",12)("nzLg",12)("nzMd",12)("nzSm",24)("nzXs",24),n.xp6(1),n.Q6J("nzDisabledDate",t.disabledStartSoplnDate)("nzFormat",t.dateFormat)("ngModel",t.ngaybatdau)("nzPlaceHolder",t.dateFormat),n.xp6(1),n.Q6J("nzXXl",8)("nzXl",8)("nzLg",8)("nzMd",12)("nzSm",24)("nzXs",24),n.xp6(2),n.Q6J("nzXXl",9)("nzXl",9)("nzLg",9)("nzMd",12)("nzSm",24)("nzXs",24),n.xp6(2),n.Q6J("nzXXl",12)("nzXl",12)("nzLg",12)("nzMd",12)("nzSm",24)("nzXs",24),n.xp6(1),n.Q6J("nzDisabledDate",t.disabledEndSoplnDate)("nzFormat",t.dateFormat)("ngModel",t.ngayketthuc)("nzPlaceHolder",t.dateFormat),n.xp6(2),n.Q6J("nzXXl",8)("nzXl",8)("nzLg",8)("nzMd",12)("nzSm",24)("nzXs",24),n.xp6(1),n.Q6J("nzType","primary"),n.xp6(6),n.Q6J("nzGutter",n.DdM(125,u)),n.xp6(1),n.Q6J("nzXXl",8)("nzXl",8)("nzLg",8)("nzMd",12)("nzSm",24)("nzXs",24),n.xp6(2),n.Q6J("nzXXl",9)("nzXl",9)("nzLg",9)("nzMd",12)("nzSm",24)("nzXs",24),n.xp6(2),n.Q6J("nzXXl",10)("nzXl",10)("nzLg",10)("nzMd",10)("nzSm",20)("nzXs",24),n.xp6(1),n.Q6J("nzAddOnAfter",i),n.xp6(1),n.Q6J("ngModel",t.searchParam.nguonxe),n.xp6(3),n.Q6J("nzNoColon",!0),n.xp6(3),n.Oqu(t.nguonxenm),n.xp6(1),n.Q6J("nzXXl",8)("nzXl",8)("nzLg",8)("nzMd",12)("nzSm",24)("nzXs",24),n.xp6(2),n.Q6J("nzXXl",9)("nzXl",9)("nzLg",9)("nzMd",12)("nzSm",24)("nzXs",24),n.xp6(2),n.Q6J("nzXXl",15)("nzXl",15)("nzLg",15)("nzMd",15)("nzSm",24)("nzXs",24),n.xp6(1),n.Q6J("ngModel",t.searchParam.status02),n.xp6(5),n.Q6J("nzGutter",n.DdM(126,u)),n.xp6(1),n.Q6J("nzXXl",8)("nzXl",8)("nzLg",8)("nzMd",12)("nzSm",24)("nzXs",24),n.xp6(2),n.Q6J("nzXXl",9)("nzXl",9)("nzLg",9)("nzMd",12)("nzSm",24)("nzXs",24),n.xp6(2),n.Q6J("nzXXl",12)("nzXl",12)("nzLg",12)("nzMd",12)("nzSm",24)("nzXs",24)("nzErrorTip",""),n.xp6(1),n.Q6J("ngModel",t.searchParam.sohdttxn),n.xp6(1),n.Q6J("tableTitle","K\u1ebft qu\u1ea3 t\xecm ki\u1ebfm")("btnTpl",r),n.xp6(1),n.Q6J("checkedCashArrayFromComment",t.checkedCashArray)("tableConfig",t.tableConfig)("tableData",t.dataList)}},dependencies:[_.O5,p._Y,p.Fj,p.JJ,p.JL,p.On,p.F,O.q,P.q,Y.x,k.p,H.Ls,f.t3,f.SK,h.Lr,h.Nx,h.iK,h.Fd,U.ix,B.w,I.dQ,T.Zp,T.gB,G.bd,S.Of,S.Dg,w.uw,K.r]}),a})(),data:{title:"Thanh to\xe1n xe ngo\xe0i",key:"spch00255"}}];let zn=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=n.oAB({type:a}),a.\u0275inj=n.cJS({imports:[d.Bz.forChild(mn),d.Bz]}),a})();var _n=l(5316),fn=l(79962),Tn=l(30804);let Sn=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=n.oAB({type:a}),a.\u0275inj=n.cJS({imports:[_n.m,zn,fn.a,Tn.A]}),a})()}}]);