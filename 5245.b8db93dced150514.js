"use strict";(self.webpackChunkng_ant_admin=self.webpackChunkng_ant_admin||[]).push([[5245],{5245:(Nn,S,h)=>{h.r(S),h.d(S,{Spch00201Module:()=>Jn});var D=h(7218),g=h(9116),J=h(3951),r=h(4556),Q=h(2195),x=h(8877),M=h(8176),w=h(2155),f=h(8746),T=h(9523),n=h(4650),L=h(1565),p=h(6895),F=h(8313),l=h(4006),C=h(9646),X=h(7),U=h(9454),z=h(3679),d=h(6704),y=h(5635),A=h(8231),E=h(8521),N=h(7096);const q=function(){return{background:"#555555"}};function k(e,s){1&e&&(n.ynx(0),n.TgZ(1,"nz-form-item")(2,"nz-form-label",23),n._uU(3,"M\xe3 Phi\u1ebfu Nh\u1eadp"),n.qZA(),n.TgZ(4,"nz-form-control",14),n._UZ(5,"input",24),n.qZA()(),n.BQk()),2&e&&(n.xp6(2),n.Q6J("nzSm",6)("nzXs",24),n.xp6(2),n.Q6J("nzSm",18)("nzXs",24),n.xp6(1),n.Q6J("readonly",!0)("ngStyle",n.DdM(6,q)))}function K(e,s){if(1&e&&n._UZ(0,"nz-option",25),2&e){const t=s.$implicit;n.Q6J("nzValue",t.id)("nzLabel",t.name)}}const I=function(){return{minRows:2,maxRows:6}};let Y=(()=>{class e{constructor(t,i,o,a){this.modalRef=t,this.fb=i,this.cdf=o,this.dataKhachhangService=a,this.isEdit=!1,this.const=r,this.listKh=[],this.tenkhachhang="",this.params={}}ngOnInit(){this.getListKh(),this.initForm(),Object.keys(this.params).length>0&&(this.isEdit=!0,this.addEditForm.patchValue(this.params))}getAsyncFnData(t){return(0,C.of)(t)}getCurrentValue(){return(0,T.r7)(this.addEditForm)?(this.addEditForm.value.tenkhachhang=this.tenkhachhang,(0,C.of)(this.addEditForm.value)):(0,C.of)(!1)}initForm(){this.addEditForm=this.fb.group({id:[null],iduser:[null,[l.kI.required]],noidungdonhang:[null,[l.kI.required]],tiencuoc:[0,[l.kI.required]],diadiembochang:[null,[l.kI.required]],hinhthucthanhtoan:["1",[l.kI.required]],lotrinh:["0",[l.kI.required]],ghichu:[null]})}changeKH(t){for(let i of this.listKh)if(i.id==t){this.tenkhachhang=i.name;break}}getListKh(){this.dataKhachhangService.getAccount({pageSize:0,pageNum:0,filters:{phongban_id:this.const.idKhachhang}}).pipe((0,f.x)(()=>{})).subscribe(i=>{this.listKh=i,this.cdf.markForCheck()})}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(X.Lf),n.Y36(l.qu),n.Y36(n.sBO),n.Y36(U.B))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-subwindowproduct"]],decls:48,vars:36,consts:[["nz-form","",3,"formGroup"],[4,"ngIf"],["nzRequired","","nzFor","iduser",3,"nzSm","nzXs"],["nzErrorTip","Vui l\xf2ng ch\u1ecdn T\xe0i ph\u1ee5",3,"nzSm","nzXs"],["name","iduser","id","iduser","formControlName","iduser","nzAllowClear","","nzShowSearch","","nzPlaceHolder","Select",3,"ngModelChange"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nzRequired","","nzFor","noidungdonhang",3,"nzSm","nzXs"],["nzErrorTip","Vui l\xf2ng nh\u1eadp n\u1ed9i dung \u0111\u01a1n h\xe0ng",3,"nzSm","nzXs"],["nz-input","","formControlName","noidungdonhang","name","noidungdonhang","placeholder","","id","noidungdonhang"],["nzRequired","","nzFor","trongtai",3,"nzSm","nzXs"],["nzErrorTip","Vui l\xf2ng nh\u1eadp ti\u1ec1n c\u01b0\u1edbc",3,"nzSm","nzXs"],["name","tiencuoc","id","tiencuoc","formControlName","tiencuoc",3,"nzMin","nzMax","nzStep"],["nzErrorTip","Vui l\xf2ng nh\u1eadp \u0111\u1ecba \u0111i\u1ec3m b\xf3c h\xe0ng",3,"nzSm","nzXs"],["nz-input","","formControlName","diadiembochang","name","diadiembochang","placeholder","","id","diadiembochang"],["nzErrorTip","",3,"nzSm","nzXs"],["formControlName","hinhthucthanhtoan"],["nz-radio","","nzValue","1"],["nz-radio","","nzValue","2"],["nz-radio","","nzValue","3"],["formControlName","lotrinh"],["nz-radio","","nzValue","0"],["nzFor","ghichu",3,"nzSm","nzXs"],["nz-input","","formControlName","ghichu","placeholder","M\u1ed1t s\u1ed1 ghi ch\xfa v\u1ec1 th\xf4ng tin \u0111\u01a1n h\xe0ng.",3,"nzAutosize"],["nzRequired","","nzFor","id",3,"nzSm","nzXs"],["nz-input","","formControlName","id","name","id","placeholder","","id","id",3,"readonly","ngStyle"],[3,"nzValue","nzLabel"]],template:function(t,i){1&t&&(n.TgZ(0,"form",0),n.YNc(1,k,6,7,"ng-container",1),n.TgZ(2,"nz-form-item")(3,"nz-form-label",2),n._uU(4,"Id Kh\xe1ch h\xe0ng"),n.qZA(),n.TgZ(5,"nz-form-control",3)(6,"nz-select",4),n.NdJ("ngModelChange",function(a){return i.changeKH(a)}),n.YNc(7,K,1,2,"nz-option",5),n.qZA()()(),n.TgZ(8,"nz-form-item")(9,"nz-form-label",6),n._uU(10,"N\u1ed9i dung \u0111\u01a1n h\xe0ng"),n.qZA(),n.TgZ(11,"nz-form-control",7),n._UZ(12,"input",8),n.qZA()(),n.TgZ(13,"nz-form-item")(14,"nz-form-label",9),n._uU(15,"Ti\u1ec1n c\u01b0\u1edbc"),n.qZA(),n.TgZ(16,"nz-form-control",10),n._UZ(17,"nz-input-number",11),n.qZA()(),n.TgZ(18,"nz-form-item")(19,"nz-form-label",9),n._uU(20,"\u0110\u1ecba \u0111i\u1ec3m b\xf3c h\xe0ng"),n.qZA(),n.TgZ(21,"nz-form-control",12),n._UZ(22,"input",13),n.qZA()(),n.TgZ(23,"nz-form-item")(24,"nz-form-label",9),n._uU(25,"H\xecnh th\u1ee9c thanh to\xe1n"),n.qZA(),n.TgZ(26,"nz-form-control",14)(27,"nz-radio-group",15)(28,"label",16),n._uU(29,"Tr\u1ef1c ti\u1ebfp"),n.qZA(),n.TgZ(30,"label",17),n._uU(31,"Ghi n\u1ee3"),n.qZA(),n.TgZ(32,"label",18),n._uU(33,"Khi nh\u1eadn h\xe0ng"),n.qZA()()()(),n.TgZ(34,"nz-form-item")(35,"nz-form-label",9),n._uU(36,"L\u1ed9 tr\xecnh"),n.qZA(),n.TgZ(37,"nz-form-control",14)(38,"nz-radio-group",19)(39,"label",20),n._uU(40,"H\xe0ng \u0111i"),n.qZA(),n.TgZ(41,"label",16),n._uU(42,"H\xe0ng v\u1ec1"),n.qZA()()()(),n.TgZ(43,"nz-form-item")(44,"nz-form-label",21),n._uU(45,"Ghi ch\xfa"),n.qZA(),n.TgZ(46,"nz-form-control",14),n._UZ(47,"textarea",22),n.qZA()()()),2&t&&(n.Q6J("formGroup",i.addEditForm),n.xp6(1),n.Q6J("ngIf",i.isEdit),n.xp6(2),n.Q6J("nzSm",6)("nzXs",24),n.xp6(2),n.Q6J("nzSm",18)("nzXs",24),n.xp6(2),n.Q6J("ngForOf",i.listKh),n.xp6(2),n.Q6J("nzSm",6)("nzXs",24),n.xp6(2),n.Q6J("nzSm",18)("nzXs",24),n.xp6(3),n.Q6J("nzSm",6)("nzXs",24),n.xp6(2),n.Q6J("nzSm",18)("nzXs",24),n.xp6(1),n.Q6J("nzMin",100)("nzMax",5e4)("nzStep",100),n.xp6(2),n.Q6J("nzSm",6)("nzXs",24),n.xp6(2),n.Q6J("nzSm",18)("nzXs",24),n.xp6(3),n.Q6J("nzSm",6)("nzXs",24),n.xp6(2),n.Q6J("nzSm",18)("nzXs",24),n.xp6(9),n.Q6J("nzSm",6)("nzXs",24),n.xp6(2),n.Q6J("nzSm",18)("nzXs",24),n.xp6(7),n.Q6J("nzSm",6)("nzXs",24),n.xp6(2),n.Q6J("nzSm",18)("nzXs",24),n.xp6(1),n.Q6J("nzAutosize",n.DdM(35,I)))},dependencies:[p.sg,p.O5,p.PC,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,z.t3,z.SK,d.Lr,d.Nx,d.iK,d.Fd,y.Zp,y.rh,A.Ip,A.Vq,E.Of,E.Dg,N._V]}),e})();var B=h(9174);let G=(()=>{class e{constructor(t){this.modalWrapService=t}getContentComponent(){return Y}show(t={},i){return this.modalWrapService.show(this.getContentComponent(),t,i)}}return e.\u0275fac=function(t){return new(t||e)(n.LFG(B.U))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var P=h(9386),H=h(2996),Z=h(4246);let O=(()=>{class e{constructor(t){this.http=t}getlists(t){return this.http.post(r.PhieunhaphangAnt100GetAll,t,{needSuccessInfo:!1})}getDetail(t){return this.http.get(`${r.PhieunhaphangAnt100Get}/${t}/`)}create(t){return this.http.post(r.PhieunhaphangAnt100Create,t,{needSuccessInfo:!1})}update(t){return this.http.put(r.PhieunhaphangAnt100Update,t)}delete(t){return this.http.post(r.PhieunhaphangAnt100Delete,{ids:t},{needSuccessInfo:!0})}delates(){}}return e.\u0275fac=function(t){return new(t||e)(n.LFG(Z.q))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),V=(()=>{class e{constructor(t,i){this.http=t,this.router=i}getlists(t){return this.http.post(r.ChiphichuyenAnt100GetAll,t,{needSuccessInfo:!1})}getDetail(t){return this.http.get(`${r.ChiphichuyenAnt100Get}/${t}/`)}create(t){return this.http.post(r.ChiphichuyenAnt100Create,t,{needSuccessInfo:!1})}update(t){return this.http.put(r.ChiphichuyenAnt100Update,t)}updateList(t){return this.http.post(r.ChiphichuyenAnt100UpdateList,t,{needSuccessInfo:!1})}delete(t){return this.http.post(r.ChiphichuyenAnt100Delete,{ids:t},{needSuccessInfo:!0})}delates(){}}return e.\u0275fac=function(t){return new(t||e)(n.LFG(Z.q),n.LFG(g.F0))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var R=h(2704),W=h(9651),j=h(2802),$=h(5529),nn=h(5656),tn=h(4178),en=h(1102),on=h(6616),hn=h(7044),an=h(1811),sn=h(4607);const cn=["operationTpl"],rn=["tiencuocTpl"];function ln(e,s){if(1&e){const t=n.EpF();n.ynx(0),n.TgZ(1,"button",16),n.NdJ("click",function(){n.CHM(t);const o=n.oxw();return n.KtG(o.selectChuyen())}),n._uU(2,"Ch\u1ecdn Chuy\u1ebfn"),n.qZA(),n.BQk()}}const u=function(){return{color:"#177ddc"}};function un(e,s){if(1&e&&(n.TgZ(0,"span",9),n._uU(1),n.qZA()),2&e){const t=n.oxw();n.Q6J("ngStyle",n.DdM(2,u)),n.xp6(1),n.Oqu(t.ChuyenDto.id)}}function pn(e,s){if(1&e){const t=n.EpF();n.TgZ(0,"span",18)(1,"button",19),n.NdJ("click",function(){n.CHM(t);const o=n.oxw().id,a=n.oxw();return n.KtG(a.edit(o))}),n._uU(2,"C\u1eadp nh\u1eadt"),n.qZA()()}if(2&e){const t=n.oxw(2);n.xp6(1),n.Q6J("disabled",t.btnUpdate)}}function dn(e,s){if(1&e){const t=n.EpF();n.TgZ(0,"span",18)(1,"button",19),n.NdJ("click",function(){n.CHM(t);const o=n.oxw().id,a=n.oxw();return n.KtG(a.del(o))}),n._uU(2,"X\xf3a"),n.qZA()()}if(2&e){const t=n.oxw(2);n.xp6(1),n.Q6J("disabled",t.btnDelete)}}function mn(e,s){if(1&e&&(n.YNc(0,pn,3,1,"span",17),n.YNc(1,dn,3,1,"span",17)),2&e){const t=n.oxw();n.Q6J("appAuth",t.ActionCode.EditProduct),n.xp6(1),n.Q6J("appAuth",t.ActionCode.DelProduct)}}function gn(e,s){if(1&e&&(n.TgZ(0,"span"),n._uU(1),n.ALo(2,"currency"),n.qZA()),2&e){const t=s.tiencuoc;n.xp6(1),n.Oqu(n.Dn7(2,1,1e3*t,"VND",""))}}function zn(e,s){if(1&e){const t=n.EpF();n.TgZ(0,"span",18)(1,"button",21),n.NdJ("click",function(){n.CHM(t);const o=n.oxw(3);return n.KtG(o.Confirm(1))}),n._UZ(2,"i",22),n._uU(3," Ho\xe0n th\xe0nh k\u1ebf ho\u1ea1ch nh\u1eadp "),n.qZA()()}if(2&e){const t=n.oxw(3);n.xp6(1),n.Q6J("disabled",!t.btnConfirm)}}function fn(e,s){if(1&e){const t=n.EpF();n.TgZ(0,"span",18)(1,"button",21),n.NdJ("click",function(){n.CHM(t);const o=n.oxw(3);return n.KtG(o.Confirm(2))}),n._UZ(2,"i",22),n._uU(3," Ho\xe0n th\xe0nh b\xf3c h\xe0ng "),n.qZA()()}if(2&e){const t=n.oxw(3);n.xp6(1),n.Q6J("disabled",!t.btnConfirmbochang)}}function Cn(e,s){if(1&e){const t=n.EpF();n.TgZ(0,"span",18)(1,"button",21),n.NdJ("click",function(){n.CHM(t);const o=n.oxw(3);return n.KtG(o.Confirm(3))}),n._UZ(2,"i",22),n._uU(3," Ho\xe0n th\xe0nh tr\u1ea3 h\xe0ng "),n.qZA()()}if(2&e){const t=n.oxw(3);n.xp6(1),n.Q6J("disabled",!t.btnConfirmtrahang)}}function bn(e,s){if(1&e){const t=n.EpF();n.TgZ(0,"span",18)(1,"button",21),n.NdJ("click",function(){n.CHM(t);const o=n.oxw(3);return n.KtG(o.Confirm4())}),n._UZ(2,"i",22),n._uU(3," T\xednh chi ph\xed "),n.qZA()()}if(2&e){const t=n.oxw(3);n.xp6(1),n.Q6J("disabled",!t.btnConfirmchiphi)}}function _n(e,s){if(1&e){const t=n.EpF();n.TgZ(0,"span",18)(1,"button",21),n.NdJ("click",function(){n.CHM(t);const o=n.oxw(3);return n.KtG(o.Confirm(5))}),n._UZ(2,"i",22),n._uU(3," K\u1ebft th\xfac chuy\u1ebfn h\xe0ng "),n.qZA()()}if(2&e){const t=n.oxw(3);n.xp6(1),n.Q6J("disabled",!t.btnConfirmend)}}function Sn(e,s){if(1&e&&(n.ynx(0),n.YNc(1,zn,4,1,"span",17),n.YNc(2,fn,4,1,"span",17),n.YNc(3,Cn,4,1,"span",17),n.YNc(4,bn,4,1,"span",17),n.YNc(5,_n,4,1,"span",17),n.BQk()),2&e){const t=n.oxw(2);n.xp6(1),n.Q6J("appAuth",t.ActionCode.Confirm),n.xp6(1),n.Q6J("appAuth",t.ActionCode.Confirm),n.xp6(1),n.Q6J("appAuth",t.ActionCode.Confirm),n.xp6(1),n.Q6J("appAuth",t.ActionCode.Confirm),n.xp6(1),n.Q6J("appAuth",t.ActionCode.Confirm)}}function xn(e,s){if(1&e&&n.YNc(0,Sn,6,5,"ng-container",20),2&e){const t=n.oxw();n.Q6J("ngIf",t.showConfirm)}}function Tn(e,s){if(1&e){const t=n.EpF();n.TgZ(0,"button",21),n.NdJ("click",function(){n.CHM(t);const o=n.oxw(2);return n.KtG(o.add())}),n._UZ(1,"i",25),n._uU(2," Th\xeam m\u1edbi "),n.qZA()}if(2&e){const t=n.oxw(2);n.Q6J("disabled",t.btnNew)}}function Xn(e,s){if(1&e){const t=n.EpF();n.TgZ(0,"button",26),n.NdJ("click",function(){n.CHM(t);const o=n.oxw(2);return n.KtG(o.allDel())}),n._UZ(1,"i",27),n._uU(2," X\xf3a t\u1ea5t c\u1ea3 "),n.qZA()}2&e&&n.Q6J("disabled",!0)}function yn(e,s){if(1&e&&(n.YNc(0,Tn,3,1,"button",23),n.YNc(1,Xn,3,1,"button",24)),2&e){const t=n.oxw();n.Q6J("appAuth",t.ActionCode.AddProduct),n.xp6(1),n.Q6J("appAuth",t.ActionCode.DelAllProduct)}}const An=function(){return{"padding-bottom":0}},b=function(){return{xs:8,sm:16,md:24}},En=[{path:"",component:(()=>{class e extends J.H{constructor(t,i,o,a,c,m,_,Qn,Mn,wn,Ln,Fn,Un){super(t,i,o,a),this.webService=t,this.router=i,this.cdf=o,this.datePipe=a,this.message=c,this.modashowProduct=m,this.modalSrv=_,this.ChuyenDto=Qn,this.dataService=Mn,this.phhService=wn,this.cpcService=Ln,this.modalChiphiService=Fn,this.tabService=Un,this.DisplayScreenID=w.t.spch00201,this.reqPhieunhaphang={},this.pageHeaderInfo={title:"K\u1ebf ho\u1ea1ch b\xf3c h\xe0ng",breadcrumb:["Home","Chuy\u1ebfn","K\u1ebf ho\u1ea1ch b\xf3c h\xe0ng"],desc:""},this.searchParam={},this.dateFormat=r.dateFormat,this.dataList=[],this.checkedCashArray=[],this.listchiphi=[],this.ActionCode=Q.h,this.showchuyen=!0,this.showConfirm=!1,this.tongcuoc=0,this.availableOptions=[],this.btnNew=!1,this.btnUpdate=!1,this.btnDelete=!1,this.btnConfirm=!1,this.btnConfirmbochang=!1,this.btnConfirmtrahang=!1,this.btnConfirmchiphi=!1,this.btnConfirmend=!1}fnInit(){this.cdf.markForCheck()}destroy(){}ngOnInit(){this.initTable(),this.getTongcuoc(),this.fnshowConfirm(this.ChuyenDto.trangthai),""!=this.ChuyenDto.id&&24==this.ChuyenDto.id.length&&(this.showchuyen=!1,this.showConfirm=!0),this.availableOptions=[...x.b.transformMapToArray(x.V.available,2)]}fnshowConfirm(t){switch(t){case 0:this.btnConfirm=!0,this.btnConfirmbochang=!1,this.btnConfirmtrahang=!1,this.btnConfirmchiphi=!1,this.btnConfirmend=!1;break;case 1:this.btnConfirm=!1,this.btnConfirmbochang=!0,this.btnConfirmtrahang=!1,this.btnConfirmchiphi=!1,this.btnConfirmend=!1;break;case 2:this.btnConfirm=!1,this.btnConfirmbochang=!1,this.btnConfirmtrahang=!0,this.btnConfirmchiphi=!1,this.btnConfirmend=!1;break;case 3:case 5:this.btnConfirm=!1,this.btnConfirmbochang=!1,this.btnConfirmtrahang=!1,this.btnConfirmchiphi=!0,this.btnConfirmend=!1,this.btnNew=!0,this.btnUpdate=!0,this.btnDelete=!0;break;case 4:this.btnConfirm=!1,this.btnConfirmbochang=!1,this.btnConfirmtrahang=!1,this.btnConfirmchiphi=!0,this.btnConfirmend=!0,this.btnNew=!0,this.btnUpdate=!0,this.btnDelete=!0}this.cdf.markForCheck()}selectChuyen(){this.router.navigate([r.rootbase+"chuyen/spch00101"])}getTongcuoc(){let t=0;for(let i of this.dataList)t+=i.tiencuoc;this.tongcuoc=t,this.cdf.markForCheck()}Confirm4(){5==this.ChuyenDto.trangthai?this.cpcService.getlists({id:this.ChuyenDto.id}).pipe().subscribe(i=>{this.modalChiphiService.show({nzTitle:"Danh s\xe1ch chi ph\xed"},{listcp:i,status:5,showcomfirm:!1}).subscribe(({})=>{})}):this.fncheckchiphiChuyen()}fncheckchiphiChuyen(){let t={id:this.ChuyenDto.id};this.cpcService.getlists(t).pipe().subscribe(i=>{this.listchiphi=i,this.listchiphi.length>0?(console.log(this.listchiphi),this.modalChiphiService.show({nzTitle:"C\u1eadp nh\u1eadt danh s\xe1ch chi ph\xed"},{listcp:this.listchiphi}).subscribe(({modalValue:o,status:a})=>{if(0===a)return;let c={id:t.id,trangthai:4,lstchiphi:o.items};this.cpcService.updateList(c).pipe().subscribe(m=>{m==c.lstchiphi.length?(this.message.info("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng !"),this.ChuyenDto.trangthai=4,this.fnshowConfirm(4)):this.message.info("C\u1eadp nh\u1eadt 1 ph\u1ea7n !")})})):this.modalChiphiService.show({nzTitle:"Danh s\xe1ch chi ph\xed"},{idchuyen:t.id}).subscribe(({modalValue:o,status:a})=>{if(0===a)return;let c={id:t.id,trangthai:4,lstchiphi:o.items};console.log(c),this.dataService.updateTrangthai(c).pipe().subscribe(m=>{1==m?(this.message.success(" Th\u1ef1c hi\u1ec7n th\xe0nh c\xf4ng !"),this.ChuyenDto.trangthai=4,this.fnshowConfirm(4)):this.message.success(" Kh\xf4ng th\xe0nh c\xf4ng !")})})})}Confirm(t){if(""!=this.ChuyenDto.id&&24==this.ChuyenDto.id.length){let i=[],o={id:this.ChuyenDto.id,trangthai:t,listkhachno:i};this.dataList.length>0?(i=this.fnGetListKhachNo(),3==t&&(o.listkhachno=i),this.dataService.updateTrangthai(o).pipe().subscribe(a=>{1==a?(this.message.success(" Th\u1ef1c hi\u1ec7n th\xe0nh c\xf4ng !"),this.ChuyenDto.trangthai=t,this.fnshowConfirm(this.ChuyenDto.trangthai),(0,T.wt)(this.router,r.rootbase+"chuyen/spch00101")):this.message.success(" Kh\xf4ng th\xe0nh c\xf4ng !")})):this.message.success(" Vui l\xf2ng th\xeam m\u1eb7t h\xe0ng !")}}fnGetListKhachNo(){let t=[];for(let i of this.dataList)2==i.hinhthucthanhtoan&&t.push(i);return t}add(){this.modashowProduct.show({nzTitle:"Th\xeam m\u1edbi"}).subscribe(t=>{!t||0===t.status||(t.modalValue.trangthai=0,t.modalValue.biensoxe=this.ChuyenDto.biensoxe,t.modalValue.idchuyen=this.ChuyenDto.id,this.tableLoading(!0),this.addEditData(t.modalValue,"create"))},t=>this.tableLoading(!1))}allDel(){}edit(t){console.log(t),this.phhService.getDetail(t).subscribe(i=>{let o={idchuyen:i.idchuyen,biensoxe:i.biensoxe,iduser:i.iduser,tiencuoc:i.tiencuoc,lotrinh:i.lotrinh,ngaynhap:i.ngaynhap,noidungdonhang:i.noidungdonhang,diadiembochang:i.diadiembochang,hinhthucthanhtoan:i.hinhthucthanhtoan+"",ghichu:null,trangthai:i.trangthai,id:i.id};console.log(o),this.modashowProduct.show({nzTitle:"C\u1eadp nh\u1eadt"},o).subscribe(({modalValue:a,status:c})=>{0!==c&&(a.id=t,this.tableLoading(!0),this.addEditData(a,"update"))},a=>this.tableLoading(!1))})}del(t){this.modalSrv.confirm({nzTitle:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a n\xf3 kh\xf4ng?",nzContent:"Kh\xf4ng th\u1ec3 ph\u1ee5c h\u1ed3i sau khi x\xf3a",nzOnOk:()=>{this.tableLoading(!0),this.phhService.delete(t).subscribe(()=>{1===this.dataList.length&&this.tableConfig.pageIndex--,this.getDataList(),this.getTongcuoc()},i=>this.tableLoading(!1))}})}addEditData(t,i){this.phhService[i](t).pipe((0,f.x)(()=>{this.tableLoading(!1)})).subscribe(()=>{this.getDataList(),this.getTongcuoc()})}getDataList(t){this.tableConfig.loading=!0,""!=this.ChuyenDto.id&&(this.searchParam.idchuyen=this.ChuyenDto.id),this.phhService.getlists({pageSize:this.tableConfig.pageSize,pageNum:t?.pageIndex||this.tableConfig.pageIndex,filters:this.searchParam}).pipe((0,f.x)(()=>{this.tableLoading(!1)})).subscribe(o=>{console.log(o);const{list:a,total:c,pageNum:m}=o;let _=this.listToProduct(a);this.dataList=[..._],this.getTongcuoc(),this.tableConfig.total=c,this.tableConfig.pageIndex=m,this.tableLoading(!1),this.checkedCashArray=[...this.checkedCashArray]})}listToProduct(t){let i=[];if(t.length>0){let o=0;for(let a of t){let c={};c.id=a.id,c.stt=o+1,c.idkhachhang=a.iduser._id,c.tenkhachhang=a.iduser.name,c.noidungmathang=a.noidungdonhang,c.lotrinh=a.lotrinh,c.diadiembochang=a.diadiembochang,c.hinhthucthanhtoan=a.hinhthucthanhtoan,c.tiencuoc=a.tiencuoc,c.trangthai=a.trangthai,c.ghichu=a.ghichu,o++,i.push(c)}}return i}reloadTable(){this.message.info("\u0110\xe3 \u0111\u01b0\u1ee3c l\xe0m m\u1edbi"),this.getDataList()}tableChangeDectction(){this.dataList=[...this.dataList],this.cdf.detectChanges()}tableLoading(t){this.tableConfig.loading=t,this.tableChangeDectction()}selectedChecked(t){this.checkedCashArray=[...t]}initTable(){this.tableConfig={showCheckbox:!1,headers:[{title:"STT",field:"stt",width:80},{title:"ID Kh\xe1ch H\xe0ng",width:180,field:"idkhachhang"},{title:"T\xean Kh\xe1ch H\xe0ng",width:170,field:"tenkhachhang"},{title:"N\u1ed9i dung b\xf3c h\xe0ng",width:450,field:"noidungmathang"},{title:"Ti\u1ec1n c\u01b0\u1edbc",width:100,field:"tiencuoc",tdTemplate:this.tiencuocTpl},{title:"\u0110\u1ecba \u0111i\u1ec3m b\xf3c h\xe0ng",width:300,field:"diadiembochang"},{title:"H\xecnh th\u1ee9c thanh to\xe1n",width:250,field:"hinhthucthanhtoan"},{title:"L\u1ed9 tr\xecnh",width:150,field:"lotrinh"},{title:"Ghi ch\xfa",width:450,field:"ghichu"},{title:"H\xe0nh \u0111\u1ed9ng",tdTemplate:this.operationTpl,width:200,fixed:!0,fixedDir:"right"}],total:0,loading:!0,pageSize:10,pageIndex:1,yScroll:400}}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(L.Q),n.Y36(g.F0),n.Y36(n.sBO),n.Y36(p.uU),n.Y36(F.dD),n.Y36(G),n.Y36(X.Sf),n.Y36(P.$),n.Y36(H.p),n.Y36(O),n.Y36(V),n.Y36(R.Z),n.Y36(W.p))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-spch00201"]],viewQuery:function(t,i){if(1&t&&(n.Gf(cn,7),n.Gf(rn,7)),2&t){let o;n.iGM(o=n.CRH())&&(i.operationTpl=o.first),n.iGM(o=n.CRH())&&(i.tiencuocTpl=o.first)}},features:[n._Bn([M.z]),n.qOj],decls:82,vars:211,consts:[[3,"pageHeaderInfo"],[1,"normal-table-wrap"],["nzHoverable","",1,"m-b-10",3,"nzBodyStyle"],["nz-row","",3,"nzGutter"],["nz-col","",3,"nzXXl","nzXl","nzLg","nzMd","nzSm","nzXs"],["nzRequired","",3,"nzXXl","nzXl","nzLg","nzMd","nzSm","nzXs","nzFor"],[3,"nzXXl","nzXl","nzLg","nzMd","nzSm","nzXs"],[4,"ngIf","ngIfElse"],["showmachuyen",""],[3,"ngStyle"],[3,"tableTitle","btnTpl","btnConfirm","reload"],[3,"checkedCashArrayFromComment","tableConfig","tableData","selectedChange","changePageNum"],["operationTpl",""],["tiencuocTpl",""],["tableConfirm",""],["tableBtns",""],["nz-button","","nzType","primary","nzGhost","",3,"click"],["class","operate-text",4,"appAuth"],[1,"operate-text"],["nz-button","","nzType","primary","nzGhost","",3,"disabled","click"],[4,"ngIf"],["nz-button","","nzType","primary",1,"m-r-8",3,"disabled","click"],["nz-icon","","nzType","caret-right"],["nz-button","","nzType","primary","class","m-r-8",3,"disabled","click",4,"appAuth"],["nz-button","","nzType","default",3,"disabled","click",4,"appAuth"],["nz-icon","","nzType","plus"],["nz-button","","nzType","default",3,"disabled","click"],["nz-icon","","nzType","delete"]],template:function(t,i){if(1&t&&(n._UZ(0,"app-page-header",0),n.TgZ(1,"div",1)(2,"nz-card",2)(3,"div",3)(4,"div",4)(5,"nz-form-item")(6,"nz-form-label",5),n._uU(7,"M\xe3 Chuy\u1ebfn h\xe0ng"),n.qZA(),n.TgZ(8,"nz-form-control",6),n.YNc(9,ln,3,0,"ng-container",7),n.YNc(10,un,2,3,"ng-template",null,8,n.W1O),n.qZA()()(),n.TgZ(12,"div",4)(13,"nz-form-item")(14,"nz-form-label",5),n._uU(15,"Bi\u1ec3n s\u1ed1 xe"),n.qZA(),n.TgZ(16,"nz-form-control",6)(17,"span",9),n._uU(18),n.qZA()()()(),n.TgZ(19,"div",4)(20,"nz-form-item")(21,"nz-form-label",5),n._uU(22,"Ti\u1ec1n \u0111\u01b0a tr\u01b0\u1edbc"),n.qZA(),n.TgZ(23,"nz-form-control",6)(24,"span",9),n._uU(25),n.ALo(26,"currency"),n.qZA()()()()(),n.TgZ(27,"div",3)(28,"div",4)(29,"nz-form-item")(30,"nz-form-label",5),n._uU(31,"T\xe0i ch\xednh"),n.qZA(),n.TgZ(32,"nz-form-control",6)(33,"span",9),n._uU(34),n.qZA()()()(),n.TgZ(35,"div",4)(36,"nz-form-item")(37,"nz-form-label",5),n._uU(38,"T\xe0i ph\u1ee5"),n.qZA(),n.TgZ(39,"nz-form-control",6)(40,"span",9),n._uU(41),n.qZA()()()(),n.TgZ(42,"div",4)(43,"nz-form-item")(44,"nz-form-label",5),n._uU(45,"\u0110i\u1ec3m \u0111i - \u0111i\u1ec3m \u0111\u1ebfn"),n.qZA(),n.TgZ(46,"nz-form-control",6)(47,"span",9),n._uU(48),n.qZA()()()()(),n.TgZ(49,"div",3)(50,"div",4)(51,"nz-form-item")(52,"nz-form-label",5),n._uU(53,"Ng\xe0y Kh\u1edfi h\xe0nh"),n.qZA(),n.TgZ(54,"nz-form-control",6)(55,"span",9),n._uU(56),n.qZA()()()(),n.TgZ(57,"div",4)(58,"nz-form-item")(59,"nz-form-label",5),n._uU(60,"Ng\xe0y v\u1ec1"),n.qZA(),n.TgZ(61,"nz-form-control",6)(62,"span",9),n._uU(63),n.qZA()()()(),n.TgZ(64,"div",4)(65,"nz-form-item")(66,"nz-form-label",5),n._uU(67,"T\u1ed5ng C\u01b0\u1edbc"),n.qZA(),n.TgZ(68,"nz-form-control",6)(69,"span",9),n._uU(70),n.ALo(71,"currency"),n.qZA()()()()()(),n.TgZ(72,"app-card-table-wrap",10),n.NdJ("reload",function(){return i.reloadTable()}),n.TgZ(73,"app-ant-table",11),n.NdJ("selectedChange",function(a){return i.selectedChecked(a)})("changePageNum",function(){return i.getDataList()}),n.qZA(),n.YNc(74,mn,2,2,"ng-template",null,12,n.W1O),n.YNc(76,gn,3,5,"ng-template",null,13,n.W1O),n.qZA(),n.YNc(78,xn,1,1,"ng-template",null,14,n.W1O),n.YNc(80,yn,2,2,"ng-template",null,15,n.W1O),n.qZA()),2&t){const o=n.MAs(11),a=n.MAs(79),c=n.MAs(81);n.Q6J("pageHeaderInfo",i.pageHeaderInfo),n.xp6(2),n.Q6J("nzBodyStyle",n.DdM(199,An)),n.xp6(1),n.Q6J("nzGutter",n.DdM(200,b)),n.xp6(1),n.Q6J("nzXXl",8)("nzXl",8)("nzLg",8)("nzMd",12)("nzSm",24)("nzXs",24),n.xp6(2),n.Q6J("nzXXl",9)("nzXl",9)("nzLg",9)("nzMd",12)("nzSm",24)("nzXs",24),n.xp6(2),n.Q6J("nzXXl",12)("nzXl",12)("nzLg",12)("nzMd",12)("nzSm",24)("nzXs",24),n.xp6(1),n.Q6J("ngIf",""==i.ChuyenDto.id)("ngIfElse",o),n.xp6(3),n.Q6J("nzXXl",8)("nzXl",8)("nzLg",8)("nzMd",12)("nzSm",24)("nzXs",24),n.xp6(2),n.Q6J("nzXXl",9)("nzXl",9)("nzLg",9)("nzMd",12)("nzSm",24)("nzXs",24),n.xp6(2),n.Q6J("nzXXl",12)("nzXl",12)("nzLg",12)("nzMd",12)("nzSm",24)("nzXs",24),n.xp6(1),n.Q6J("ngStyle",n.DdM(201,u)),n.xp6(1),n.Oqu(i.ChuyenDto.biensoxe),n.xp6(1),n.Q6J("nzXXl",8)("nzXl",8)("nzLg",8)("nzMd",12)("nzSm",24)("nzXs",24),n.xp6(2),n.Q6J("nzXXl",9)("nzXl",9)("nzLg",9)("nzMd",12)("nzSm",24)("nzXs",24),n.xp6(2),n.Q6J("nzXXl",12)("nzXl",12)("nzLg",12)("nzMd",12)("nzSm",24)("nzXs",24),n.xp6(1),n.Q6J("ngStyle",n.DdM(202,u)),n.xp6(1),n.Oqu(n.Dn7(26,191,1e3*i.ChuyenDto.tienxe,"VND","")),n.xp6(2),n.Q6J("nzGutter",n.DdM(203,b)),n.xp6(1),n.Q6J("nzXXl",8)("nzXl",8)("nzLg",8)("nzMd",12)("nzSm",24)("nzXs",24),n.xp6(2),n.Q6J("nzXXl",9)("nzXl",9)("nzLg",9)("nzMd",12)("nzSm",24)("nzXs",24),n.xp6(2),n.Q6J("nzXXl",12)("nzXl",12)("nzLg",12)("nzMd",12)("nzSm",24)("nzXs",24),n.xp6(1),n.Q6J("ngStyle",n.DdM(204,u)),n.xp6(1),n.Oqu(i.ChuyenDto.idtai),n.xp6(1),n.Q6J("nzXXl",8)("nzXl",8)("nzLg",8)("nzMd",12)("nzSm",24)("nzXs",24),n.xp6(2),n.Q6J("nzXXl",9)("nzXl",9)("nzLg",9)("nzMd",12)("nzSm",24)("nzXs",24),n.xp6(2),n.Q6J("nzXXl",12)("nzXl",12)("nzLg",12)("nzMd",12)("nzSm",24)("nzXs",24),n.xp6(1),n.Q6J("ngStyle",n.DdM(205,u)),n.xp6(1),n.Oqu(i.ChuyenDto.idphu),n.xp6(1),n.Q6J("nzXXl",8)("nzXl",8)("nzLg",8)("nzMd",12)("nzSm",24)("nzXs",24),n.xp6(2),n.Q6J("nzXXl",9)("nzXl",9)("nzLg",9)("nzMd",12)("nzSm",24)("nzXs",24),n.xp6(2),n.Q6J("nzXXl",12)("nzXl",12)("nzLg",12)("nzMd",12)("nzSm",24)("nzXs",24),n.xp6(1),n.Q6J("ngStyle",n.DdM(206,u)),n.xp6(1),n.Oqu(i.ChuyenDto.changduong),n.xp6(1),n.Q6J("nzGutter",n.DdM(207,b)),n.xp6(1),n.Q6J("nzXXl",8)("nzXl",8)("nzLg",8)("nzMd",12)("nzSm",24)("nzXs",24),n.xp6(2),n.Q6J("nzXXl",9)("nzXl",9)("nzLg",9)("nzMd",12)("nzSm",24)("nzXs",24),n.xp6(2),n.Q6J("nzXXl",12)("nzXl",12)("nzLg",12)("nzMd",12)("nzSm",24)("nzXs",24),n.xp6(1),n.Q6J("ngStyle",n.DdM(208,u)),n.xp6(1),n.Oqu(i.ChuyenDto.ngaydi),n.xp6(1),n.Q6J("nzXXl",8)("nzXl",8)("nzLg",8)("nzMd",12)("nzSm",24)("nzXs",24),n.xp6(2),n.Q6J("nzXXl",9)("nzXl",9)("nzLg",9)("nzMd",12)("nzSm",24)("nzXs",24),n.xp6(2),n.Q6J("nzXXl",12)("nzXl",12)("nzLg",12)("nzMd",12)("nzSm",24)("nzXs",24),n.xp6(1),n.Q6J("ngStyle",n.DdM(209,u)),n.xp6(1),n.Oqu(i.ChuyenDto.ngayve),n.xp6(1),n.Q6J("nzXXl",8)("nzXl",8)("nzLg",8)("nzMd",12)("nzSm",24)("nzXs",24),n.xp6(2),n.Q6J("nzXXl",9)("nzXl",9)("nzLg",9)("nzMd",12)("nzSm",24)("nzXs",24),n.xp6(2),n.Q6J("nzXXl",12)("nzXl",12)("nzLg",12)("nzMd",12)("nzSm",24)("nzXs",24),n.xp6(1),n.Q6J("ngStyle",n.DdM(210,u)),n.xp6(1),n.Oqu(n.Dn7(71,195,1e3*i.tongcuoc,"VND","")),n.xp6(2),n.Q6J("tableTitle","Danh s\xe1ch m\u1eb7t h\xe0ng")("btnTpl",c)("btnConfirm",a),n.xp6(1),n.Q6J("checkedCashArrayFromComment",i.checkedCashArray)("tableConfig",i.tableConfig)("tableData",i.dataList)}},dependencies:[p.O5,p.PC,j.q,$.q,nn.x,tn.p,en.Ls,z.t3,z.SK,d.Nx,d.iK,d.Fd,on.ix,hn.w,an.dQ,sn.bd,p.H9],changeDetection:0}),e})(),data:{title:"K\u1ebf ho\u1ea1ch b\xf3c h\xe0ng",key:"spch00201"}}];let Zn=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[g.Bz.forChild(En),g.Bz]}),e})();var v=h(6083);let vn=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[v.m]}),e})();var Dn=h(8538);let Jn=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[Zn,v.m,D.C,vn,Dn.V]}),e})()}}]);