"use strict";(self.webpackChunkng_ant_admin=self.webpackChunkng_ant_admin||[]).push([[4267],{85216:(E,g,o)=>{o.d(g,{m:()=>d});var u=o(94650);let d=(()=>{class n{constructor(){this.formRules={nonEmpty:"^[a-zA-Z0-9]+([_ -]?[a-zA-Z0-9])*$",usernameMin:6,passwordMin:6,passwordPattern:"^[a-zA-Z0-9]{6,20}$"},this.formErrors={name:"",email:"",password:"",confirmPassword:"",accept:!1},this.errorMessages={name:{required:"Name kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng",minLength:`Name t\u1ed1i thi\u1ec3u ${this.formRules.usernameMin} k\xfd t\u1ef1`,pattern:"Must contain letters and/or numbers, no trailing spaces",namedb:"T\xean T\xe0i Kho\u1ea3n \u0111\xe3 t\u1ed3n t\u1ea1i."},text:{required:"Kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng."},email:{required:"Kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng.",email:"\u0110\u1ecba ch\u1ec9 Email kh\xf4ng \u0111\xfang.",emaildb:"Email \u0111\xe3 t\u1ed3n t\u1ea1i."},password:{required:"Password kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng",pattern:"Password l\xe0 k\xfd t\u1ef1 \u0111\u1eb7c bi\u1ec7t, s\u1ed1, ch\u1eef hoa v\xe0 ch\u1eef th\u01b0\u1eddng",minLength:`Password t\u1ed1i thi\u1ec3u ${this.formRules.passwordMin} k\xfd t\u1ef1`},confirmPassword:{required:"Password confirmation is required",passwordMismatch:"Passwords must match"},accept:{requiredTrue:"You have to accept our Terms and Conditions"}}}}return n.\u0275fac=function(p){return new(p||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()},67859:(E,g,o)=>{o.d(g,{S:()=>v});var u=o(94650),w=o(91565);let z=(()=>{class e{constructor(s){this.webService=s}mobileRule(s){return s?function T(e){return/^(0|\+?84|17951)?(13[0-9]|15[0-9]|17[0678]|18[0-9]|14[57])[0-9]{8}$/.test(e)}(s)?null:{message:"Vui l\xf2ng nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i ch\xednh x\xe1c"}:null}telPhoneRule(s){return s?function C(e){return/^(0\d{2,3}-?)?\d{7,8}$/.test(e)}(s)?null:{message:"Vui l\xf2ng nh\u1eadp zalo ch\xednh x\xe1c"}:null}emailRule(s){return s?function _(e){return/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/.test(e)}(s)?null:{message:"Vui l\xf2ng nh\u1eadp emali ch\xednh x\xe1c"}:null}passwordRule(s){return s?function b(e){return/^[^\s]{6,20}$/.test(e)&&!/^\d+$/.test(e)}(s)?null:{message:"M\u1eadt kh\u1ea9u bao g\u1ed3m 6 \u0111\u1ebfn 20 ch\u1eef c\xe1i vi\u1ebft hoa v\xe0 vi\u1ebft th\u01b0\u1eddng, s\u1ed1 ho\u1eb7c c\xe1c k\xfd t\u1ef1 kh\xe1c"}:null}}return e.\u0275fac=function(s){return new(s||e)(u.LFG(w.Q))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),v=(()=>{class e{constructor(s){this.vrService=s}emailValidator(){return this.commonUtil(this.vrService.emailRule)}mobileValidator(){return this.commonUtil(this.vrService.telPhoneRule)}passwordValidator(){return this.commonUtil(this.vrService.passwordRule)}zaloValidator(){return this.commonUtil(this.vrService.telPhoneRule)}commonUtil(s){return k=>s(k.value)}}return e.\u0275fac=function(s){return new(s||e)(u.LFG(z))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},94267:(E,g,o)=>{o.d(g,{a:()=>O});var u=o(44556),d=o(28746),n=o(94650),h=o(24006),p=o(67859),T=o(91565),C=o(85216),_=o(49651),b=o(50007),M=o(69454),w=o(49523),z=o(39646),v=o(36895),e=o(73679),m=o(36704),s=o(35635);function k(a,l){if(1&a&&(n.ynx(0),n._uU(1),n.BQk()),2&a){const t=n.oxw().$implicit;n.xp6(1),n.Oqu(t.errors.message)}}function Z(a,l){1&a&&(n.ynx(0),n._uU(1,"Ph\u1ea7n b\u1eaft bu\u1ed9c"),n.BQk())}function x(a,l){if(1&a&&(n.YNc(0,k,2,1,"ng-container",9),n.YNc(1,Z,2,0,"ng-container",9)),2&a){const t=l.$implicit;n.Q6J("ngIf",t.hasError("message")),n.xp6(1),n.Q6J("ngIf",t.hasError("required"))}}let L=(()=>{class a{constructor(t,i,r,c){this.modalRef=t,this.fb=i,this.cdf=r,this.validatorsService=c}initForm(){this.addForm=this.fb.group({makhachhang:[null,[h.kI.required]],name:[null,[h.kI.required]],dienthoai:[null,[this.validatorsService.mobileValidator()]]})}ngOnInit(){this.initForm()}getAsyncFnData(t){return(0,z.of)(t)}getCurrentValue(){return(0,w.r7)(this.addForm)?(0,z.of)(this.addForm.value):(0,z.of)(!1)}}return a.\u0275fac=function(t){return new(t||a)(n.Y36(b.Lf),n.Y36(h.qu),n.Y36(n.sBO),n.Y36(p.S))},a.\u0275cmp=n.Xpm({type:a,selectors:[["app-subwindowsmartkhachhang"]],decls:18,vars:16,consts:[["nz-form","",3,"formGroup"],["nzRequired","","nzFor","makhachhang",3,"nzSm","nzXs"],[3,"nzSm","nzXs","nzErrorTip"],["nz-input","","formControlName","makhachhang","id","makhachhang","placeholder","M\xe3 kh\xe1ch h\xe0ng"],["nzRequired","","nzFor","name",3,"nzSm","nzXs"],["nz-input","","formControlName","name","id","name","placeholder","T\xean kh\xe1ch h\xe0ng"],["nzRequired","","nzFor","dienthoai",3,"nzSm","nzXs"],["nz-input","","formControlName","dienthoai","id","dienthoai","placeholder","S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"],["combineTpl",""],[4,"ngIf"]],template:function(t,i){if(1&t&&(n.TgZ(0,"form",0)(1,"nz-form-item")(2,"nz-form-label",1),n._uU(3,"M\xe3 kh\xe1ch h\xe0ng"),n.qZA(),n.TgZ(4,"nz-form-control",2),n._UZ(5,"input",3),n.qZA()(),n.TgZ(6,"nz-form-item")(7,"nz-form-label",4),n._uU(8,"T\xean kh\xe1ch h\xe0ng"),n.qZA(),n.TgZ(9,"nz-form-control",2),n._UZ(10,"input",5),n.qZA()(),n.TgZ(11,"nz-form-item")(12,"nz-form-label",6),n._uU(13,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"),n.qZA(),n.TgZ(14,"nz-form-control",2),n._UZ(15,"input",7),n.qZA()()(),n.YNc(16,x,2,2,"ng-template",null,8,n.W1O)),2&t){const r=n.MAs(17);n.Q6J("formGroup",i.addForm),n.xp6(2),n.Q6J("nzSm",4)("nzXs",24),n.xp6(2),n.Q6J("nzSm",18)("nzXs",24)("nzErrorTip",r),n.xp6(3),n.Q6J("nzSm",4)("nzXs",24),n.xp6(2),n.Q6J("nzSm",18)("nzXs",24)("nzErrorTip",r),n.xp6(3),n.Q6J("nzSm",4)("nzXs",24),n.xp6(2),n.Q6J("nzSm",18)("nzXs",24)("nzErrorTip",r)}},dependencies:[v.O5,h._Y,h.Fj,h.JJ,h.JL,h.sg,h.u,e.t3,e.SK,m.Lr,m.Nx,m.iK,m.Fd,s.Zp]}),a})();var X=o(69174);let F=(()=>{class a{constructor(t){this.modalWrapService=t}getContentComponent(){return L}show(t={},i){return this.modalWrapService.show(this.getContentComponent(),t,i)}}return a.\u0275fac=function(t){return new(t||a)(n.LFG(X.U))},a.\u0275prov=n.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var A=o(5529),P=o(94178),J=o(21102),N=o(66616),Q=o(47044),R=o(21811),U=o(51971);const D=["operationTpl"],Y=["availableFlag"];function I(a,l){if(1&a){const t=n.EpF();n.TgZ(0,"a",18),n.NdJ("click",function(){const r=n.CHM(t),c=r.id,f=r.name,S=n.oxw();return n.KtG(S.getItem(c,f))}),n._uU(1),n.qZA()}if(2&a){const t=l.name;n.xp6(1),n.Oqu(t)}}function V(a,l){if(1&a){const t=n.EpF();n.TgZ(0,"button",10),n.NdJ("click",function(){n.CHM(t);const r=n.oxw();return n.KtG(r.addNew())}),n._UZ(1,"i",19),n._uU(2,"Th\xeam m\u1edbi"),n.qZA()}}const K=function(){return{"padding-bottom":0}},y=function(){return{md:24}},G=function(){return["toright"]};let $=(()=>{class a{constructor(t,i,r,c,f,S,B,q,H){this.fb=t,this.validatorsService=i,this.webService=r,this.vf=c,this.message=f,this.cdr=S,this.modalRef=B,this.dataService=q,this.subSmartKhachhangService=H,this.dataList=[],this.dataResponse={},this.messageErrors=[],this.searchParam={}}submitForm(){}reset(){this.searchParam={},this.searchParam.phongban_id=u.idKhachhang,this.getDataList()}generateRandomEmail(){const t="abcdefghijklmnopqrstuvwxyz0123456789";let i="";for(let r=0;r<10;r++)i+=t[Math.floor(Math.random()*t.length)];return i+="@gmail.com",i}addNew(){this.subSmartKhachhangService.show({nzTitle:"Th\xeam m\u1edbi"}).subscribe(t=>{if(!t||0===t.status)return;let i=t.modalValue.makhachhang;this.smartUser={phongban_id:u.idKhachhang,makhachhang:t.modalValue.makhachhang,name:t.modalValue.name,dienthoai:t.modalValue.dienthoai,email:this.generateRandomEmail(),password:"a123456"},this.dataService.addSmartAccount(this.smartUser).pipe((0,d.x)(()=>{this.tableLoading(!1)})).subscribe(r=>{this.searchParam.makhachhang=i,this.getDataList(),this.message.success("Th\xeam m\u1edbi th\xe0nh c\xf4ng !")})})}ngOnInit(){this.searchParam.phongban_id=u.idKhachhang,this.initTable()}tableChangeDectction(){this.dataList=[...this.dataList],this.cdr.detectChanges()}tableLoading(t){this.tableConfig.loading=t,this.tableChangeDectction()}getDataList(t){this.tableConfig.loading=!0,this.dataService.getAccount({pageSize:this.tableConfig.pageSize,pageNum:t?.pageIndex||this.tableConfig.pageIndex,filters:this.searchParam}).pipe((0,d.x)(()=>{this.tableLoading(!1)})).subscribe(r=>{const{list:c,total:f,pageNum:S}=r;this.dataList=[...c],this.tableConfig.total=f,this.tableConfig.pageIndex=S,this.tableLoading(!1)})}changePageSize(t){this.tableConfig.pageSize=t}resetForm(){this.searchParam={},this.getDataList()}reloadTable(){this.message.info("L\xe0m m\u1edbi th\xe0nh c\xf4ng"),this.getDataList()}getItem(t,i){this.dataResponse={id:t,name:i},this.modalRef.destroy({status:1,modalValue:this.dataResponse})}initTable(){this.tableConfig={showCheckbox:!1,headers:[{title:"M\xe3 Kh\xe1ch h\xe0ng",field:"makhachhang",width:220},{title:"T\xean kh\xe1ch h\xe0ng",field:"name",width:220,tdTemplate:this.operationTpl},{title:"Tr\u1ea1ng th\xe1i",width:150,field:"available"},{title:"Gi\u1edbi T\xednh",width:120,field:"sex",pipe:"sex"},{title:"\u0110i\u1ec7n Tho\u1ea1i",width:150,field:"dienthoai"},{title:"Email",width:200,field:"email"},{title:"\u0110\u0103ng nh\u1eadp l\u1ea7n cu\u1ed1i",width:200,field:"lastLoginTime",pipe:"date:yyyy-MM-dd HH:mm"},{title:"Ng\xe0y kh\u1edfi t\u1ea1o",width:150,field:"createdAt",pipe:"date:yyyy-MM-dd HH:mm"},{title:"Zalo",width:150,field:"zalo"}],total:0,loading:!0,pageSize:10,pageIndex:1}}}return a.\u0275fac=function(t){return new(t||a)(n.Y36(h.qu),n.Y36(p.S),n.Y36(T.Q),n.Y36(C.m),n.Y36(_.dD),n.Y36(n.sBO),n.Y36(b.Lf),n.Y36(M.B),n.Y36(F))},a.\u0275cmp=n.Xpm({type:a,selectors:[["app-spin00251subkhachhang"]],viewQuery:function(t,i){if(1&t&&(n.Gf(D,7),n.Gf(Y,7)),2&t){let r;n.iGM(r=n.CRH())&&(i.operationTpl=r.first),n.iGM(r=n.CRH())&&(i.availableFlag=r.first)}},decls:29,vars:51,consts:[[1,"normal-table-wrap"],["nzHoverable","",1,"m-b-10",3,"nzBodyStyle"],["nz-form",""],["nz-row","",3,"nzGutter"],["nz-col","",3,"nzXXl","nzXl","nzLg","nzMd","nzSm","nzXs"],[3,"nzXXl","nzXl","nzLg","nzMd","nzSm","nzXs","nzFor"],[3,"nzXXl","nzXl","nzLg","nzMd","nzSm","nzXs"],["nz-input","","name","makhachhang","placeholder","M\xe3 kh\xe1ch h\xe0ng",3,"ngModel","ngModelChange"],["nz-input","","name","dienthoai","placeholder","S\u1ed1 \u0111i\u1ec7n tho\u1ea1i",3,"ngModel","ngModelChange"],["nz-row","",3,"nzGutter","ngClass"],["nz-button","","nzType","primary",3,"click"],["nz-icon","","nzType","search"],["nzGhost","","nz-button","","nzType","primary",1,"m-l-20",3,"click"],["nz-icon","","nzType","close-circle"],[3,"tableTitle","btnTpl","isNormalTable","reload"],[3,"tableConfig","tableData","changePageSize","changePageNum"],["operationTpl",""],["tableTbl",""],["nz-button","","nzType","link",3,"click"],["nz-icon","","nzType","plus"]],template:function(t,i){if(1&t&&(n.TgZ(0,"div",0)(1,"nz-card",1)(2,"form",2)(3,"div",3)(4,"div",4)(5,"nz-form-item")(6,"nz-form-label",5),n._uU(7,"M\xe3 kh\xe1ch h\xe0ng"),n.qZA(),n.TgZ(8,"nz-form-control",6)(9,"input",7),n.NdJ("ngModelChange",function(c){return i.searchParam.makhachhang=c}),n.qZA()()()(),n.TgZ(10,"div",4)(11,"nz-form-item")(12,"nz-form-label",5),n._uU(13,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"),n.qZA(),n.TgZ(14,"nz-form-control",6)(15,"input",8),n.NdJ("ngModelChange",function(c){return i.searchParam.dienthoai=c}),n.qZA()()()()(),n.TgZ(16,"div",9)(17,"button",10),n.NdJ("click",function(){return i.getDataList()}),n._UZ(18,"i",11),n._uU(19,"T\xecm ki\u1ebfm"),n.qZA(),n.TgZ(20,"button",12),n.NdJ("click",function(){return i.reset()}),n._UZ(21,"i",13),n._uU(22,"L\xe0m m\u1edbi"),n.qZA()()()()(),n.TgZ(23,"app-card-table-wrap",14),n.NdJ("reload",function(){return i.reloadTable()}),n.TgZ(24,"app-ant-table",15),n.NdJ("changePageSize",function(c){return i.changePageSize(c)})("changePageNum",function(c){return i.getDataList(c)}),n.qZA(),n.YNc(25,I,2,1,"ng-template",null,16,n.W1O),n.qZA(),n.YNc(27,V,3,0,"ng-template",null,17,n.W1O)),2&t){const r=n.MAs(28);n.xp6(1),n.Q6J("nzBodyStyle",n.DdM(47,K)),n.xp6(2),n.Q6J("nzGutter",n.DdM(48,y)),n.xp6(1),n.Q6J("nzXXl",12)("nzXl",12)("nzLg",12)("nzMd",24)("nzSm",24)("nzXs",24),n.xp6(2),n.Q6J("nzXXl",9)("nzXl",9)("nzLg",9)("nzMd",9)("nzSm",24)("nzXs",24),n.xp6(2),n.Q6J("nzXXl",15)("nzXl",15)("nzLg",15)("nzMd",15)("nzSm",24)("nzXs",24),n.xp6(1),n.Q6J("ngModel",i.searchParam.makhachhang),n.xp6(1),n.Q6J("nzXXl",12)("nzXl",12)("nzLg",12)("nzMd",24)("nzSm",24)("nzXs",24),n.xp6(2),n.Q6J("nzXXl",9)("nzXl",9)("nzLg",9)("nzMd",12)("nzSm",24)("nzXs",24),n.xp6(2),n.Q6J("nzXXl",15)("nzXl",15)("nzLg",15)("nzMd",12)("nzSm",24)("nzXs",24),n.xp6(1),n.Q6J("ngModel",i.searchParam.dienthoai),n.xp6(1),n.Q6J("nzGutter",n.DdM(49,y))("ngClass",n.DdM(50,G)),n.xp6(7),n.Q6J("tableTitle","K\u1ebft qu\u1ea3 t\xecm ki\u1ebfm")("btnTpl",r)("isNormalTable",!1),n.xp6(1),n.Q6J("tableConfig",i.tableConfig)("tableData",i.dataList)}},dependencies:[v.mk,h._Y,h.Fj,h.JJ,h.JL,h.On,h.F,A.q,P.p,J.Ls,e.t3,e.SK,m.Lr,m.Nx,m.iK,m.Fd,N.ix,Q.w,R.dQ,s.Zp,U.bd],styles:[".toright[_ngcontent-%COMP%]{display:flex;justify-content:end;margin-bottom:10px}"]}),a})(),O=(()=>{class a{constructor(t){this.modalWrapService=t}getContentComponent(){return $}show(t={},i){return this.modalWrapService.show(this.getContentComponent(),t,i)}}return a.\u0275fac=function(t){return new(t||a)(n.LFG(X.U))},a.\u0275prov=n.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()}}]);